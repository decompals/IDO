#EDIR DATA#
LANG="C"FLEXlm Programmers GuideDocument Number 860-0124-001Copyrightname='copyrightserif' font=symbol charset=fontspecific code=211
	descr='[copyrightserif]' 1994 Globetrotter Software, IncAll Rights Reserved. Globetrotter Software products contain certain confidential information of Globetrotter Software, Inc. Use of this copyright notice is precautionary and does not imply publication or disclosure. No part of this publication may be reproduced, transmitted, transcribed, stored in a retrieval system, or translated into any language in any form by any means without the written permission of Globetrotter Software, Inc.TrademarksFLEXlm is a registered trademark of Globetrotter Software, Inc.  Apollo is a trademark of Hewlett-Packard Company. HP and Hewlett-Packard are registered trademarks of Hewlett-Packard Company. DEC VAX is a registered trademark of Digital Equipment Corporation. Sun is a trademark of Sun Microsystems, Inc. UNIX is a trademark of UNIXSystems Labs. All other product names mentioned herein are the trademarks of their respective owners.Restricted Rights LegendUse, duplication, or disclosure by the government is subject to restrictions as set forth in subparagraph (c)(1)(ii) of the Rights of Technical Data and Computer Software clause at DFARS 252.227-0713 and FAR52.227-19.Printed in the USA.December, 1994LBL="1"Introduction to FLEXlmFLEXlm is a network-wide floating licensing package that allows a software application to be licensed on a concurrent-usage, as well as on a per-computer, basis.LBL="" HELPID=""Features of FLEXlmWith FLEXlm, you, the application developer, can restrict the use of your software packages to:A single specified computer.A specified number of users on a single computer.A specified number of users in a network containing one or more computer systems.FLEXlm is available on UNIX, VMS, Windows (clients only), and Windows NT systems. FLEXlm features include:Restriction of software packages to specified computers and users.Operation in a heterogeneous network of supported computer systems.License management on redundant server hosts for improved license availability due to hardware failure.Optional license expiration dates.Counted and uncounted license usage.Support for demo software.Independent features from one or multiple vendors with independent vendor security codes.A vendor-definable field for each application feature.Transparent reconnection of applications when their daemon process becomes unavailable, including conditions of license server node failure.Ease of configuration with a single license file per network.Configuration controls for System Administrators.Administration tools for System Administrators.LBL="" HELPID=""FLEXlm Terms and DefinitionsThe following terms are used as defined to describe FLEXlm concepts and software components.featureAny functionality that needs to be licensed. The meaning of a feature will depend entirely on the way that an application developer uses it. For example, a feature could be any of the following:An application software system consisting of hundreds of programs.A single program (regardless of version).A specific version of a program.A part of a program.A piece of data (restricted via the routines that access it).licenseThe right to use a feature. FLEXlm can restrict licenses for features by counting the number of licenses already in use for a feature when new requests are made by the application software (client). FLEXlm can also restrict usage of software to particular nodes or user names.clientAn application program requesting or receiving a license.daemonA process that "serves" clients. Sometimes referred to as a server.vendor daemon The daemon that dispenses licenses for the requested features. This daemon is built by an application's vendor (from libraries supplied by Globetrotter Software) and contains the vendor's unique encryption seeds.ID="chap011"ID="chap012"lmgrdID="chap013"The daemon process, or license daemon, that sends client processes to the correct vendor daemon on the correct machine. The same license daemon process can be used by all applications from all vendors, as this daemon neither performs encryption nor dispenses licenses. ID="chap014"lmgrd is analogous to inetd in 4.2bsd systems: i.e., it processes no user requests on its own, but forwards these requests to other daemons (the vendor daemons).server node A computer system that is running both the license and vendor daemon software. The server node will contain all the site-specific information regarding the usage of all the features. Multiple server nodes used for redundancy can logically be considered theID="chap015"ID="chap016" server node.license fileAn site-specific file that contains descriptions of the server nodes that can run the license daemons, the various vendor daemons, and the licenses (features) for all supported products.ID="chap017"LBL="" HELPID=""Software ComponentsThe four main components in FLEXlm are:The client library (embedded in the license-managed application)lmgrd, the license daemonThe vendor daemon(s)Vendor and end-user license administration toolsA single license file supports all components.LBL="" HELPID=""Typical ConfigurationsThe components of a typical configuration of FLEXID="chap018"lm will consist of:The license filelmgrdA single vendor daemon An application programLBL="" HELPID=""Location of the License FileThe license file default is ID="chap019"ID="chap0110"/usr/local/flexlm/licenses/license.dat (or C:\FLEXLM\LICENSE.DAT for Windows and Windows NT systems, SYS$COMMON:[SYSMGR]flexlm.dat for VMS systems). This default can be overridden by the developer via calling lc_set_attr(), or by the end-user setting the environment variable LM_LICENSE_FILE (logical name LM_LICENSE_FILE on VMS) to the pathname of the file. If at all possible, Globetrotter Software recommends keeping the license file in the standard location and allowing the end-user to move it by setting the LM_LICENSE_FILE environment variable.ID="chap0111"ID="chap0112"LBL="" HELPID=""Overview of Installation ProcessThe end-user installs lmgrd and the vendor daemon. If no redundancy is required, then these daemons run on one server node. If the network has only a single file server which contains all user files, then there is no advantage in having redundant daemons. If redundancy is desired, then the daemon would be installed on three server nodes. FLEXID="chap0113"ID="chap0114"lm supports three server nodes operating as a single "logical" server node on UNIX and Windows/NT systems.Once the license file and the daemons are in place, all that is required is to start the daemon when the machine boots. The daemon can be most conveniently started inID="chap0115"ID="chap0116"/etc/rc.bootID="chap0117", /etc/rc.local, /etc/rc, /sbin/rc3.d or /etc/rc3.d, depending on the operating system.For Windows NT systems, lmgrd can be installed as a system service and started automatically when the system boots.NoteFLEXlm does not require the use of privileged sockets, therefore any user can start the FLEXlm daemons.If the license file is in the standard location (or the end-user has LM_LICENSE_FILE set properly) FLEXlm use is transparent to the end-user once the administrator has started the FLEXlm daemons.LBL="" HELPID=""See AlsoIDREF="24709" TYPE="TITLE"Chapter 10, "The License File"IDREF="19683" TYPE="TITLE"Chapter 12, "End-User License Administration"LBL="" HELPID=""Configuration Trade-offsConfigurable parameters in FLEXlm include:Number of server nodes, or server-less (uncounted) licenses.License file location.Type and frequency of checking for daemon failures in the client software.Reconnection parameters (in the event of daemon failure).The following sections describe daemon and client configuration trade-offs.LBL="" HELPID=""Selecting Server NodesIf all the end-user data is on a single file server, then there is no need for redundant servers, and Globetrotter Software recommends the use of a single server node for the FLEXID="chap0118"ID="chap0119"ID="chap0120"lm daemons. If the end-user's data is split among two or more server nodes and work is still possible when one of these nodes goes down or off the network, then multiple server nodes can be employed. In all cases, an effort should be made to select stable systems as server nodes; in other words, do not pick systems that are frequently rebooted or shut down for one reason or another.LBL="" HELPID=""ID="26148"Client ConsiderationsThe major trade-off in the client configuration options is the decision to terminate the application or let it continue running when it loses its connection to the daemon, which can indicate attempted theft. This policy decision must be made by each application vendor; FLEXlm can adapt to the required strategy.The parameters available to implement the required policy are:Number of retries before connection is determined to be down.Retry interval.ID="chap0121"Action when retry fails.Automatic (via SIGALRM on UNIX and via SetTimer on Windows/NT) or vendor supplied reconnection to a restarted daemon.To implement a lenient policy, the number of retries can be set high, and the result of retry failure can be the display of a warning message with further retries at fixed intervals.If a stricter policy is required, then the number of retries can be set low, with a relatively short retry interval, and termination of the application can be enforced. Other alternatives could include: limiting the functionality (disable printing for example) or slowing the performance of the product.In both cases, the time while FLEXlm is retrying to connect to a daemon could be used to save files and checkpoint the application. If checkpointing were done and no new daemon connection were possible at the end of the interval, the application would be ready to exit.Other client trade-offs concern the location of the license file and the appropriate selection of licensable features. In general, Globetrotter Software recommends that you leave the license file location at ID="chap0122"/usr/local/flexlm/licenses/license.dat (or C:\FLEXLM\LICENSE.DAT for Windows and Windows NT systems, and SYS$MANGER:FLEXLM.DAT for VMS systems), and let the end-user override this path, if necessary, as described in Chapter 12, "End-User License Administration." NoteGlobetrotter Software recommends that you do not override the use of the LM_LICENSE_FILE environment variable within your code.LBL="" HELPID=""Developer's InterfaceThe application program interfaces to FLEXlm via a set of routines that checkout and checkin copies of the licensed feature(s). Two primary routines perform checkout and checkin respectively. Additional routines are provided to set defaults, provide a list of users of the feature and provide other miscellaneous functions.ID="chap0123"ID="chap0124"ID="chap0125"LBL="" HELPID=""Client Library RoutinesThe application program is a client of FLEXlm. The routines to manage licenses are all contained in the FLEXlm client library liblmgr.a (lmgr.dll for Windows or lmgr32.dll for Windows NT and Win32s).lc_auth_dataGets the license file line for a checked-out feature.lc_baddateID="chap0126"Verify the date has not been set back on the running system.lc_checkinID="chap0127"Restores a license of a feature to the license pool.lc_checkoutID="chap0128"Requests a license of a feature.lc_ck_featsID="chap0129"Checks FEATURESET line.lc_disconnID="chap0130"Disconnect from a license daemon.lc_displayID="chap0131"Returns the display the process is running on.lc_errstringID="chap0132"Returns an explanatory error string for the most recent error.lc_feat_listID="chap0133"List all features in the license file.lc_feat_setID="chap0134"Computes FEATURESET code.lc_first_jobID="chap0135"Walks list of FLEXlm jobs.lc_free_jobID="chap0136"Frees a job allocated with lc_init.lc_flush_configID="chap0137"Rereads the cached license file.lc_get_attrID="chap0138"Retrieves a FLEXlm client attribute.lc_get_dlistID="chap0139"Gets a list of all vendor daemons.lc_get_configID="chap0140"Gets the first occurrence of the FEATURE line in the cached license file.lc_get_featsID="chap0141"Returns a FEATURESET line.lc_gethostidID="chap0142"Gets the hostid of the local machine.lc_hostnameID="chap0143"Returns the current hostname.lc_hosttypeID="chap0144"Provides information about the current host.lc_idleID="chap0145"Supports Administrator defined TIMEOUT option via options.dat files.lc_initID="chap0146"Initializes FLEXlm, and creates a license job.lc_isadminID="chap0147"Returns true if user is in the lmadmin group.lc_lic_whereID="chap0148"Returns the location of the license file.lc_logID="chap0149"Logs a message to the daemon log file.lc_master_listID="chap0150"Returns the list of servers in the license file.lc_next_confID="chap0151"Gets the license file line for a feature.lc_next_jobID="chap0152"Walks list of FLEXlm jobs.lc_perrorID="chap0153"Prints an error message to stderr.lc_removeID="chap0154"Remove a user of a specified feature.lc_set_attrID="chap0155"Sets a FLEXlm client attribute.lc_shutdownID="chap0156"Shuts down FLEXlm servers.lc_statusReturns the current status of a feature.lc_timerSends heartbeat from client to server.lc_vsendID="chap0157"Sends and receives messages from server.lc_userlistID="chap0158"Gets a list of the users of a feature.lc_usernameID="chap0159"Returns current user's login name.The include file lm_client.h contains all the symbolic definitions required for most calls. lm_code.h contains the vendor's encryption seeds and FLEXlm vendor key values. lm_attr.h contains the definitions used in the lc_set_attr() and lc_get_attr() calls.LBL="" HELPID=""Software License Working Group Compatibility CallsFLEXlm supports the Software License Working Group API. See IDREF="15633" TYPE="TITLE""Software License Working Group" for more information. ls_init ID="chap0160"Initialize licensing system (same as lc_init).ls_terminate ID="chap0161"Terminate licensing system operations.ls_log_message ID="chap0162"Log a message.lb_request ID="chap0163"Request license.lb_check_wait ID="chap0164"Check status of a queued license.lb_wait_remove ID="chap0165"Remove process from license wait queue.lb_confirm ID="chap0166"Inform license system license is still in use.lb_releaseID="chap0167"Release license.lb_get_cur_usersID="chap0168"List all current users of a license.um_put_recordNot implemented.um_get_recordNot implemented.um_delete_recordsNot implemented.um_purge_recordsNot implemented.um_undelete_recordsNot implemented.LBL="" HELPID=""LSAPI CallsID="chap0169"FLEXlm supports License Service Application Programming Interface (LSAPI). See IDREF="19744" TYPE="TITLE""LSAPI v1.1".LSEnumProvidersID="chap0170"List providers of licensing serviceLSGetMessageID="chap0171"Get message text from licensing systemLSQueryID="chap0172"Query License informationLSReleaseID="chap0173"Release licenseLSRequestID="chap0174"Request licenseLSUpdateID="chap0175"Update license status for details.LBL="" HELPID=""ID="12133"Example ApplicationThe following is an example of an application with calls to FLEXlm. The essential macros and functions are: LM_CODE(), lc_init(), lc_checkout(), lc_checkin().#include "lm_client.h"
#include "lm_code.h"
/*
 * ENCRYPTION_CODE_n are made up by vendor
 * VENDOR_KEYn are provided by Globetrotter Software
 */
LM_CODE(code, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2,
   VENDOR_KEY1, VENDOR_KEY2, VENDOR_KEY3, 
   VENDOR_KEY4, VENDOR_KEY5);
LM_HANDLE *lm_job = (LM_HANDLE *)0; /* first arg to all lc_xxx calls */
 /*...*/
 rc = lc_init(lm_job, VENDOR_NAME, &code, &lm_job);
 if (rc)
 {
  lc_perror(lm_job, "FLEXlm initialization failed");
  exit(rc);
 }
/*
 * Check out feature
 */
 rc = lc_checkout (lm_job, "myfeature", "1.0", 1, LM_CO_NOWAIT, 
     &code, LM_DUP_NONE);
 if (rc)
 {
  lc_perror(lm_job, "Checkout failed");
  exit(rc);
 }
/*
 * Checkout succeeded. Actual application code here
 */
 /*...*/
/* 
 * Done with "feature", check it back in.
 */
 lc_checkin(lm_job, feature, 0);
 /*...*/
ID="chap0176"ID="chap0177"ID="chap0178"ID="chap0179"ID="chap0180"LBL="" HELPID=""FLEXlm KitsID="chap0181"All FLEXlm kits are the same; a set of software "keys" distributed by Globetrotter Software determines if the kit is either a full-function or a demo kit. All demo kits have expiration dates and they also have a number of features disabled.Specifically, FLEXlm demo kits have the following features disabled: Redundant server host supportID="chap0182"Client-Daemon clock checkingLogfile switch supportlc_hosttype()ID="chap0183" functionlc_auth_data()ID="chap0184" functionVendor-specified daemon initialization routine supportINCLUDE/EXCLUDE/RESERVE and TIMEOUT support for end-user configurationID="chap0185"ID="chap0186"ID="chap0187"ID="chap0188"lmreread supportID="chap0189"Feature start date supportDuplicate grouping supportFEATURESET supportID="chap0190"LBL="2"ID="90017"Installing the Distribution KitAll FLEXlm distribution kits consist of the following:A distribution tape, cd, or floppy.A Programmers manual.The type of distribution tape depends on the configuration, but all tapes are in UNIX tar or VMS BACKUP format.LBL="" HELPID=""Binary Installation for UNIX SystemsA FLEXlm binary distribution kit consists of a single directory which contains all the libraries, include files, and programs. To install FLEXlm, you will create a directory for the kit, read the distribution media, then run the FLEXlm installation program.Create the directory% mkdir <directory to hold the kit>
% cd <directory to hold the kit>Read the distribution mediaCD - SunOS4:% mount -t hsfs -r /dev/sr0 /cdrom
% cd /cdrom
% install.cdCD - Solaris:NoteIf volume management is running the following mount step is not necessary. Volume management is turned on by default on Solaris 2.2 and later.% mount -f hsfs /dev/dsk/c0t6d0s0 /cdrom
%cd /cdrom
% INSTALL.CDCD HP:% mount /dev/dsk/cdrom /cdrom -t cdfs
% cd /cdrom
% ./INSTALL.CD\;1For all CD distributions, put the resulting kit(s) into the directory you created earlier.SUN 1/4" tape: % tar xfb /dev/rst0 126 lmgr3 1/2" floppy:% tar xf /dev/rfd0
% uncompress lmgr.ZRun the FLEXlm installation program% cd lmgr/machind
% INSTALLExample (SUN 1/4" tape):% mkdir /usr/license
% cd /usr/license
% tar xfb /dev/rst0 126 lmgr
% cd lmgr/machind
% INSTALLExample (SUN floppy):% mkdir /usr/license
% cd /usr/license
% tar xf /dev/rfd0
% uncompress lmgr.Z
% cd lmgr/machind
% INSTALLIDREF="41257" TYPE="TITLE"Appendix A, "Distribution Kit Contents," lists the contents of the binary distribution kit.There are two installation scripts on the distribution kit: INSTALL and CONFIG_DAEMONID="chap021". INSTALL is used when first installing the kit. CONFIG_DAEMON is used to configure and build your vendor daemon, either when running the initial installation or any time later.INSTALL will ranlib the libraries and ask if you want to continue and build your daemon. If you reply "y", the CONFIG_DAEMON script will be run. CONFIG_DAEMON will prompt you for the parameters associated with your vendor daemon (encryption seeds, vendor keys, and other parameters). CONFIG_DAEMONID="chap022" then edits all the appropriate files (makefile, lm_code.h, and ls_vendor.c). In addition, CONFIG_DAEMON will create the file "daemon.dat", which contains a log of the options selected, for your review.ID="chap023"You can manually edit ls_vendor.c, lm_code.h and the makefile, in place of running CONFIG_DAEMON. (This is required on VMS and Windows NT systems, where CONFIG_DAEMON is not supported).LBL="" HELPID=""Binary Installation for VMS SystemsA FLEXlm distribution kit consists of a single directory which contains all the libraries, include files, and programs. To install FLEXlm, you will create a directory for the kit, read the distribution media, then run the FLEXlm installation program.Globetrotter Software ships FLEXlm VMS kits on CD and on tape in UNIX tar format. LBL="" HELPID=""Installation from UNIX mediaFLEXlmVMS kits are generally shipped on UNIX media.These kits are VMS backup save sets which have been processed by a program (MFTU) which turns the backup save sets into compressed ascii files. In order to install a VMS kit, perform the following steps:Load the file onto your UNIX system, from either tape or CD. Instructions for tape:In the following instructions, substitute your tape device name for tape and the FLEXlm platform name for platform.) Typical VMS platform kit files would be "vax_v5" or "alpha_v1".% cd lmgr
% tar xf /dev/tapeInstructions for CD:(mount the CD into directory cddir)
% cd cddir
% install.cd(Select the version of FLEXlm you want, then select either the vax_v5 or alpha_v1 kit).For example, if you are extracting a vax kit from tape on a sun4 running SunOS 4.x:% cd lmgr
% tar xf /dev/rst0Copy the resultant ascii file, along with the file "mftu.com" to your VMS system, using your normal networking commands.On your VMS system, execute the following commands (substitute alpha_v1 for vax_v5 if you are extracting an alpha/openvms kit):$ create/dir [.mftu]
$ copy mftu.com [.mftu]
$ set def [.mftu]
$ @mftu
$ @mftumake
$! In the next command, disk:[dir.mftu] refers to your default
$ mftu :== $disk:[dir.mftu]mftu
$ set def [-]
$ rename vax_v5 vax_v5.mftu
$ mftu
MFTU> decode vax_v5.mftu
$ backup vax_v5.bck/save [...]LBL="" HELPID=""Installation from VMS mediaThe CD distribution for FLEXlm can also be loaded on a VMS system if your system is running VMS v6.x. Proceed as follows:$ mount/over=id/media=cdrom dka400:The FLEXlm kits are in the directory [vms.v4_0] and are named alpha_v1.mft, vax_v5.mft, and vax_v6.mft. The directory [vms.mftu] contains the mftu program mftu.com which is used to decode the distribution kits. To extract the kit into the directory [xxx], perform the following steps (substitute the device name of your cdrom for dka400):$ set def [xxx]
$ copy dka400:[vms.v_4]vax_v6.mft []
$ copy dka400:[vms.mftu]mftu.com []
$ set file mftu.com/attributes=(rfm:stmlf,rat:cr)
$ set file vax_v6.mft/attributes=(rfm:stmlf,rat:cr)
$ @mftu
$ @mftumake
$ mftu :== $disk:[xxx]mftu
$ mftu
MFTU> decode vax_v6.mftThis will leave you with a backup save set, which you can restore to the directory of your choice. Note that the two "set file" commands must be run on a VMS v6.x system.LBL="" HELPID=""Binary Installation for Windows SystemsID="chap024"On Windows systems, this version of FLEXlm supports only the client library. Both 16 bit and 32 bit Windows applications are supported. FLEXlm supports the 32 bit Windows applications through its NT offering, which contains the 32 bit client library as a WIN32s DLL. To install FLEXID="chap025"lm 16 bit client library for Windows on to your C: drive from A:, for example, follow the following steps: (Note: if the destination directory is not C:\lmgr, you will need to change some FLEXlm sample makefiles manually to reflect this difference).From Program Manager File Menu, run setup.exe program on FLEXlm Windows disk.  Include C:\lmgr\h in your compiler include search path.Include C:\lmgr\lib in your link library search path.Include C:\lmgr\bin in your Windows DLL search Path. You may alternatively, copy all C:\lmgr\bin\*.dll files to a directory that is already in your DLL search path.Install FLEXlm vendor keys and private encryption seeds: Edit C:\LMGR\H\LM_CODE.H to reflect your chosen vendor daemon name, Globetrotter provided vendor keys, and your private encryption seeds. If your compiler is Microsoft Visual C/C++, you may then compile the sample programs with the following commands:ID="chap026"C:> cd \lmgr\wintest
C:> nmake /f wintest.mak
C:> cd \lmgr\test
C:> nmake /f lmclient.makA pre-compiled wintest.exe is also included in \lmgr\bin directory for your reference.LBL="" HELPID=""Binary Installation for Windows NT SystemsID="chap027"Both client and server are supported on Windows NT. The Microsoft C/C++ compiler is required to build your customized vendor daemon. Your client application can be written in any language that can interact with the FLEXlm client DLL lmgr32.dll, which is a standard Windows NT 32 bit mode DLL. To install FLEXlm for Windows NT systems, follow the procedure below:From Program Manager File Menu, run ID="chap028"setup.exe program on FLEXlm Windows NT disk. Your default directory for FLEXlm is D:\lmgr32, which is assumed by all of FLEXlm makefiles. You may install FLEXlm to any other directory; however, you will need to change the dependency in the makefiles (*.mak files) via Microsoft Visual Workbench or manually.Install FLEXlm vendor keys and private encryption seeds:Edit C:\LMGR\H\LM_CODE.H to reflect your chosen vendor daemon name, Globetrotter provided vendor keys, and your private encryption seeds. NoteThe rest of the build procedure may be repeated each time you modify FLEXlm source code or your vendor keys. BUILD.BAT is provided to automate the following procedure.Include D:\lmgr32\bin in your Windows NT DLL search Path. You may alternatively, copy all D:\lmgr32\bin\*.dll files to a directory that is already in your DLL search path.Set up Microsoft C/C++ compiler environment.For example, assuming Microsoft C/C++ compiler is installed in C:\MSVCNT, type the following commands:D:\> SET INCLUDE=%INCLUDE%;D:\LMGR32\H
D:\> SET LIB=%LIB%;D:\LMGR32\LIB
D:\> CALL C:\MSVCNT\BIN\VCVARS32.BATBuild the client library demo programs:For example:D:\> CD \LMGR32\TEST
D:\LMGR32\TEST> NMAKE /F LMCLIENT.MAK
D:\LMGR32\TEST> CD \LMGR32\WINTEST
D:\LMGR32\WINTEST> NMAKE /F WINTEST.MAKBuild the FLEXlm utility programs:For example:D:\> CD \LMGR32\UTILS
D:\LMGR32\UTILS> NMAKE /F LMRANDOM.MAK
D:\LMGR32\UTILS> NMAKE /F LMFEATSE.MAK
D:\LMGR32\UTILS> NMAKE /F ISVALIDD.MAK
D:\LMGR32\UTILS> NMAKE /F CREATE_L.MAK
D:\LMGR32\UTILS> NMAKE /F CREATE_P.MAK
D:\LMGR32\UTILS> NMAKE /F LMCRYPTE.MAKYou may now use create_l.exe and create_p.exe to create license files.Build your vendor daemon. (If you plan to run the license server (lmgrd) on Windows NT systems.):Edit D:\LMGR32\VENDOR\LS_VENDO.C to customize your vendor daemon's behavior. You may also change the makefile VENDOR.MAK so that it generates the vendor daemon with your choice of file name instead of the default VENDOR.EXE. The details of vendor daemon customization are described in IDREF="84465" TYPE="TITLE""Configuring Your Vendor Daemon". To build your FLEXlm vendor daemon, do the following:D:\> CD \LMGR32\VENDOR
D:\LMGR32\VENDOR> ..\UTILS\LMRANDOM < LS_VENDO.C > LSR_VEND.C
D:\LMGR32\VENDOR> NMAKE /F VENDOR.MAKNoteA set of pre-compiled utility programs and vendor daemon using the demo keys are included in the D:\LMGR32\BIN directory for your reference.You are now ready to test out your vendor daemon with lmgrd.exe. You must name your vendor daemon consistently with your license file so that lmgrd.exe may start your vendor daemon successfully. For details on how to start lmgrd and vendor daemon, please see IDREF="24709" TYPE="TITLE"Chapter 10, "The License File" and IDREF="19683" TYPE="TITLE"Chapter 12, "End-User License Administration."LBL="" HELPID=""Source InstallationID="chap029"A FLEXlm source distribution kit consists of a single directory which contains subdirectories for the client library, include files, and both license and vendor daemons. The BINARY_KIT script will produce a binary kit identical to the binary distribution in the subdirectory ID="chap0210"ID="chap0211"arch_os. arch is the machine architecture and os is the operating system version, as specified in the BINARY_KIT command. For example, arch could be one of sun4, hp700, vax, apollo, etc., and os could be u4 (for SunOS4). To install the source kit, you will create a directory to hold it, read the distribution media, then perform the build, which will result in a binary kit for the target platform.Create the directory% mkdir <directory to hold the kit>
% cd <directory to hold the kit>Read the distribution mediaFor SUN 1/4" tape: % tar xfb /dev/rst0 126 lmgrFor 3 1/2" floppy:% tar xf /dev/rfd0
% uncompress lmgr.ZCreate the binary kit% lmgr/BINARY_KIT lmgr arch_osExample (SUN 1/4" tape):% mkdir /usr/license
% cd /usr/license
% tar xfb /dev/rst0 126 lmgr
% lmgr/BINARY_KIT lmgr sun4_u4It is important to use the correct arch_os value when running BINARY_KIT, since the BINARY_KIT script may change make parameters depending on the machine architecture. The gplatargs script in the utils directory is used to determine architecture specific flags. gplatform in the utils directory is also used to determine arch_os. Both gplatform and gplatargs may require modification for new platforms.IDREF="41257" TYPE="TITLE"Appendix A, "Distribution Kit Contents," lists the contents of the source distribution kit.LBL="" HELPID=""Example INSTALL SessionID="chap0212"This example illustrates the use of INSTALL to complete binary kit installation for a sun4, sunOS4 kit. Data you enter is typed in bold.% cd lmgr/machind
%  INSTALL
Flexible License Manager binary kit installation
Copyright (C) 1988 - 1994 Globetrotter Software, Inc.All rights reserved.
Your FLEXlm kits are in:../sun4_u4
Which kit would you like to install? ID="chap0213"../sun4_u4
Installing FLEXlm kit ../sun4_u4
ranlib-ing libraries
Do you want to continue and configure your daemon now [y/n]? nLBL="" HELPID=""ID="14567"Example CONFIG_DAEMON SessionID="chap0214"The following example shows the configuration of a vendor daemon (demo) that uses the default values for all parameters. The meanings of the parameters are described in IDREF="84465" TYPE="TITLE""Configuring Your Vendor Daemon". NoteYou can manually edit ls_vendor.c in the /lmgr/machind directory, lm_code.h, and the makefile, if you do not want to run CONFIG_DAEMON. (This must be done manually on VMS and Windows NT, where CONFIG_DAEMON is not supported).In FLEXlm v2.4 and later, the CONFIG_DAEMON script only prompts for the daemon name, one set of encryption seeds, and the vendor keys. This is done to simplify installation when all the defaults are desired. If you wish to specify all the daemon options, use the "-x" option to CONFIG_DAEMON, which will cause it to prompt for all options as in prior FLEXlm versions. This example does not use the option to illustrate all selections. All data that you type is in bold.% cd lmgr/machind
% CONFIG_DAEMON

Flexible License Manager vendor daemon configuration.
Copyright (C) 1988, 1994 Globetrotter Software, Inc.

This script will configure and build your vendor daemon, and
leave the resulting configuration information in the file
daemon.dat.  To get the default value for any selection, simply
enter <CR>.

Your daemon must have a DAEMON name.  This name will appear in
the license file that you generate for your customers as the
name in the DAEMON line.  The name will also appear in the
executable for the daemon, in order for the Flexible License
Manager to do consistency checking.

The daemon name for an evaluation kit MUST BE "demo".

Please enter your daemon's DAEMON name: demo
Updating ../alpha_u1/makefile for daemon name "demo"

Your daemon (demo) will support some number of product features.
Your daemon will support only the features listed in the
license file that encrypt correctly with the codes you build
into your daemon.  Please enter your encryption code at the
following pair of prompts. 

DO NOT ENTER THE LEADING 0x in the encryption codes.

To get the default answer to any question, type a <CR>.

Encryption code first 32-bits (data[0]) [hexadecimal, <CR> to quit]: 12345678 
Encryption code second 32-bits (data[1]) [hexadecimal]: 87654321

If you want to leave the FLEXlm vendor keys unchanged in
lm_code.h, simply enter <CR> to the next prompt.

DO NOT ENTER THE LEADING 0x in the vendor keys.

FLEXlm vendor key #1 for demo [hexadecimal]: 12345678
FLEXlm vendor key #2 for demo [hexadecimal]: 87654321
FLEXlm vendor key #3 for demo [hexadecimal]: 12344321
FLEXlm vendor key #4 for demo [hexadecimal]: 43211234
FLEXlm vendor key #5 for demo [hexadecimal]: aabb33ee


The configuration information for your daemon is in daemon.dat
The data file used to build the daemon is ls_vendor.c

Do you want to continue and build the daemon now? [y/n, default: n]: y

You are running on an alpha-osf1 system

FLEXlm binary directories are:
../alpha_u1

Which daemon would you like to build? [default: ../alpha_u1, e to exit]: 

Building kit in directory ../alpha_u1
cc -c -g -I../machind  ../machind/create_lic.c
cc -o create_license create_lic.o liblmgr.a 
rm create_lic.o
cc -c -g -I../machind  ../machind/create_pkg.c
cc -o create_pkg create_pkg.o liblmgr.a 
rm create_pkg.o
cc -c -g -I../machind  ../machind/lmclient.c
cc -o lmclient lmclient.o liblmgr.a 
rm lmclient.o
cc -c -g -I../machind  ../machind/lmcrypter.c
cc -o lmcrypter lmcrypter.o liblmgr.a 
rm lmcrypter.o
cc -c -g -I../machind  ../machind/lmfeatset.c
cc -o lmfeatset lmfeatset.o liblmgr.a 
rm lmfeatset.o
cc -c -g -I../machind  ../machind/lmrandom.c
cc -o lmrandom lmrandom.o
rm lmrandom.o
rm -f lsr_vendor.c
lmrandom < ../machind/ls_vendor.c > lsr_vendor.c
cc -c -g -I../machind  lsr_vendor.c 
rm -f ls_vendor.o
mv lsr_vendor.o ls_vendor.o
cc  -o demo ls_vendor.o  liblmgr_as.a liblmgr_s.a liblmgr.a 
strip demo
strip create_license create_pkg lmclient isvaliddate lmcrypter lmfeatset lmrandom  
strip: Info: isvaliddate already stripped
ln -f lmutil lmhostid
ln -f lmutil lmver
ln -f lmutil lmcksum 
ln -f lmutil lmdown
ln -f lmutil lmhostid
ln -f lmutil lmremove 
ln -f lmutil lmremove 
ln -f lmutil lmreread 
ln -f lmutil lmswitchr 
ln -f lmutil lmstat 
ln -f lmutil lmdiag
ln -f lmutil lmver 
Done building kit ../alpha_u1LBL="" HELPID=""ID="79902"Installing Your FLEXlm Vendor KeysAll FLEXlm kits require a set of FLEXlm Vendor Keys in order to operate. Globetrotter Software will supply you with the FLEXlm Vendor Keys for the vendor name you select, or "demo" if it is a demo kit. The FLEXlm Vendor Keys consist of five hex numbers which are coded to the vendor name. CONFIG_DAEMON installs these keys in your vendor daemon via the include file lm_code.h. The FLEXlm Vendor Keys are the fourth through eighth parameters to the LM_CODE macro, as in this example:LM_CODE(vcode, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2,
VENDOR_KEY1, VENDOR_KEY2, VENDOR_KEY3, 
VENDOR_KEY4, VENDOR_KEY5)
ID="chap0215"(The ENCRYPTION_CODE_x and VENDOR_KEYx values are defined in ID="chap0216"ID="chap0217"lm_code.h as a result of running CONFIG_DAEMON). The LM_CODEID="chap0218" macro creates a static variable with the name of its first parameter. If you want a global variable, use the LM_CODE_GLOBAL macro, which takes the same parameters as LM_CODE.Once you have coded this LM_CODE macro, call lc_init as follows:lc_init((LM_HANDLE *)0, VENDOR_NAME, &vcode, &lm_job);where: is the:(char *) VENDOR_NAMEVendor name you have picked, from lm_code.h.(VENDORCODE *) vcodeFirst parameter to LM_CODE, above.(LM_HANDLE **) jobReturned job ID.The first argument to lc_init() is the current job, and is used in cases where multiple jobs are used.This call to lc_init() must be included in any program that uses the FLEXlm libraries, and it must be the first FLEXlm function you call (unless you are using the Software License Working Group or LSAPI calls).LBL="" HELPID=""Building Your ApplicationIf you use any of the FLEXlm symbolic definitions, macros, or data structures, you must include lm_client.h ID="chap0219"and lm_code.h in your C module. lc_set_attr()ID="chap0220" calls require you to include lm_attr.h. Your encryption seeds, FLEXlm vendor keys and vendor name are in lm_code.h.In order to build your application:Insert the calls that you require into your code.Link your code with the FLEXlm library ID="chap0221"liblmgr.a (or lmgr.lib on Windows systems, or lmgr32.lib on Win32s or Windows NT systems). If you have loaded the distribution kit into /usr/license/ as described in IDREF="90017" TYPE="TITLE"Chapter 2 then use a command of the following form: % cc -o program program.o $(OBJS) -L/usr/license/lmgr/arch_os -llmgrwhere $(OBJS) is the list of the objects for your program. You can put -llmgr anywhere after your objects, and before -lsocket and -lintl, if needed on your system. See how lmclient is linked in the makefile in the binary kit for your platform for a correct example.LBL="3"FLEXlm Function CallsLBL="" HELPID=""ID="60631"lc_auth_dataID="chap031"LBL="" HELPID=""Syntaxconfig = lc_auth_data(job, feature)LBL="" HELPID=""DescriptionGets the license file line for a feature that has been checked out.LBL="" HELPID=""Parameters(LM_HANDLE *) jobfrom lc_init, or lm_job(char *) feature The desired feature.LBL="" HELPID=""Return(CONFIG *) ID="chap032"configThe config structure, or NULL if error. The config structure is defined in the header file lm_client.h in the /lmgr/machind directory or \LMGR(32)\H directory on Windows/NT systems.LBL="" HELPID=""Error ReturnsLM_FUNCNOTAVAILID="chap033"Vendor keys do not support this function.LM_NOFEATUREID="chap034"Feature not found.NoteIf you call lc_checkout() with the LM_CO_LOCALTEST flag, then use the alternate function ID="chap035"lc_test_conf() to retrieve the license file line for the tested feature. This can only be done after the most recent call to lc_checkout(). lc_test_conf() takes a job handle parameter and returns a (struct CONFIG *).LBL="" HELPID=""See alsoIDREF="63009" TYPE="TITLE""lc_get_config"lm_client.h in the /lmgr/machind directory for the CONFIG struct definition.LBL="" HELPID=""lc_baddateID="chap036"LBL="" HELPID=""Syntaxstatus = lc_baddate(job)LBL="" HELPID=""DescriptionChecks the / and the /etc directories for any files which have dates in the future. On Windows and Windows NT systems, "\" and the Windows home directory are scanned. If no files have dates in the future, returns 0, otherwise returns 1. lc_baddate() allows a "grace period" of 24 hours, i.e. it will not report on files which are only 24 hours in the future.lc_baddate() can be used in your client code, or in a daemon initialization routine to deny access on systems with dates that are set back. NoteThis function is available on UNIX and Windows/NT systems only.LBL="" HELPID=""Parameters(LM_HANDLE *) job From lc_init()LBL="" HELPID=""Return(int) status - 0OK, all files have dates in the past.<> 0Error - some files have dates in the future.LBL="" HELPID=""See alsoIDREF="87030" TYPE="TITLE""LM_A_MAX_TIMEDIFF"LBL="" HELPID=""ID="23439"lc_checkinID="chap037"LBL="" HELPID=""Syntaxstatus = lc_checkin(job, feature,keep_conn)LBL="" HELPID=""DescriptionChecks in the licenses of the specified feature. For TCP clients, the daemon will detect the fact that the client exited, and return any licenses that were checked out back to the available pool. For TCP, this call is used if the application has need of a feature for a period of time, then no longer needs it. For UDP, this call is essential to free a license, otherwise, the server has to timeout the license. The second parameter is used for TCP clients to tell FLEXlm to keep the connection open to the server for cases where another feature will be needed shortly after this one is released. If the communications protocol is TCP, there is no appreciable time delay incurred in returning the license if the program exits rather than returning the license via ID="chap038"lc_checkin. However if UDP is used, the licenses will not be returned to the pool for ID="chap039"LM_A_UDP_TIMEOUTID="chap0310" seconds.LBL="" HELPID=""Parametersstatus = lc_checkin(job, feature,keep_conn)(LM_HANDLE *) jobFrom lc_init()(char *) featureThe feature name to be checked in.(int) keep_connIf non-zero, means "Keep connection to server"; if 0, drops TCP connection. Unused for UDP.LBL="" HELPID=""Return(int) status - 0OK, license checked in.<> 0Error.LBL="" HELPID=""Error ReturnsLM_CHECKINBADID="chap0311"The checkin function failed due to an error at the license server or in communications with the server.LBL="" HELPID=""See alsoIDREF="85076" TYPE="TITLE""LM_A_UDP_TIMEOUT"IDREF="85668" TYPE="TITLE""Communications Transport (TCP vs. UDP)"LBL="" HELPID=""ID="65026"lc_checkoutID="chap0312"LBL="" HELPID=""SyntaxLM_CODE(key, ...)
status = lc_checkout(job, feature, version, num_licenses, flag, key, dup_group)LBL="" HELPID=""DescriptionChecks out one (or more) license(s) of the specified feature and, for counted licenses, keeps the daemon up-to-date on the status of the process using the license(s). If the process that calls lc_checkout (via TCP) exits in any manner, then the checked out license will be returned for re-use by another user. For TCP clients, the resulting checkin is immediate, but for UDP clients, if the client dies or exits and is not able to call lc_checkin, the license server has to timeout the client, and this takes LM_A_UDP_TIMEOUT seconds. 
 Place the call to lc_checkout in a part of your code that is active whenever the user is using the feature. If flag is specified as ID="chap0313"LM_CO_WAIT, then the process will wait until the number of licenses requested for this feature are available. The license file must specify a version that is greater than or equal to the version in the lc_checkout call. If the license file is counted, that is, if the number of users specified on the FEATURE line is more than 0, lc_checkout will request the license from a license server. If the number of users on the FEATURE line is 0, it will grant permission based on the contents of the license file onlyname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'hostid, version, expiration date, etc.NoteMultiple checkout requests from the same process in the same license job will not result in additional licenses being checked out, unless a new request specifies more licenses than were previously checked out. That is, two calls to lc_checkout(...,1,...); will result in only 1 license being checked out, not 2. A second call to request 2 licenses would result in a total of 2 licenses.ID="chap0314"NoteFor improved security, it is recommended that the parameters feature, version, etc., be "hidden"- the string should not be directly declared in source code. It should be built up chars or smaller strings, and then created via sprintf()ID="chap0315". That way users cannot steal licenses by changing the string in the binary.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) featureThe ASCII feature name desired.(char *) versionThe version of the feature desired in floating point format, 3 decimal places max, e.g.: "12345.123". This value must be <= the version number in the license file for the checkout to succeed. Noteletters are not allowed in versions; "v1.0" is illegal.NoteBefore FLEXlm v4.0, the version argument for lc_checkout() is of type double.(int) num_licensesThe number of licenses to check out.(int) flag The checkout option flag.Possible values for flag are:LM_CO_NOWAITID="chap0316"Do not waitname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'non-blocking.LM_CO_WAITID="chap0317"Wait, return when license is grantedname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'blocking.LM_CO_QUEUEID="chap0318"Queue request, return immediately. This request will give you the license if it is available. You can find out if you hold the license by calling lc_status().LM_CO_LOCALTESTID="chap0319"Perform local tests, but do not check out a license (return status). The status from this call will detect all checkout errors that can be determined from the license file only. In particular, MAXUSERS is not detected.(VENDORCODE *) keyThe first argument to LM_CODE, which includes the vendor's encryption seed for this feature.(int) dup_groupDuplicate grouping mask for this featureRequests for licenses from "duplicates" can either be "grouped", or not "grouped". Grouping duplicates allows license requests from separate processes to use a single license if the process's USER, HOST, DISPLAY, and/or VENDOR_DEFINED field are the same. The ID="chap0320"ID="chap0321"ID="chap0322"ID="chap0323"dup_group parameter allows you to select what to compare to constitute a group from the set {USER HOST DISPLAY VENDOR}. Any of the four fields that are not set to compare will automatically "match"; thus not setting any of the four fields yields a site license, since all users on all hosts on all displays are the same as far as the comparison is concerned. The following illustrates the use of the duplicate grouping capability:ID="chap0324"dup_group value MeaningLM_DUP_NONEID="chap0325"Every process gets a new license. (Same as v1.x: count_duplicates = 1)LM_DUP_USERID="chap0326"All requests from this user name share the same license.LM_DUP_HOSTID="chap0327"All requests from this host name share the same licenses. This is a "floating node-locked" license.LM_DUP_DISPID="chap0328"All requests from this display share the same license. (Useful for display or GUI based products, like a window system.)LM_DUP_VENDORID="chap0329"All requests with the same vendor-defined data, such as a process ID (PID) use the same license. (Useful for sharing licenses among otherwise unrelated processes.)LM_DUP_USER | LM_DUP_HOSTID="chap0330"ID="chap0331"All requests from this user name on this host name use the same license. LM_DUP_HOST | LM_DUP_DISPID="chap0332"ID="chap0333"All requests from this display on this host name use the same license. LM_DUP_USER| LM_DUP_DISPAll requests from this user name on this display use the same license. (One user, displaying on a single node, using several nodes to run the software.)LM_DUP_USER | LM_DUP_HOST | LM_DUP_DISPAll requests from this user name on this host name using this display use the same license.LM_DUP_USER | LM_DUP_VENDORAll requests from this user name with the same vendor data use the same license.LM_DUP_SITEAll requests from any user on any node on any display with any vendor data use the same license. (SITE LICENSE)ID="chap0334"The first client that checks out the feature specifies the duplicate grouping for the feature. (The duplicate grouping value is reset whenever all licenses are checked back in.) Any subsequent client that attempts to check out the feature with a different duplicate grouping mask will be rejected and an error reflecting this will appear in the lmgrd Debug log file.LBL="" HELPID=""Return(int) status0 - OK, license checked out.<> 0Error.LBL="" HELPID=""Error ReturnsLM_BADCODEID="chap0335"License key in license file does not match other data in file.LM_BADFILEID="chap0336"Counted feature not supported (returned by lc_node_lock() only).LM_BADHANDSHAKEID="chap0337"Encryption handshake with daemon failed.LM_BADVERSIONID="chap0338"Version argument is invalid floating point format.LM_BADPARAMID="chap0339""key" structure is incorrect type, or feature == NULL.LM_BUSYNEWSERVID="chap0340"License server busy starting another copy of itselfname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'retry.LM_CANTCONNECTID="chap0341"Cannot establish a connection with a license server.LM_FEATQUEUEID="chap0342"Feature is queued. lc_status will determine when it is available.LM_FUNCNOTAVAILID="chap0343"Vendor keys do not support this function.LM_LOCALFILTERID="chap0344"ID="chap0345"Checkout request filtered by the vendor-defined filter routine.LM_MAXUSERSID="chap0346"All licenses in use.LM_NO_SERVER_IN_FILEID="chap0347"No license server specified for counted license.LM_NOFEATUREID="chap0348"Can not find feature in the license file.LM_NOSERVSUPPID="chap0349"Server has different license file than client name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'client's license has feature, but server's does not.LM_OLDVERID="chap0350"License file does not support a version this new.LM_SERVBUSYID="chap0351"License server busyname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' the request should be retried. (This is a rare occurrence.)LBL="" HELPID=""See alsoIDREF="14252" TYPE="TITLE""LM_A_CHECKOUT_DATA"IDREF="55175" TYPE="TITLE""LM_CODE"IDREF="40191" TYPE="TITLE""LM_A_HOST_OVERRIDE"IDREF="35603" TYPE="TITLE""LM_A_DISPLAY_OVERRIDE"IDREF="37713" TYPE="TITLE""LM_A_USER_OVERRIDE"IDREF="23439" TYPE="TITLE""lc_checkin"IDREF="79592" TYPE="TITLE""FEATURE or INCREMENT Line"IDREF="69383" TYPE="TITLE""lc_status"IDREF="29101" TYPE="TITLE""Multiple Jobs"LBL="" HELPID=""lc_ck_featsID="chap0352"LBL="" HELPID=""Syntaxstat = lc_ck_feats(job, vendor)LBL="" HELPID=""DescriptionChecks the FEATURESET line for a given vendor. ID="chap0353"LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) vendorThe vendor to be checked.LBL="" HELPID=""Return(int) statStatus of the FEATURESET line: 1 if OK, 0 if bad.LBL="" HELPID=""Error ReturnsLM_NOFEATSETID="chap0354"No FEATURESET line found for this vendor.LM_CANTCOMPUTEFEATSETID="chap0355"Cannot compute FEATURESET code for this vendorLM_BADFEATSETID="chap0356"The code on the FEATURESET line is incorrect.LM_FUNCNOTAVAILID="chap0357"Vendorkeys do not support FEATURESET.LBL="" HELPID=""See alsoIDREF="61646" TYPE="TITLE""lc_feat_set"IDREF="13021" TYPE="TITLE""ls_use_featset"IDREF="26393" TYPE="TITLE""lmfeatset"IDREF="69035" TYPE="TITLE""FEATURESET Line"IDREF="29101" TYPE="TITLE""Multiple Jobs"LBL="" HELPID=""ID="32035"lc_cryptID="chap0358"LBL="" HELPID=""SyntaxCONFIG conf;
char *sdate;
LM_CODE(code, ...) 
enc_code = lc_crypt(job, &conf, sdate, &vc);
ID="chap0359"LBL="" HELPID=""DescriptionComputes the license key for a FLEXlm feature line. lc_crypt() is one of the FLEXlm standard encryption routines, along with lc_crypstr(). It takes its input parameters and creates the license key that appears in the license file. Vendors generally will not call lc_crypt() directly, unless they are writing a custom license generation program, in which case create_lic.cID="chap0360" should be used as a guide. The CONFIG * parameter should be a pointer to a struct that has been correctly filled in. To do so, first make sure it is set to zeroes with memset(&conf, 0, sizeof(conf)). Then fill in each item in the struct, using the definition as it appears in lm_client.h, and noting that many items are now optional, and do not need setting.The sdate parameter can be obtained by calling l_bin_date() with the date string, e.g.l_bin_date("1-jan-93");To obtain the start date from a license file license key (The 20-character code on the FEATURE line), use l_extract_date():char code[21];
l_extract_date(code);
ID="chap0361"The last, VENDORCODE * argument must be set up as in the following example:LM_CODE(code, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2, VENDOR_KEY1,
VENDOR_KEY2, VENDOR_KEY3, VENDOR_KEY4, VENDOR_KEY5);
VENDORCODE vc;
/*...*/
memcpy((char *)&vc, (char *)&code, sizeof(vc));
vc.data[0] ^= VENDOR_KEY5;
vc.data[1] ^= VENDOR_KEY5;
lc_crypt(job, &conf, l_bin_date(0), &vc);
ID="chap0362"NoteThis use of VENDOR_KEY5 is new to FLEXlm v4.0, and is a security precaution taken mostly for dynamic linking environments, which allow access to arguments of FLEXlm functions.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFLEXlm job, from lc_init()(CONFIG *) confFilled-in CONFIG structure pointer.(char *) sdateStart date, in coded format. See below.(VENDORCODE *) ID="chap0363"vcVendor's encryption seeds (from lm_code.h), where the data[0] and data[1] members have been XORd ("^") with VENDOR_KEY5.LBL="" HELPID=""Return(char *)enc_codeThe license key, which should match the license file.(char *)NULLError.LBL="" HELPID=""Error ReturnsLM_CANTMALLOCID="chap0364"malloc() call failed.LBL="" HELPID="" See AlsoIDREF="33883" TYPE="TITLE""lc_cryptstr"ID="chap0365"IDREF="84652" TYPE="TITLE""The create_license Utility"IDREF="95762" TYPE="TITLE""lmcrypter"IDREF="55175" TYPE="TITLE""LM_CODE"IDREF="73563" TYPE="TITLE""l_crypt renamed to lc_crypt and args changed"LBL="" HELPID=""ID="33883"lc_cryptstrID="chap0366"LBL="" HELPID=""Syntaxstatus = lc_cryptstr(job, str, return_str, code, flag, filename, errors)LBL="" HELPID=""DescriptionGenerates license file as a string with license keys filled in. This new function is used by the lmcrypter command, and for some vendors will be an easier interface than lc_crypt() for generating licenses. You pass a string, which is a whole, valid license file,  with one exception: each 20-character code must be replaced with a single `0' (zero). If flag has LM_CRYPT_ONLY set, then  the function returns the 20-character code for the first FEATURE, INCREMENT, PACKAGE, or UPGRADE line in the file. If !(flag & LM_CRYPT_ONLY), then the whole file is returned as a string, with valid 20-character codes. If flag has LM_CRYPT_FORCE set, then every line will have the 20-character code re-computed, even if the code is not set to `0' If LM_CRYPT_FORCE is set, and if a line already has a 20-character code, the start-date will be taken from the current code.Comment lines are retained in the return_str output.return_str and errors are malloc'd by lc_cryptstr(), and not reused by FLEXlm, so it is the responsibility of the programmer to free the space returned if needed.If you want to specify a start-date, then, in place of a `0' in the 20-character code, use the following syntax:start:dd-mmm-yyy.LBL="" HELPID=""Examplestart:1-jan-95LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init.(char *)str  Set str to a complete valid license file, where the 20-character codes are replaced with `0'.(char **) return_strResulting license file string. Malloc'd by lc_cryptstr, and freed by the calling program. Pass the address of a char pointer.(VENDORCODE *) codwFrom LM_CODE macro, with code.data[0] and code.data[1] XOR'd with VENDOR_KEY5.ID="chap0367"(int) flagmask which can be binary OR'd (`|') with the following flags:LM_CRYPT_ONLYname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'If true, only return 20-char crypt code for first FEATURE in strLM_CRYPT_FORCEname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'if true, recompute the 20-character license key for every line, even if the license key is already computed.(char *) filenamefor error reporting, or (char *)0.(char **) errorsfor error reporting, or (char **)0. If there are errors, the return value is non-zero, and errors is set to an explanatory string. Malloc'd by lc_cryptstr, and freed by the calling program. Pass the address of a char pointer.LBL="" HELPID=""Return(int) status0 == success, else errors is set to an explanatory string.LBL="" HELPID=""Error ReturnsSince different errors can occur on every line of the input str, lc_cryptstr must be able to report all these errors independently, and does so via the errors parameter. Most reported errors will result in no generated license key, but some act as warnings, and license keys are still generated. Here is an example of error reporting:Input:FEATURE f1 demo 1.a50 01-jan-99 0 0 HOSTID=08002b32b161Error reported:stdin:line 1:Bad version number - must be floating point number, with no lettersWith this error, no 20-character license key is generated and return_str will be the same as the input str.NoteBefore calling lc_cryptstr(), add the following code:LM_CODE(code, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2, VENDOR_KEY1,
VENDOR_KEY2, VENDOR_KEY3, VENDOR_KEY4, VENDOR_KEY5);
VENDORCODE vc;
[...]
(void) memcpy((char *)&vc, (char *)&code, sizeof(vc));
vc.data[0] ^= VENDOR_KEY5;
vc.data[1] ^= VENDOR_KEY5;
lc_cryptstr(job, ., &vc, ..); /* for example */LBL="" HELPID=""See alsoIDREF="32035" TYPE="TITLE""lc_crypt"IDREF="26393" TYPE="TITLE""lmfeatset"IDREF="95762" TYPE="TITLE""lmcrypter"IDREF="84345" TYPE="TITLE""create_pkg"LBL="" HELPID=""lc_disconnID="chap0368"LBL="" HELPID=""Syntaxstatus = lc_disconn(job, flag)LBL="" HELPID=""DescriptionDrops the connection to the server. A count of "logical" connections is maintained, and if other features are active, the connection is maintained, unless flag is non-zero.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) flagNon-zero to force disconnection.LBL="" HELPID=""Return(int) status<0 -> error== 0 -> success> 0 -> # of "logical" connections remaining.LBL="" HELPID=""lc_display, lc_hostname, lc_usernameID="chap0369"ID="chap0370"ID="chap0371"LBL="" HELPID=""Syntaxlc_display(job, flag)
lc_hostname(job, flag)
lc_username(job, flag)LBL="" HELPID=""DescriptionReturns environment information about the current process.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) flag0 - Return system's idea of value.!= 0 - Return FLEXlm's idea of value.LBL="" HELPID=""Return(char *)Display name, host name, or user name.LBL="" HELPID=""ID="37211"lc_errstringID="chap0372"LBL="" HELPID=""Syntaxstring = lc_errstring(job)LBL="" HELPID=""DescriptionReturns the FLEXlm error string for the most recent FLEXlm error, along with the major and minor error number. If a UNIX error is involved, the UNIX error description will also be included in the message, along with the UNIX errno.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""Return(char *) stringThe FLEXlm error string text.LBL="" HELPID=""ExamplesNo such feature exists (-5,116)
Cannot find license file, (-1,73:2), No such file or directoryLBL="" HELPID=""See alsoIDREF="68231" TYPE="TITLE""lc_perror"LBL="" HELPID=""lc_feat_listID="chap0373"LBL="" HELPID=""Syntaxlist = lc_feat_list(job, floating, dupaction)LBL="" HELPID=""DescriptionGets the list of all features in the license file.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) floatingIf non-zero, list only floating features.(void) (*dupaction)()Action routine called when a duplicate feature is found. This routine is called upon the second occurrence of any feature name. LBL="" HELPID=""Return(char **) listList of features. list is a pointer to a NULL-terminated array of feature string pointers. Both the pointers and the string data are malloc'd; this memory is freed upon a subsequent call to lc_feat_list(). Do not free this data. If NULL, an error has occurred.The dupaction() callback routine is called with two parameters:(*dupaction)(feature, daemon)where: is the:(char *) featurefeature name(char *) daemondaemon for "feature"LBL="" HELPID=""Error ReturnsLM_CANTMALLOCmalloc() call failed.LM_NOFEATUREID="chap0374"Specified feature not found.LBL="" HELPID=""ID="61646"lc_feat_setID="chap0375"LBL="" HELPID=""Syntaxline = lc_feat_set(job, daemon, code, codes)LBL="" HELPID=""DescriptionComputes the FEATURESET code for the specified daemon, if codes is NULL. If codes is a pointer to a char *, the pointer is set to an array of 20-character license keys for each FEATURE line for this daemon.ID="chap0376"LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) daemonThe daemon desired.(VENDORCODE *) code Vendor's encryption seeds from LM_CODE macro.ID="chap0377"(char **) codesConcatenated license keys (returned). If a pointer to a char * is passed, this gets set to a string which is a concatenation of the 20-character license keys for each FEATURE line for this vendor daemonname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'to be used for calculating a checksum using your own checksum algorithm.LBL="" HELPID=""Return(char *) line The FEATURESET line for the license file, or NULL for error.LBL="" HELPID=""Error ReturnsLM_CANTMALLOC malloc() call failed.LBL="" HELPID=""See alsoIDREF="55175" TYPE="TITLE""LM_CODE"IDREF="13021" TYPE="TITLE""ls_use_featset"IDREF="26393" TYPE="TITLE""lmfeatset"IDREF="69035" TYPE="TITLE""FEATURESET Line"LBL="" HELPID=""ID="15999"lc_first_job, lc_next_jobID="chap0378"ID="chap0379"LBL="" HELPID=""SyntaxLM_HANDLE *job
job = lc_first_job(job);
while (job)
{
/*processing*/
job = lc_next_job(job);
}LBL="" HELPID=""Descriptionlc_first_job() and lc_next_job() are used to walk the list of jobs. This only works properly if all calls to lc_init() have a pointer to the current job as the first parameter.LBL="" HELPID=""Parameters(LM_HANDLE *) jobcurrent jobLBL="" HELPID=""Return(LM_HANDLE *) jobnext currently active job, or (LM_HANDLE *)0 if end.LBL="" HELPID=""Error ReturnsNoneLBL="" HELPID=""See alsoIDREF="75729" TYPE="TITLE""lc_free_job"IDREF="25921" TYPE="TITLE""lc_init"IDREF="29101" TYPE="TITLE""Multiple Jobs"LBL="" HELPID=""lc_flush_configID="chap0380"LBL="" HELPID=""Syntaxlc_flush_config(job)LBL="" HELPID=""DescriptionFlushes the in-memory license file data. lc_flush_config() could be used in an application that wished to change the license file location (see lc_set_attr()) while running. A license creation program that creates several license files while running is an example of such a program.NoteDo not use lc_flush_config() after a successful checkoutname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'this can result in a core dump. Applications cannot reread the license file after a successful checkout. For this reason this function has limited utility.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""ReturnNoneLBL="" HELPID=""Error ReturnsLM_BADFILEID="chap0381"License file corrupted.LM_BAD_VERSIONID="chap0382"Invalid FLEXlm version format in license.LM_NOCONFFILEID="chap0383"ID="chap0384"License file does not exist.LM_NOFEATUREID="chap0385"Specified feature does not existLM_NOREADLICID="chap0386"Cannot read license file.LM_SERVNOREADLICID="chap0387"Cannot read license data from license server.LBL="" HELPID=""See alsoIDREF="43831" TYPE="TITLE""lc_set_attr"LBL="" HELPID=""ID="73513"lc_free_daemon_listLBL="" HELPID=""Syntaxlc_free_daemon_list(job, daemons)LBL="" HELPID=""DescriptionFrees a list of daemons returned by lc_get_dlist()LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(DAEMON *)daemonsID="chap0388"return value from lc_get_dlist()ID="chap0389"LBL="" HELPID=""ReturnNoneLBL="" HELPID=""Error ReturnsNoneLBL="" HELPID=""See alsoIDREF="65031" TYPE="TITLE""lc_get_dlist"LBL="" HELPID=""ID="75729"lc_free_jobLBL="" HELPID=""Syntaxlc_free_job(job_handle)LBL="" HELPID=""Descriptionlc_free_job() frees the memory associated with a job, which has been allocated by lc_init()ID="chap0390". This call is only needed by an application that uses a large number of jobs over its lifetime.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""ReturnNoneLBL="" HELPID=""Error ReturnsLM_BADPARAMID="chap0391"no such jobLBL="" HELPID=""See alsoIDREF="25921" TYPE="TITLE""lc_init"IDREF="43831" TYPE="TITLE""lc_set_attr"IDREF="29101" TYPE="TITLE""Multiple Jobs"LBL="" HELPID=""ID="83986"lc_get_attrID="chap0392"LBL="" HELPID=""Syntax#include "lm_attr.h"
status = lc_get_attr (job, key, value)LBL="" HELPID=""DescriptionRetrieves a FLEXlm attribute. The key describes which attribute to retrieve, and the value is a pointer to the value for the attribute. See lm_attr.h for key constants and value types.Notevalue must be a pointer to the correct attribute type, and should be cast to a (short *).NoteTypes of char * are handled a little differently than other types. Types of int or short are declared, and a pointer to the declared variable is passed as an argument. Types of char * are declared as char *, and the variable itself is passed.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) key Which attribute to get.LBL="" HELPID=""Return(short *) value Value of the attribute (cast to appropriate type).(int) status0 - OK, <>0, error.LBL="" HELPID=""Error ReturnsLM_NOSUCHATTRID="chap0393"No such attribute exists.LM_NOADMINAPIID="chap0394"ID="chap0395"LM_A_VD_GENERIC_INFO or LM_A_VD_FEATURE_INFOID="chap0396" onlyname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'request was made to other company's vendor daemon.LM_NOSERVSUPPID="chap0397"LM_A_VD_GENERIC_INFO or LM_A_VD_FEATURE_INFO onlyname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'pre-v4.0 server does not support these requests.LBL="" HELPID=""See alsoIDREF="43831" TYPE="TITLE""lc_set_attr"IDREF="13145" TYPE="TITLE"Chapter 6, "Controlling Licensing Behavior Of Your Application With lc_set_attr"LBL="" HELPID=""ID="63009"lc_get_configID="chap0398"LBL="" HELPID=""Syntaxconfig = lc_get_config(job, feature)LBL="" HELPID=""DescriptionGets the license file data for a given feature. FLEXlm allows multiple valid FEATURE and INCREMENT lines (of the same feature name) in a license file. lc_get_config() will return the first, and lc_next_config() retrieves the rest, or lc_next_config() can also find the first and remaining.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) feature The desired feature.LBL="" HELPID=""Return(struct config *) configThe config structure. If no feature found, then NULL. The config structure is defined in the header file lm_client.h in the /lmgr/machind directory.LBL="" HELPID=""Error ReturnsLM_NOFEATUREID="chap0399"Specified feature does not existLM_NOCONFFILEID="chap03100"License file does not exist.LM_BADFILEID="chap03101"License file corrupted.LM_NOREADLICID="chap03102"Cannot read license file.LM_SERVNOREADLICID="chap03103"Cannot read license data from license server.LBL="" HELPID=""See alsoIDREF="60631" TYPE="TITLE""lc_auth_data"IDREF="56692" TYPE="TITLE""lc_next_conf"LBL="" HELPID=""ID="76979"lc_get_errnoID="chap03104"LBL="" HELPID=""Syntaxerror = lc_get_errno(job)LBL="" HELPID=""DescriptionThe most recently set FLEXlm error is obtainable via lc_get_errno(). This can be used after any FLEXlm function.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""Return(int) errorSee lm_client.h for a list of possible FLEXlm errorsLBL="" HELPID=""See alsoIDREF="37211" TYPE="TITLE""lc_errstring"IDREF="68231" TYPE="TITLE""lc_perror"IDREF="76419" TYPE="TITLE""lc_set_errno"lm_client.h in the /lmgr/machind directoryLBL="" HELPID=""ID="65031"lc_get_dlistID="chap03105"LBL="" HELPID=""SyntaxDAEMON *daemons;
daemons = lc_get_dlist(job)LBL="" HELPID=""Descriptionlc_get_dlist() gets a list of all vendor daemons from the current license file. The DAEMON structure returned should be freed when it is no longer required with a call to lc_free_daemon_list(daemon).LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""Return(DAEMON *) daemonID="chap03106"A list of all vendor daemons, or NULL, if none found.LBL="" HELPID=""See alsoIDREF="73513" TYPE="TITLE""lc_free_daemon_list"ls_master.h in the /lmgr/machind directory for description of DAEMON struct.LBL="" HELPID=""lc_get_featsID="chap03107"LBL="" HELPID=""Syntaxfs_code = lc_get_feats(job, vendor)LBL="" HELPID=""DescriptionGets the license key from the FEATURESET line for the specified vendor.ID="chap03108"LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) vendorThe vendor name.LBL="" HELPID=""Return(char *) fs_codeThe code from the FEATURESET line for this vendor.LBL="" HELPID=""Error ReturnsLM_NOFEATUREID="chap03109"FEATURESET line for requested vendor cannot be found.LBL="" HELPID=""See alsoIDREF="69035" TYPE="TITLE""FEATURESET Line"LBL="" HELPID=""ID="26954"lc_gethostidID="chap03110"LBL="" HELPID=""Syntaxhid = lc_gethostid(job)LBL="" HELPID=""DescriptionReturns the hostid for the local host. ID="chap03111"lc_gethostid() is simply a call to lc_getid_type(default_hostid_type);LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""Return(HOSTID *) hidID="chap03112"A pointer to the hostid structure, filled in for the current host.LBL="" HELPID=""Error ReturnsLM_CANTFINDETHERID="chap03113"Cannot find ethernet device. If this error is returned, a pointer to a HOSTID struct with a type field of "NOHOSTID" will be returned.LBL="" HELPID=""See alsoIDREF="27279" TYPE="TITLE""lc_getid_type"IDREF="36467" TYPE="TITLE""lmhostid"lm_client.h in the /lmgr/machind directory for the definition of the HOSTID structLBL="" HELPID=""ID="27279"lc_getid_typeLBL="" HELPID=""Syntaxhid = lc_getid_type(job, idtype)LBL="" HELPID=""DescriptionReturns the HOSTID of the specified type for the local host.ID="chap03114"LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) idtypeThe requested hostid type (see ID="chap03115"lm_client.h in the /lmgr/machind directory). Types are:HOSTID_LONGID="chap03116"Longword hostid, e.g., SUNID="chap03117"HOSTID_ETHERID="chap03118"Ethernet address, e.g., VAXID="chap03119"HOSTID_USERID="chap03120"Username.HOSTID_DISPLAYID="chap03121"Display name.HOSTID_HOSTNAMEID="chap03122"Node name.HOSTID_ID_MODULEID="chap03123"HP300 Id-Module hostidID="chap03124"HOSTID_STRINGID="chap03125"string ID, MAX HOSTID_LEN, used for SCOID="chap03126"HOSTID_SENTINEL_KEYID="chap03127"Hardway keyHOSTID_DISK_SERIAL_NUMID="chap03128"Windows and NT disk serial numberHOSTID_INTERNETID="chap03129"Internet IP addressHOSTID_VENDORID="chap03130"Start of Vendor-defined hostid types.LBL="" HELPID=""Return(HOSTID *) hidA pointer to the hostid structure, filled in for the current host. (See lm_client.h in the /lmgr/machind directory for the definition of the HOSTID struct.)LBL="" HELPID=""Error ReturnsLM_CANTFINDETHERID="chap03131"Cannot find ethernet device.Notelc_getid_type() does NOT process either "ANY" or "DEMO" hostid types.ID="chap03132"ID="chap03133"LBL="" HELPID=""See alsolm_client.h in the /lmgr/machind directory for definition of HOSTID struct.IDREF="20049" TYPE="TITLE""Special Hostids"LBL="" HELPID=""lc_hosttypeID="chap03134"LBL="" HELPID=""Syntaxhtype = lc_hosttype(job, benchmark)LBL="" HELPID=""DescriptionReturns information about the local host.Some typical results when benchmark is set:Sun 3/50, OS 3.5: 28
Sun Sparcstation 1+, OS 4.0.3: 101
Next OS V1: 68The number in the vendor_speed field is the manufacturer's stated integer MIP performance (or 0, if no value is available).LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) benchmarkControls whether the internal FLEXlm benchmark is to be run. If benchmark is 0, no benchmark is run, otherwise the benchmark is run. The benchmark uses SIGVTALRM, and runs for approximately 0.5 seconds. If this interferes with your application, or if you do not use the benchmark result, then set benchmark to 0 when calling lc_hosttype().LBL="" HELPID=""Return(HOSTTYPE *) htypeID="chap03135"A pointer to the hosttype structure, filled in for the current host. If lc_hosttype() cannot determine the host type, it will return a pointer to a HOSTTYPE struct with a type of LM_UNKNOWN.ID="chap03136"LBL="" HELPID=""Error ReturnsLM_FUNCNOTAVAILID="chap03137"Vendor keys do not support this function.LBL="" HELPID=""ID="91352"lc_idleID="chap03138"LBL="" HELPID=""Syntaxlc_idle(job, flag)LBL="" HELPID=""DescriptionInforms FLEXlm when the process is idle. lc_idle() enables the end-user feature inactivity TIMEOUTID="chap03139" to allow idle licenses to be reclaimed. Use of lc_idle() is recommended for end-users to take advantage of the TIMEOUT option. lc_idle() also affects vendor daemon timeout of UDP clients.lc_idle() can be used to bracket a portion of the application code that prompts for user input, so that when the user is not using the application, the FLEXlm daemon can detect the fact that the application is idle. lc_idle only sets a flag internally in the application. It is therefore safe to call as often as necessary.A typical use would be:lc_idle(1);/* Process is idle now */
... get input from user...
lc_idle(0);/* Process is no longer idle */LBL="" HELPID=""Parameters(int) flag0 if process is not idle, non-zero if process is idleLBL="" HELPID=""ReturnNone.NoteThere is no detection of license loss (due to daemon shutdown, etc.) while the application is "idle". UDP clients can inadvertently lose their license if the application is idle longer than ID="chap03140"ID="chap03141"LM_A_UDP_TIMEOUT. When the application is active again, the license, if it is still available, will be re-checked out.LBL="" HELPID=""See alsoIDREF="51258" TYPE="TITLE""lc_timer"IDREF="85076" TYPE="TITLE""LM_A_UDP_TIMEOUT"IDREF="52105" TYPE="TITLE""ls_minimum_user_timeout"IDREF="76230" TYPE="TITLE""End-User Options File"LBL="" HELPID=""ID="25921"lc_initID="chap03142"LBL="" HELPID=""Syntax#include "lm_code.h"
LM_CODE(code, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2, VENDOR_KEY1,
 VENDOR_KEY2, VENDOR_KEY3, VENDOR_KEY4, VENDOR_KEY5);
LM_HANDLE *job = (LM_HANDLE *)NULL;
status = lc_init(job, VENDOR_NAME, &code, &job)LBL="" HELPID=""DescriptionInitializes FLEXlm and creates a license "job." Subsequent calls to ID="chap03143"lc_init() create new license jobs. Each license job is independent.Notelc_init() MUST be the first FLEXlm call you make in your application. Do NOT call lc_set_attr() or lc_get_attr() before calling lc_init().NoteThe encryption seeds that you use in your ID="chap03144"lc_init() call MUST be the same as the first set of encryption seeds in your vendor daemon (ls_vendor.c). Otherwise, a "Bad encryption handshake with daemon" error will result from a checkout request.LBL="" HELPID=""Parameters(LM_HANDLE *) jobMust be NULL on first call to lc_init -- thereafter the current job.(char *) vendor_idVENDOR_NAME (from lm_code.h)(VENDORCODE *) vendor_key The vendor's encryption seed and the FLEXlm vendor keys from the LM_CODE macro.LBL="" HELPID=""Returnpointer to (LM_HANDLE *) jobSet to job for the current process. This is used as the first argument to all subsequent lc_xxx() functions.(int) status Value of lc_get_errno() after initialization is complete, 0 if successful.LBL="" HELPID=""Error ReturnsLM_BAD_TZID="chap03145"Time zone offset from GMT is > 24 hours (implies a user is attempting to cheat)LM_BADPLATFORMID="chap03146"Vendor keys do not support this platform.LM_BADKEYDATAID="chap03147"Bad vendor keys.LM_BADVENDORDATAID="chap03148"Unknown vendor key type.LM_CANTMALLOCID="chap03149"malloc() call failed.LM_DEMOKITID="chap03150"Demo kit (informational only)LM_EXPIRED_KEYSID="chap03151"ID="chap03152"Vendor keys have expired.LM_FUNCNOTAVAILID="chap03153"Second call to lc_init() (multiple jobs), and vendor keys do not support multiple jobs.LM_KEY_NO_DATAID="chap03154"Vendor key data not supplied.LM_LIBRARYMISMATCHID="chap03155"lm_client.h/liblmgr.a version mismatch.LM_NONETWORKID="chap03156"ID="chap03157"Networking software not available on this machine.LM_OLDVENDORDATAID="chap03158"Old vendor keys supplied.LBL="" HELPID=""See alsoIDREF="75729" TYPE="TITLE""lc_free_job"IDREF="55175" TYPE="TITLE""LM_CODE"IDREF="29101" TYPE="TITLE""Multiple Jobs"LBL="" HELPID=""lc_isadminID="chap03159"LBL="" HELPID=""Syntaxstat = lc_isadmin(job, user)LBL="" HELPID=""DescriptionVerifies that the specified user is a license administrator. A "license administrator" is a member of the "lmadmin" group. If there is no lmadmin group in the ID="chap03160"ID="chap03161"/etc/groups file, then anyone in group 0 is a license administrator.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) userLogin name of user to test.LBL="" HELPID=""Return(int)Indication of whether the user is an administrator: 0 if the user is not an administrator, <>0 if an administrator. Always returns 1 on VMS.ID="chap03162"LBL="" HELPID=""See alsoIDREF="88547" TYPE="TITLE""lmdown"IDREF="90930" TYPE="TITLE""lmremove"IDREF="96005" TYPE="TITLE""lmgrd"LBL="" HELPID=""lc_lic_whereLBL="" HELPID=""Syntaxpath = lc_lic_where(job)LBL="" HELPID=""DescriptionReturns pathname of FLEXlm license file. This function does not support the colon-separated list in the ID="chap03163"LM_LICENSE_FILE environment variable name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' it only reports on the first file in the list. Use lc_get_attr(LM_A_LF_LIST,...) for full list.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""Return(char *) pathPath of the license file that FLEXlm will use. Notename='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'This returned string must not be modified by the caller.(char *)NULLNo license file setLBL="" HELPID=""See alsoIDREF="75080" TYPE="TITLE""LM_A_LF_LIST"LBL="" HELPID=""lc_logID="chap03164"LBL="" HELPID=""Syntaxlc_log(job, msg)LBL="" HELPID=""DescriptionLogs a message in the FLEXlm log file.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) msgThe message to be logged. The maximum length of the string is ID="chap03165"LM_LOG_MAX_LEN (see lm_comm.h)LBL="" HELPID=""ReturnNone.LBL="" HELPID=""Error ReturnsLM_NOSOCKETID="chap03166"Communications failure to daemon.LM_CANTWRITEID="chap03167"Write error sending message to daemon.LBL="" HELPID=""See alsoIDREF="35936" TYPE="TITLE""Locating the License File"lm_comm.h in the /lmgr/machind directoryLBL="" HELPID=""lc_master_listID="chap03168"LBL="" HELPID=""Syntaxlist = lc_master_list(job)LBL="" HELPID=""DescriptionReturns the list of server nodes.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""Return(LM_SERVER *) listID="chap03169"List of the server nodes. If NULL, error code is in lc_get_errno().LBL="" HELPID=""Error ReturnsLM_NO_SERVER_IN_FILEID="chap03170"No SERVER lines in license file.LM_BADFILEID="chap03171"Server hostname too long (> MAX_HOSTNAME)LBL="" HELPID=""See alsolm_client.h in the /lmgr/machind directory for the definition of LM_SERVER struct.IDREF="78294" TYPE="TITLE""LM_A_MASTER"LBL="" HELPID=""ID="56692"lc_next_confID="chap03172"LBL="" HELPID=""Syntaxconfig = lc_next_conf(job, feature, pos)LBL="" HELPID=""DescriptionReturns the next line in the license file matching "feature." The search is started from "pos".LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) feature The desired feature line.(long *) posPosition to start search. (0L to start at first entry).LBL="" HELPID=""Return(struct config *) configThe config structure. If none found, then NULL.(long *) posUpdated to next license file entry.LBL="" HELPID=""Error Returns(See lc_get_config().)Notelc_get_config (feature) is equivalent to: pos = 0L;   lc_next_config(feature, &pos).LBL="" HELPID=""ID="68231"lc_perrorID="chap03173"LBL="" HELPID=""Syntaxlc_perror (job, string)LBL="" HELPID=""DescriptionPrints a FLEXlm error message, in the same format as the UNIX routine perror(), e.g.:"string": FLEXlm error-stringIf a UNIX error has also occurred, it will be included in the message.On Windows and Windows NT systems, a message box of type MB_OK will be displayed with the FLEXID="chap03174"lm error message. If the last error was a system error, rather than a FLEXlm error, then the error string above will be a UNIX,Windows, or Windows NT error string. The FLEXlm error messages are available by calling lc_errstring()ID="chap03175".LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) stringThe first part of the error message, as above. LBL="" HELPID=""ReturnNone.LBL="" HELPID=""See alsoIDREF="37211" TYPE="TITLE""lc_errstring"LBL="" HELPID=""lc_removeID="chap03176"LBL="" HELPID=""Syntaxstatus = lc_remove(job, feature, user, host, display)LBL="" HELPID=""DescriptionRemoves the specified user's license for feature. This is used by the lmremove command, and has the same restrictions regarding lmadminID="chap03177" group. lc_remove normally is only used when the client's system has had a hard crash, and the server does not detect the client node failure. If lc_remove is called on a healthy client, the license will be re-checked out by the client with its next heartbeat.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) featureRemove the license for this feature.(char *) userUser name to remove.(char *) hostUser's host name to remove.(char *) displayUser's display name to remove.LBL="" HELPID=""Return(int) status  0 - OK, !=0, error statusError ReturnsLM_BADCOMMID="chap03178"communications errorLM_BADPARAMID="chap03179"no licenses issued to this userLM_CANTCONNECTID="chap03180"Cannot connect to license server.LM_CANTREADID="chap03181"Cannot read from license server.LM_CANTWRITEID="chap03182"Cannot write to license server.LM_NOFEATUREID="chap03183"Feature not found in license file data.LM_NOTLICADMINID="chap03184"failed because user is not in lmadmin group.LM_REMOVETOOSOONID="chap03185"failed because ls_min_lmremove time has not elapsed.LBL="" HELPID=""See alsoIDREF="95659" TYPE="TITLE""Privileged License Administration Commands"IDREF="65846" TYPE="TITLE""ls_min_lmremove"IDREF="90930" TYPE="TITLE""lmremove"IDREF="51258" TYPE="TITLE""lc_timer"LBL="" HELPID=""ID="43831"lc_set_attrID="chap03186"LBL="" HELPID=""Syntax#include "lm_attr.h"
status = lc_set_attr(job, key, (LM_A_VAL_TYPE)value)LBL="" HELPID=""DescriptionSets a FLEXlm attribute. The key describes which attribute to set, and the value is the value for the attribute. See the header file lm_attr.h for key constants and value types. LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) keyWhich attribute to set.(ID="chap03187"LM_A_VAL_TYPE) valueValue to set it to. Values should be of the appropriate type for the particular attribute (see lm_attr.h), but should be cast to ID="chap03188"LM_A_VAL_TYPE.LBL="" HELPID=""Return(int) status 0 - OK, !=0, error.LBL="" HELPID=""Error ReturnsLM_FUNCNOTAVAILID="chap03189"Vendor keys do not support this function.LM_BADPARAMID="chap03190"Specified parameter is incorrect.LM_NOCONFFILEID="chap03191"Specified license file cannot be found (ID="chap03192"LM_A_LICENSE_FILE or LM_A_LICENSE_FILE_PTRID="chap03193")LM_NOSUCHATTRID="chap03194"Specified attribute does not exist.LBL="" HELPID=""See alsoIDREF="13145" TYPE="TITLE"Chapter 6, "Controlling Licensing Behavior Of Your Application With lc_set_attr"LBL="" HELPID=""ID="76419"lc_set_errnoLBL="" HELPID=""Syntaxlc_set_errno(job, error)LBL="" HELPID=""DescriptionThe FLEXlm error is settable via lc_set_errno(). This should not normally be used, since the error should be set by the FLEXlm libraries.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) errorSee lm_client.h in the /lmgr/machind directory for a list of possible FLEXlm error codes.LBL="" HELPID=""Return(void) noneLBL="" HELPID=""See alsoIDREF="37211" TYPE="TITLE""lc_errstring"IDREF="68231" TYPE="TITLE""lc_perror"IDREF="76979" TYPE="TITLE""lc_get_errno"lm_client.h in the /lmgr/machind directoryLBL="" HELPID=""lc_shutdownID="chap03195"LBL="" HELPID=""Syntaxstatus = lc_shutdown(job, prompt, print)LBL="" HELPID=""DescriptionShuts down the FLEXlm servers. This is used by ID="chap03196"lmdown.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(int) prompt <> 0 => ask if server should be shut down.(int) print <> 0 => prints which nodes are shut down.LBL="" HELPID=""Return(int) status 0 - server not shutdown <> 0 - server shut down.LBL="" HELPID=""Error ReturnsLM_FUNCNOTAVAILID="chap03197"Vendor keys do not support this function.LM_FUNCNOTAVAILID="chap03198"(VMS)name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'This function is not available on VMS.LM_NOTLICADMINID="chap03199"You are not an authorized license administrator.LM_CANTREADID="chap03200"Cannot read data from license server.LBL="" HELPID=""See alsoIDREF="95659" TYPE="TITLE""Privileged License Administration Commands"IDREF="88547" TYPE="TITLE""lmdown"LBL="" HELPID=""lc_startupID="chap03201"LBL="" HELPID=""Syntaxstatus = lc_startup (job, lmgrd_path, logfile, license_file)LBL="" HELPID=""Descriptionlc_startup() starts lmgrd from within your program. lc_startup() does not report the success of the lmgrd process. lc_startup() calls the appropriate system() call given its arguments, and is unable to detect success of the system() call, since the process is started in the background.Notelc_startup() is available on UNIX systems only. lc_startup() works for non-redundant servers only, and only if the application is running on the license server node.ID="chap03202"ID="chap03203"LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) lmgrd_path The pathname to lmgrd.(char *) logfileThe daemon log file location. (Passing a NULL string or a NULL pointer will cause the Debug log file to go to stdout, which is probably not what you want.). If the first character is `+', then the logfile will be appended, if it exists. If the logfile does not exist, it will be created.(char *) license_fileThe location of the license file (NULL for default).LBL="" HELPID=""Return(int) status0 - lmgrd_path NULL<> 0 - startup of lmgrd attempted. LBL="" HELPID=""ID="69383"lc_statusLBL="" HELPID=""Syntaxstatus = lc_status (job, feature)LBL="" HELPID=""DescriptionReturns the status of the requested feature.This call is used primarily when QUEUEing for a license. Normally QUEUEing is done in the following manner:rc = lc_checkout(....LM_CO_NOWAIT,...);
if (rc && lc_get_errno(job) == LM_MAXUSERS)
{
printf("Waiting for license...");
rc = lc_checkout(....LM_CO_WAIT,...);
}
ID="chap03204"ID="chap03205"However, in this example the application must wait in the lc_checkout call. If the application needs to continue doing processing, you can use lc_status() to periodically check on the status. This might be coded in the following manner:rc = lc_checkout(...,LM_CO_QUEUE,...)
switch (rc) 
{
case 0:
break; /* got the license */
case LM_MAXUSERS:
case LM_USERSQUEUED:
case LM_FEATQUEUE:
printf("Waiting for license...");
while (lc_status(feature)
{
/* processing */
}
break; /* got the license */
default:
lc_perror("Checkout for license failed");
}
ID="chap03206"ID="chap03207"ID="chap03208"LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) featureThe ASCII feature name.LBL="" HELPID=""Return(int) statusStatus of this feature (in this process):0 feature is checked out by this process. < 0errorLBL="" HELPID=""Error ReturnsLM_CANTCONNECTID="chap03209"Feature was checked out, but lost connection to the daemon.LM_FEATQUEUEID="chap03210"This process is in the queue for this feature.LM_NEVERCHECKOUTID="chap03211"Feature was never checked out by this process, or was checked back in after a checkout.LBL="" HELPID=""See alsoIDREF="65026" TYPE="TITLE""lc_checkout"LBL="" HELPID=""ID="51258"lc_timerID="chap03212"LBL="" HELPID=""Syntaxlc_timer(job)LBL="" HELPID=""DescriptionThis routine is called by vendors that cannot tolerate the use of interval timers by FLEXlm. The purpose of lc_timer is twofold:Ensure the vendor daemon is continually running name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' otherwise an end-user may kill the license server when all licenses are in use, restart the server, and obtain unauthorized licenses.Keep license server informed that the client is still using its license name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' otherwise the license-server may timeout the client, and drop its license.If no FLEXlm timers are used, then lc_timer must be called periodically. To avoid FLEXlm's use of timers, call lc_set_attr(LM_A_CHECK_INTERVAL, -1)ID="chap03213", and lc_set_attr(LM_A_RETRY_INTERVAL, -1)ID="chap03214".If the default timer is left installed, lc_timer() is called by the FLEXlm-installed timer. lc_timer() also performs all the reconnection functions, so it is important to keep calling lc_timer(), even if your reconnection handler is called.lc_timer() must not be called more than once per minute, or it will generate unnecessary networking delays. That is, when used correctly, no delays should occur. Alternatively lc_timer() must be called often enough to avoid the application losing its license name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' the vendor daemon will time out clients due to either UDP timeout or the end-user ID="chap03215"TIMEOUTID="chap03216" option. The application must ensure that LM_A_UDP_TIMEOUTID="chap03217" and ls_minimum_user_timeoutID="chap03218" are both large enough that the application will not inadvertently lose its license. In general, it is a good idea to lc_timer() once every 5 minutes, although occasional lapses are relatively harmless.LBL="" HELPID=""ID="15641"How lc_timer() Workslc_timer() sends a heartbeat to the server. It then reads the response from the previously sent heartbeat. The first heartbeat is sent when the application first connects to the server, usually in ID="chap03219"lc_checkout(). In this manner, there is normally no delay in lc_timer(). If lc_timer() is unable to read a response from the server, it attempts to reconnect to the server. If the application has set an LM_A_USER_RECONNECTID="chap03220" function, this function will also get called. If this reconnect fails, then an internal flag is set and subsequent calls to lc_timer() will attempt reconnection. These attempts are made for LM_A_RETRY_COUNTID="chap03221" times. If a reconnection occurs before LM_A_RETRY_COUNT attempts, the LM_A_USER_RECONNECT_DONEID="chap03222" routine, if specified, will be called. If a reconnection fails to occur after LM_A_RETRY_COUNT attempts, the LM_A_USER_EXITCALL routine, if specified, will be called. If LM_A_USER_EXITCALL is not specified, the application will exit with the error message, "Lost license, cannot reconnect" to stderr.LBL="" HELPID=""lc_timer() and User TIMEOUT Option and UDP TimeoutIf lc_timer() is not called for an extended period, then the application may lose its license. This can happen for two reasons: the application is communicating via UDP or the end-user has set a TIMEOUTID="chap03223" for this feature in the end-user options file. In both cases, the server has a timeout associated with the license which gets invoked if lc_timer() is not called within the timeout interval. Make sure that LM_A_UDP_TIMEOUTID="chap03224" is large enough to accommodate your usage of lc_timer(). Similarly, make sure ls_minimum_user_timeoutID="chap03225" in ls_vendor.cID="chap03226" is large enough so that users will not timeout applications that are in use.If the license is inadvertently released, the next lc_timer() will automatically re-checkout the license, if there's still a license available.LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()LBL="" HELPID=""ReturnNoneLBL="" HELPID=""See alsoIDREF="76230" TYPE="TITLE""End-User Options File"IDREF="52105" TYPE="TITLE""ls_minimum_user_timeout"IDREF="85076" TYPE="TITLE""LM_A_UDP_TIMEOUT"IDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"LBL="" HELPID=""ID="64942"lc_userlistID="chap03227"LBL="" HELPID=""Syntaxusers = lc_userlist(job, feature)LBL="" HELPID=""DescriptionProvides a list of who is using the feature, including information about the user of the license. This is used by lmstat -aID="chap03228".LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) featureThe feature name.LBL="" HELPID=""ReturnIf successful, pointer to an LM_USERS structure.If unsuccessful:(LM_USERS *)NULLReserved licenses are indicated by the lm_isres()ID="chap03229" macro (defined in lm_client.h). In this case, the "name" contains the entity that the reservation is for.The LM_USERS structure is obtained from dynamic memory name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' it is freed upon a subsequent call to lc_userlist(). Do not free this memory.Notelc_userlist() will return no information about users of node-locked, unlimited-use licenses, or demo licenses.NoteThis is a potentially expensive function call. With many active users, this call can generate a lot of network activity, and therefore should not be used too often.LBL="" HELPID=""Error ReturnsLM_BADCOMMID="chap03230"Communications error with license server.LM_CANTMALLOCID="chap03231"malloc() call failed.LM_FUNCNOTAVAILID="chap03232"Vendor keys do not support this function.LM_NOFEATUREID="chap03233"Specified feature cannot be found.LBL="" HELPID=""See alsoIDREF="47746" TYPE="TITLE""lmstat"lm_client.h in the /lmgr/machind directory for LM_USER struct definition.LBL="" HELPID=""ID="40445"lc_vsendID="chap03234"LBL="" HELPID=""Syntaxrcv_str = lc_vsend(job, send_str)LBL="" HELPID=""DescriptionSends a message to the vendor daemon and returns a result string. There must be a connection established to the vendor daemon before lc_vsend() will work. You can establish a connection with either lc_checkout()ID="chap03235"or lc_userlist()ID="chap03236".You must set up a processing routine in your vendor daemon to receive the message from lc_vsend() and send the reply. This routine is specified in ls_vendor.cID="chap03237" in the variable ls_vendor_msgID="chap03238".LBL="" HELPID=""Parameters(LM_HANDLE *) jobFrom lc_init()(char *) send_strString to be send to your vendor daemon.LBL="" HELPID=""Return(char *) rcv_strString returned by ls_vendor_msg() in your vendor daemon.(char *)NULLif unsuccessfulLBL="" HELPID=""Error ReturnsID="chap03239"LM_BADCOMMCommunications problem with the vendor daemon.ID="chap03240"LM_CANTREADCannot read data from license serverLM_NOFILEVSENDID="chap03241"Communications protocol does not support this function.LM_NOSERVSUPPID="chap03242"Your vendor daemon does not support this function.LBL="" HELPID=""See alsoIDREF="73612" TYPE="TITLE""ls_vendor_msg"LBL="" HELPID=""ID="55175"LM_CODEID="chap03243"LBL="" HELPID=""SyntaxLM_CODE(code, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2, VENDOR_KEY1, VENDOR_KEY2, VENDOR_KEY3, VENDOR_KEY4, VENDOR_KEY5);LBL="" HELPID=""DescriptionLM_CODE is a macro defined in lm_client.h which is used to declare the variable code which is the argument necessary for many other FLEXlm calls. This must be included at the head of any source files which make FLEXlm calls requiring the code argument.LBL="" HELPID=""Parameterscodethis declares and initializes the variable codeENCRYPTION_CODE_[1-2]ID="chap03244"These are #defined in lm_code.h. These numbers should be 32-bit int values made up by the vendor. These codes are encrypted into the license file.VENDOR_KEY[1-5]ID="chap03245"These are #defined in lm_code.h, and are provided by Globetrotter Software, enabling FLEXlm to run in either demo mode, or fully-licensed mode on particular platforms which you have licensed. These keys are not encrypted in license files, and can be changed without affecting a license file.NoteVENDOR_KEY5 is used when calling lc_crypt() or lc_cryptstr(). The data[0] and data[1] elements of the code variable created by LM_CODE must be XOR'd with VENDOR_KEY5 before calling these two functions.LBL="" HELPID=""See alsoIDREF="12133" TYPE="TITLE""Example Application"IDREF="79902" TYPE="TITLE""Installing Your FLEXlm Vendor Keys"IDREF="65026" TYPE="TITLE""lc_checkout"IDREF="61646" TYPE="TITLE""lc_feat_set"IDREF="32035" TYPE="TITLE""lc_crypt"IDREF="33883" TYPE="TITLE""lc_cryptstr"IDREF="25921" TYPE="TITLE""lc_init"LBL="4"Incorporating FLEXlm Into Your ApplicationTo incorporate FLEXlm into your application, you will add function calls to your application program, build your application, and build a custom vendor daemon as discussed in the following sections.LBL="" HELPID=""FLEXlm Naming ConventionsAll FLEXlm client routines and variables adhere to certain naming conventions. These conventions are:All client routine names start with either "l_" or "lc_". In general, the "lc_" routines are the routines which are to be used by FLEXlm vendors, whereas the "l_" routines are internal support routines (note that a few "l_" routines will be described in the next section). These routines are contained in the library file liblmgr.aID="chap041" (lmgr.dll/lmgr.lib for Windows and lmgr32.dll/lmgr32.lib for Windows NT and Win32s, and lmgr.olb for VMS platforms).All FLEXlm server function and global data names will start with "ls_". These routines are contained in the library files ID="chap042"liblmgr_s.a and ID="chap043"liblmgr_as.a, as well as in lmgrd.a. These routines will not be linked into your application.LBL="" HELPID=""FLEXlm Example ApplicationsThe FLEXlm distribution kit contains an example client application program in the machind directory called lmclient.c. For Windows and Windows NT systems, this file is located in the test directory. ID="chap044"lmclient.c is a small stand-alone licensed program and is a good place to start to learn how to integrate FLEXlm with your application.For Windows and Windows NT systems the WINTEST directory contains a second example application which uses Microsoft Visual C++ to build a slightly more complicated example program to demonstrate the usage of UDP, LSAPI, etc.ID="chap045"The create_license and lmcrypter programs can be used to generate licenses for your customers, or they can be used as examples of license generation programs. Source to the ID="chap046"create_license and lmcrypter programs is in the machind directoryname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'called create_lic.cID="chap047" and lmcrypter.c in the /lmgr/machind directory. For Windows and Windows NT systems, these files are located in the utils directory with the file name CREATE_L.C and LMCRYPTE.C.The create_license and lmcrypter programs generate the same license keys on all FLEXlm supported platforms for all FLEXlm versions, thus allowing you to create codes for any supported platform on any other supported platform.FLEXlm kits also contain an examples directory at the top-level of the kit hierarchy. The examples directory contains example programs, which have been put on the kit in order to illustrate how to perform various operations with FLEXlm. These programs are not supported, and Globetrotter Software may not include them in future FLEXlm releases.LBL="" HELPID=""Client Heartbeats and License Server FailuresID="chap048"Your client application will need to communicate regularly with the server via lc_timer() "heartbeats", to ensure the server is still running. How the heartbeats occur and what action takes place when the server is not running are the most important part of incorporating FLEXlm in an application. This is addressed in the following sections:IDREF="51258" TYPE="TITLE""lc_timer"IDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"IDREF="25274" TYPE="TITLE""LM_A_RETRY_COUNT, LM_A_RETRY_INTERVAL"IDREF="26627" TYPE="TITLE""LM_A_USER_EXITCALL"IDREF="32158" TYPE="TITLE""LM_A_USER_RECONNECT"IDREF="10195" TYPE="TITLE""LM_A_USER_RECONNECT_DONE"LBL="" HELPID=""InternationalizationA message file for localization of FLEXlm messages has been provided for Solaris 2.x in FLEXlm v3.0 and later. The message file is FLEXlm.po, ID="chap049"ID="chap0410"and it is contained in the machind directory. The text domain is "FLEXlm". All messages from ID="chap0411"lmgrd, the vendor daemons, and ID="chap0412"ID="chap0413"lmutil are contained in this message file. Since the client library does not output any messages, and the create_license, lmcrypter and lmfeatset programs are example programs for the ISV's use only (which are shipped in source form, anyway), these have not been internationalized. All FLEXlm client library messages are contained in the file machind/lm_errors.hID="chap0414". In order to build a localized version of the daemons and utilities, do the following:Edit FLEXlm.poID="chap0415" to contain the text translations.Run msgfmt on FLEXlm.po (produces FLEXlm.mo).Put FLEXlm.mo into the appropriate message directory. For example, if you were doing a french translation:% cp FLEXlm.mo /usr/lib/locale/fr/LC_MESSAGESSet your language environment:% setenv LANG fr
ID="chap0416"Run lmgrd or the utility program. You should see the translated messages.LBL="" HELPID=""ID="80393"Lingering LicensesID="chap0417"ID="chap0418"A lingering license allows you to specify how long a license will remained checked out beyond either an lc_checkin() call or program exit (whichever comes first). To use this feature, call lc_set_attr()ID="chap0419" before checking out the feature that should linger:lc_set_attr(LM_A_LINGER, ID="chap0420"ID="chap0421"x)where: is the:(long) x number of seconds to make the license linger.In addition, the end-user can specify a longer linger interval in his daemon options file, as such:LINGER f1 100The longer of the developer-specified and user-specified times will be used. The actual time of checkin will vary somewhat since the vendor daemon checks all lingering licenses once per minute. If however, a new license request is made that would otherwise be denied, a check of the lingering licenses is made immediately to attempt to satisfy the new request. Linger is useful for programs that normally take under a minute to complete. Linger is generally only useful if DUP_GROUP is also set.ID="chap0422"LBL="" HELPID=""See alsoIDREF="51599" TYPE="TITLE""LM_A_LINGER"IDREF="92354" TYPE="TITLE""Vendor daemon Support Routines"IDREF="76230" TYPE="TITLE""End-User Options File"IDREF="79592" TYPE="TITLE""FEATURE or INCREMENT Line"LBL="" HELPID=""TLI vs. SocketsID="chap0423"ID="chap0424"By default, all UNIX FLEXlm implementations use sockets. On Solaris 2.x FLEXID="chap0425"lm gives you the option to use TLI instead of the socket networking interfaces. There is no good reason to force the FLEXID="chap0426"lm client library to use TLI, since the Solaris sockets implementation uses TLI internally. However, if you want to use TLI, do the following:ID="chap0427"replace "-lsocket" with "l_tli.o" in the makefileID="chap0428"re-build your application.Globetrotter Software does not recommend building lmgrd and the vendor daemons with TLI. Using TLI may make administration more difficult for your customer's license administrator. If, however, you wish to do this, keep the following in mind:You CANNOT mix a TLI and a non-TLI lmgrd and vendor daemon.If the daemons are built with TLI, then only ONE copy of any vendor daemon will be able to run. Additional vendor daemons that are started will fail. This is a permanent restriction.If you want to use TLI for your daemons, you will need a source kit. Start by re-building the kit, setting the "USE_TLI" compile-time switch in lm_machdep.h. (This switch is surrounded with a #if 0/#endif in the kit, as shipped). Next, change "-lsocket" to "l_tli.o" in the XTRALIB macro in the makefile. Re-build your vendor daemon. Finally, to re-build lmgrd with TLI, do the following:% ar x lmgrd.a ls_lmgrd.o
% cc -o lmgrd ls_lmgrd.o lmgrd.a liblmgr_s.a liblmgr.a l_tli.o \
-lnsl -lintlIf you do not rebuild any of the programs this way, they will use the default system socket library (-lsocket).ID="chap0429"LBL="" HELPID=""ID="29101"Multiple JobsID="chap0430"ID="chap0431"lc_init(job, x, y, &job_handle)ID="chap0432" function calls enable applications to support more than one FLEXlm job in a single binary. Each job has a separate connection to a license server, as well as a independent set of job attributes. When a new job is created, with lc_init(), all the FLEXlm attributes are set to defaults, and attributes can be set completely independently for this new job. For example, one job could use TCP, and another job UDP, running simultaneously, although this is not a significant reason for multiple jobs.Multiple jobs may be desirable for the following reasons:If $LM_LICENSE_FILEID="chap0433" is a colon-separated list (vertical-bar-separated list on Windows or Windows NT or a space separated list on VMS platforms) with more than one server supporting features for the client, and if the application needs to check out more than one feature, it may be necessary to communicate with two servers to check out the necessary licenses. This can only be done with multiple jobs, since a separate connection is required for each server.It may be convenient to have a single process manage licenses for other processes. It is usually convenient to manage each process's license as a separate job.lc_checkin() checks in all licenses for a given name. If the application needs to check-in only some of the licenses, this can be done with multiple jobs, where groups of checkouts are done in separate jobs, and checked in separately from each job.The first item can be important as an alternative way of supporting server redundancy. Following is a program excerpt that illustrates how to support this:LM_HANDLE *job1, *job2, *feature_2_job;
lc_init((LM_HANDLE *)0, "demo", code, &job1);
set_all_my_attr(job1); /* do all necessary lc_set_attr() calls */
if (lc_checkout(job1, "feature1",...))
/* error processing */
/*fs got one feature successfully checked out, so we're connected
 *to a server already. In order to connect to another server, we 
 *would need another job
 */
if (lc_checkout(feature_2_job = job1, "feature2",...))
{
lc_init(job1, "demo", code, &job2); /* try another server */
/*
 *reset attributes for this new job 
 */
set_all_my_attr(job2); 
if (lc_checkout(feature_2_job = job2, "feature2",...)
{
feature_2_job = (LM_HANDLE *)0;
 /* error processing */
}
}

/* . . . */
lc_checkin(job1, "feature1"); /* have to checkin from job1 */
lc_free_job(job1); /* not really necessary, but shown for illustration */
if (feature_2_job)
{
lc_checkin(feature_2_job, "feature2");
}
ID="chap0434"If the application is managing many jobs, you may need to free jobs with lc_free_job() to save memory. When doing so, make sure that you do not delete a job which still has a license checked outname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'this can result in a core dump. Jobs can be found and managed using lc_first_job() and lc_next_job(), which are used to walk the list of jobs.Attributes for jobs are set and retrieved with lc_set_attr() and lc_get_attr()ID="chap0435".LBL="" HELPID=""See alsoIDREF="75729" TYPE="TITLE""lc_free_job"IDREF="83986" TYPE="TITLE""lc_get_attr"IDREF="25921" TYPE="TITLE""lc_init"IDREF="15999" TYPE="TITLE""lc_first_job, lc_next_job"IDREF="43831" TYPE="TITLE""lc_set_attr"LBL="5"Industry-Standard Licensing APIsID="chap051"FLEXlm offers the most widely-used licensing API availablename='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'the FLEXID="chap052"lm API, which is used by over 500 software vendors worldwide. However, there has been much effort expended in the search for a "standard" licensing API. FLEXlm offers the ISV the choice of three standard APIs:The FLEXlm API (recommended)Software License Working Group APIID="chap053"LSAPI (a proposed standard)ID="chap054"FLEXlm is the only licensing system available which supports all three APIs.LBL="" HELPID=""ID="30581"The FLEXID="chap055"lm APIThe FLEXlm API has evolved since 1988, with the input of most of the major software vendors in the UNIX software industry. The goal of the FLEXlm API is to give you your choice of licensing models in an easy to implement, robust package. The FLEXlm API is documented in Chapter 4, "Incorporating FLEXlm Into Your Application."LBL="" HELPID=""ID="15633"Software License Working GroupID="chap056"The Software License Working Group was a sub-group of the Network Computing Forum, organized by Apollo Computer in 1988. This group published a licensing system API which Globetrotter believes to be the most usable of all the "standard" licensing APIs in existence to date. FLEXlm has supported this interface since 1990. Even though this interface is vendor-neutral and well-designed, few software companies utilize this interface, and no other "standards" organizations adopted it.NoteYou cannot mix Software License Working Group calls with either the native FLEXlm calls or the LSAPI calls.NoteFLEXlm on Windows and Windows NT systems do not support this API.LBL="" HELPID=""Data types for all callsvendor_id (char *)Same as vendor daemon namevendor_key (VENDORCODE *) Vendor's encryption seedsjob_id (LM_HANDLE *)Job handlelength (int)Length of a stringtext (char *)Stringstatus (int)Status return from callproduct_id (char *)Feature nameversion (char *) Version of featureamount (int)Number of licensesqueue (int)Enqueue request flagcheck_period (int)check_intervallicense_handle (char *)Handle for this licensequeue_position (int)Our position in the queueLBL="" HELPID=""General Callsls_init (vendor_id, vendor_key, &job_id):Same as lc_init()ls_terminate (job_id):Terminate licensing operationsls_log_message (job_id, length, text, &status):Similar to lc_log()LBL="" HELPID=""License Brokering Callslb_request (job_id, product_id, version, amount, queue, check_period, &license_handle)Check out a licenselb_check_wait (license_handle, check_period, &queue_position)Check queue position for a licenselb_wait_remove (license_handle)Remove process from queue for this licenselb_confirm (license_handle, check_period) Inform daemon that license is still in uselb_release (license_handle)Release a license (lc_checkin())lb_get_cur_users (job_id, product_id, version, next, maximum_entries, queued, total_licenses, number_of_entries, entries)Get a list of users of "product_id" (like lc_userlist, only much harder to use).LBL="" HELPID=""Usage Metering Calls (Not Implemented)um_put_record() um_get_record() um_delete_records() um_purge_records() um_undelete_records() LBL="" HELPID=""ID="19744"LSAPI v1.1ID="chap057"The LSAPI interface, a licensing API first proposed in May, 1992, was designed by a consortium of software vendors with participation from several licensing system vendors. The main "claim to fame" of this interface is that it attempts to provide a solution whereby the end-user can choose the license server product from the licensing system vendor of their own choice. While the LSAPI seems to be a simple API, it hides the fact that your code will increase in complexity in order to solve the problem of the replaceable license server, (since both the license server and the licensing system library are, in theory, replaceable by the end-user, any security must be built into your code, independent of the license server). The complexity is exposed to you in the "challenge mechanism", which is a standard encryption technique known as "handshaking".NoteIf you are considering using LSAPI in your product, you should read U.S. patent #5,375,206 issued to HP, and understand its implications.LSAPI has several significant drawbacks compared to the FLEXlm API. In addition, Globetrotter believes that the stated goal of license server independence cannot be met by the current version of the LSAPI spec (see last point below). Some of the drawbacks of LSAPI compared to the native FLEXlm API are:Unreasonable error reporting (only a total of 14 error codes.)No ability for the vendor to support license queueing.No vendor-specific checkout filtering.New hostid types are not definable by the software vendor.ID="chap058"No provision to pass messages between the client and license server.No way to get license status without doing I/O to the license server.No way to support a node-locked license without a license server.No way to retrieve information about the licensing policy.No way to ship a vendor-neutral license. This means that, in order to accomplish the stated goal of allowing your end-user to select the licensing system from the vendor of their choice, YOU would have to provide licenses in the format required by EACH AND EVERY license system which your customer might want to choose. In practice, what this means is that you would need to build and test with every possible licensing system.NoteYou cannot mix LSAPI calls with either the native FLEXlm calls or the Software License Working Group calls.LBL="" HELPID=""Data types for all callsLS_ULONGunsigned longLS_STATUS_CODEunsigned longLS_STRcharLS_CHALLENGE structureLS_CHALLENGE_FLEXLM structureLS_HANDLEunsigned long LS_VOIDvoidLBL="" HELPID=""LSAPI General CallsLBL="" HELPID=""List providers of licensing serviceLS_STATUS_CODE LSEnumProviders (LS_ULONG Index, LS_STR *Buffer)LBL="" HELPID=""Get message text from licensing systemLS_STATUS_CODE LSGetMessage(LS_HANDLE Handle, LS_STATUS_CODE Value, LS_STR *Buffer, LS_ULONG BufferSize) LBL="" HELPID=""Query License informationLS_STATUS_CODE LSQuery(LS_HANDLE Handle, LS_ULONG Information, LS_VOID *InfoBuffer, LS_ULONG BufferSize, LS_ULONG *ActualBufferSize) LBL="" HELPID=""Release licenseLS_STATUS_CODE LSRelease(LS_HANDLE Handle, LS_ULONG TotUnitsConsumed, LS_STR *LogComment) LBL="" HELPID=""Request licenseLS_STATUS_CODE LSRequest(LS_STR *LicenseSystem, LS_STR *PublisherName, LS_STR *ProductName, LS_STR *Version, LS_ULONG TotUnitsReserved, LS_STR *LogComment, LS_CHALLENGE *Challenge, LS_ULONG *TotUnitsGranted, LS_HANDLE *Handle)NoteThe challenge in your first LSRequest() call must be of type LS_CHALLENGE_FLEXLM, which is a FLEXlm vendor specific challenge mechanism. Challenge should be setup as in the following code example before calling LSRequest():LS_CHALLENGE_FLEXLM *Challenge;
LM_CODE(vendor_code, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2, VENDOR_KEY1,
  VENDOR_KEY2, VENDOR_KEY3, VENDOR_KEY4, VENDOR_KEY5);
...
Challenge->Protocol = LS_FLEXLM_PROTOCOL;
strcpy( Challenge->ChallengeData.VendorName, VENDOR_NAME);
Challenge->ChallengeData.VendorCode = vendor_code;
Challenge->Size = sizeof(*Challenge);
...
LSRequest( ...., (LS_CHALLENGE *)Challenge, ...);LBL="" HELPID=""Update license statusLS_STATUS_CODE LSUpdate(LS_HANDLE Handle, LS_ULONG TotUnitsConsumed, LS_ULONG TotUnitsReserved, LS_STR *LogComment, LS_CHALLENGE *lpChallenge, LS_ULONG *TotUnitsGranted)For more details on the LSAPI interface, see the "License Service Application Programming Interface, API Specification v1.1," or contact Microsoft via e-mail at "lsapi@microsoft.com", or Dave Berry, Microsoft Developer Relations, 1 Microsoft Way, 4/2, Redmond, WA 98052-6399.Remember, you cannot mix LSAPI and native FLEXlm calls in a single application. The license servers can support a mix of applications which use either native FLEXlm or LSAPI, but a single executable must use either native FLEXlm or LSAPI.LBL="6"ID="13145"Controlling Licensing Behavior Of Your Application With lc_set_attrID="chap061"FLEXlm allows you to control the licensing behavior of your application with a set of attributes. FLEXlm attributes allow you control over licensing policy, internal operations of FLEXlm (e.g. use of timers, etc), and control of the licensing parameters of your process (e.g., define how FLEXlm will define "username", "hostname", and "display name," etc. for managed license distribution.)To set FLEXlm attributes, use the lc_set_attr call, described in IDREF="43831" TYPE="TITLE""lc_set_attr".The following parameters can be changed with lc_set_attr() and queried with lc_get_attr(). The section heading is the attribute name. The first line of each section is the data type of the attribute. All attribute definitions are in lm_attr.h. When using these attributes with lc_set_attr(), the argument must be of the correct type (each item below lists its associated type), and must then be cast to LM_A_VAL_TYPEID="chap062". When using them with lc_get_attr()ID="chap063", the pointer argument should point to a value of the correct type (noting that short and int are different in this case), and must be cast to a (short *).LBL="" HELPID=""ID="10309"LM_A_ALLOW_SET_TRANSPORTType: intThis option allows you to disable the end-user selection of communications transport, which they can do with either the daemon options file, or the FLEXLM_COMM_TRANSPORTID="chap064" environment variable.Default: On(1), i.e., end-users can select communications transport.LBL="" HELPID=""See alsoIDREF="85668" TYPE="TITLE""Communications Transport (TCP vs. UDP)"LBL="" HELPID=""LM_A_ALT_ENCRYPTIONID="chap065"Type: (VENDORCODE *)This option allows a vendor to more easily migrate to a new set of encryption seeds while still supporting old license files in the field. This option would be used in new applications until all the old license files in the field were replaced. Here's an example of the use of ALT_ENCRYPTION:Your company has 3 products, which are widely available, and you want eventually to make the old license files obsolete. You could do this by generating new license files with a new set of encryption seeds (the two hexadecimal numbers in lm_code.h that your company defines), but you might want to phase this in, since the 3 products will not all be re-released with the new encryption seeds for a year and you want the old versions to continue to work.The solution is to make the new products support both old and new license files, shipping with new vendor daemons that will accept both old and new license files. At this point, license files would be shipped generated with the new encryption seeds.Once all three new products become available, and all new license files are generated with the new encryption seeds; later versions of the products and vendor daemons can be released that will only accept the new encryption seeds.Here is an excerpt from the interim client code:lm_code.h:
/* newcode */
LM_CODE(newcode, ENCRYPTION_CODE_1,
ENCRYPTION_CODE_2, VENDOR_KEY1, VENDOR_KEY2,
                        VENDOR_KEY3, VENDOR_KEY4, VENDOR_KEY5);
/* oldcode */
LM_CODE(oldcode, OLD_ENCRYPTION_CODE_1,
                        OLD_ENCRYPTION_CODE_2, VENDOR_KEY1, VENDOR_KEY2,
                        VENDOR_KEY3, VENDOR_KEY4, VENDOR_KEY5);
application.c:
rc = lc_init((LM_HANDLE *)0, VENDOR_NAME, &newcode, &lm_job);
lc_set_attr(lm_job, LM_A_ALT_ENCRYPTION, &oldcode);

/* lc_checkout will try both newcode and oldcode */
rc = lc_checkout(lm_job, feature, version, checkout_cnt,
LM_CO_NOWAIT, &newcode, LM_DUP_NONE);Also, in the ls_vendor.c file, the first version of the vendor daemon would need to support both encryption seeds, as follows:/*
 * Read license files using either vendorkeys and
 * accept connections from clients using either
 * vendorkeys
 */
VENDORCODE vendorkeys[] = {
   {VENDORCODE_4, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2,
 VENDOR_KEY1, VENDOR_KEY2, VENDOR_KEY3, 
VENDOR_KEY4,FLEXLM_VERSION, FLEXLM_REVISION},
  {VENDORCODE_4, OLD_ENCRYPTION_CODE_1, 
OLD_ENCRYPTION_CODE_2,
  VENDOR_KEY1, VENDOR_KEY2, VENDOR_KEY3, VENDOR_KEY4,
FLEXLM_VERSION, FLEXLM_REVISION}};The final version of the vendor daemon, (the one that would no longer support old license files) would have the second vendor key (the one with OLD_ENCRYPT_CODE_n) removed, and the next release of the applications would have the lc_set_attr(LM_A_ALT_ENCRYPTION,...) call removed.Default: NoneLBL="" HELPID=""ID="90534"LM_A_ANY_ENABLEDType: shortThis option controls whether the "ANY" hostid type will be allowed by your application.ID="chap066"Default: 1 (enabled)LBL="" HELPID=""See alsoIDREF="20049" TYPE="TITLE""Special Hostids"LBL="" HELPID=""ID="53814"LM_A_CHECK_INTERVALID="chap067"ID="chap068"ID="chap069"Type: intLM_A_CHECK_INTERVAL controls the client's detection of daemon failures. FLEXlm client routines will install a SIGALRMID="chap0610" handler or no handler at all, based on LM_A_CHECK_INTERVAL. The minimum value for LM_A_CHECK_INTERVAL is 30 seconds.Default: 120 second interval.The results of possible settings of this variable is:COLUMNS="3"LBL="6-1"Table 6-1 LM_A_CHECK_INTERVAL SettingsLEFT="0" WIDTH="79"VariableLEFT="85" WIDTH="64"SettingLEFT="155" WIDTH="115"ResultLEFT="0" WIDTH="79"check_intervalLEFT="85" WIDTH="64"< 0LEFT="155" WIDTH="115"No SIGALRM timer 
installed.IDREF="chap06TF0a"aLEFT="0" WIDTH="79"check_intervalLEFT="85" WIDTH="64">= 0, < 30LEFT="155" WIDTH="115"Old interval unchanged.LEFT="0" WIDTH="79"check_intervalLEFT="85" WIDTH="64">= 30LEFT="155" WIDTH="115"Timer interval.LBL="a" ID="chap06TF0a"If you do not enable FLEXlm's timer, you must call lc_timer() 
periodically to check the status of the license. You cannot set 
check_interval to less than 30 seconds with lc_set_attr().The timer handler remembers any other handler that was installed, and calls the previously installed handler when it has checked the socket. If it is unacceptable to have handlers installed for either of these signals (or to have the intervals changed), then set check_interval < 0. If you set check_interval < 0, then no checking of the daemon will be done unless you call lc_timer periodically. You could, of course, do this from your own timer signal handler.LBL="" HELPID=""See alsoIDREF="51258" TYPE="TITLE""lc_timer"IDREF="85668" TYPE="TITLE""Communications Transport (TCP vs. UDP)"IDREF="76230" TYPE="TITLE""End-User Options File", the section on TIMEOUTLBL="" HELPID=""ID="14252"LM_A_CHECKOUT_DATAID="chap0611"Type: (char *)This option allows you to send some vendor-specific data to the vendor daemon in addition to the normal USER/HOST/DISPLAY data which is sent. This checkout data can be used to group duplicates in addition to the USER/HOST/DISPLAY by setting the ID="chap0612"LM_DUP_VENDOR bit in the duplicate grouping bitmask passed to lc_checkout()ID="chap0613". The checkout data can be modified before each individual lc_checkout() or ID="chap0614"lc_checkin()call. This makes it possible for a process to check out several different independent licenses (if LM_DUP_VENDOR is in the duplicate mask), and to checkin the licenses independently by setting the vendor-defined field each time before calling lc_checkin(). The vendor-defined data is a character string, with a maximum size of MAX_VENDOR_CHECKOUT_DATAID="chap0615" bytes (32).You have the option in your vendor daemon of allowing this data to be visible or not. The daemon variable ls_show_vendor_defID="chap0616" controls whether the vendor-defined field is visible to your end-users via lmstatID="chap0617" (or any utility which calls lc_userlist()ID="chap0618").Each checkout or checkin request uses the value of the vendor-defined data from the last lc_set_attr() call. Checkins will only be performed for features on which the vendor-defined field matches.Default: NoneLBL="" HELPID=""LM_A_CHECKOUTFILTERID="chap0619"Type: Pointer to a function returning int.The checkout filter allows you to examine the FEATURE line which is going to be used in an lc_checkout()ID="chap0620" request, and either allow the checkout to proceed or reject this particular FEATURE line. This filter function will be called with a pointer to the CONFIG struct which is about to be checked out. If this function returns 0, then checkout proceeds, otherwise if this function returns a non-zero value, then the checkout proceeds to the next available FEATURE line. If this function returns a non-zero value and sets the error obtainable from lc_get_errno(), then this value will be the return of lc_checkout(), otherwise, if lc_get_errno() is set to 0 by this function, then the result of lc_checkout() would be LM_LOCALFILTERID="chap0621" (assuming the checkout was not attempted on further FEATURE lines, or that another FEATURE line did not produce a LM_MAXUSERS result).Default: NoneLBL="" HELPID=""ID="62518"LM_A_COMM_TRANSPORTType: shortCommunications transport to use, one of LM_TCPID="chap0622" or LM_UDPID="chap0623". It is recommended that this be set by the end-user (license administrator), not set in the application.Default:LM_TCP.NoteNot supported on VMS.ID="chap0624"LBL="" HELPID=""See alsoIDREF="85668" TYPE="TITLE""Communications Transport (TCP vs. UDP)"IDREF="76230" TYPE="TITLE""End-User Options File"LBL="" HELPID=""LM_A_CONN_TIMEOUTID="chap0625"Type: intIf specified as a positive integer, conn_timeout will set the timeout for connection to a vendor daemon, as well as subsequent reads from the daemon. For connect(), this timeout overrides the TCP/IP default of 45 seconds. lc_set_attr() will return LM_BADPARAM, while will also be returned from lc_get_errno(), if this value is <0.NotePrior to FLEXlm v4.0, this timeout only applied to connect().Default: 10 secondsLBL="" HELPID=""ID="34313"LM_A_CRYPT_CASE_SENSITIVEID="chap0626"Type: shortIf specified as a non-zero integer, LM_A_CRYPT_CASE_SENSITIVE will cause the output of the encryption routine to be compared to the code in the license file with a case-sensitive comparison. Default: Case-insensitive comparison. LBL="" HELPID=""LM_A_DIAGS_ENABLEDID="chap0627"Type: shortThis option allows FLEXlm to produce some diagnostic output for failures of the lc_checkout() call if the environment variable ID="chap0628"FLEXLM_DIAGNOSTICS is set. If LM_A_DIAGS_ENABLED is set to 0, this diagnostic information is unconditionally disabled. The FLEXLM_DIAGNOSTICS environment variable can be used by your end-users to obtain more information if a checkout fails. If FLEXLM_DIAGNOSTICS is set, an lc_perror() call is made. If FLEXLM_DIAGNOSTICS is set to "2", then in addition to the lc_perror() call, the arguments to lc_checkout() (except for the KEY information) are printed to stderr, also. The diagnostics are enabled by default. Globetrotter Software recommends that this be left enabled. This will allow us to help you debug your end-users' problems with error messages more explicit than, "can't get license". In these situations, we are unable to help. We developed and distributed the FLEXLM_DIAGNOSTICS to enable us (and your support people) to help your end-users more effectively.Default: On (1).LBL="" HELPID=""ID="76398"LM_A_DISABLE_ENVType: shortIf set to a non-zero value, disable_env will force the FLEXlm client routines to disregard the setting of the ID="chap0629"LM_LICENSE_FILE environment variable.Globetrotter Software strongly recommends that this default not be changed. If you disable the environment variable, see the FLEXlm Style Guide, which is available on-line with the GLOBEhelp browser.Default:LM_LICENSE_FILEID="chap0630" environment variable enabled.LBL="" HELPID=""See alsoIDREF="67269" TYPE="TITLE""LM_A_LICENSE_FILE"IDREF="35936" TYPE="TITLE""Locating the License File"LBL="" HELPID=""ID="35603"LM_A_DISPLAY_OVERRIDEID="chap0631"Type: (char *)This string, if specified, will be used to override the display name as derived from the UNIX ttyname() system call.NoteThis value cannot be changed for a job after the initial connection to the vendor daemon.Default: No override of display name.The most common use of this attribute is for setting the display to the X-Display name. Unfortunately, the only reliable way of obtaining the name of the X-Display is via an X call. Therefore, this can only be done by the X-based application, after ID="chap0632"XOpenDisplayID="chap0633" (or XtAppInitializeID="chap0634") has been called.DisplayString(<display>)
ID="chap0635"In addition, it is essential to note that there are at least three possible aliases for using the monitor attached to the computer in use: "localhost:0", "UNIX:0" and ":0". If any of these are used, the lc_set_attr(LM_A_DISPLAY_OVERRIDE) should use the result of gethostname()ID="chap0636" instead. Finally, it may be safest to use the IP address as a string, to avoid the problem of aliases for a particular display host.The following example code can be used for this purpose:/* 
 * assume XOpenDisplay or XtAppInitialize has already been called 
 */
#include <netdb.h>
char display_name[50], *cp, display_ip[9];
struct hostent *he;
/*...*/
strncpy(display_name, DisplayString(display), 49);
if (!(strncmp(display_name, ":0", 2)) ||
                        !(strncmp(display_name, "UNIX:0", 6)) ||
                        !(strncmp(display_name, "localhost:0", 12)))
{
  static char d[50];
gethostname(d, 47);
if (*d)
{
strcat(d, ":0");
display_name = d;
}
}
he = gethostbyname(display_name)
sprintf(display_ip, "%x", *((int *)he->h_addr));
lc_set_attr(LM_A_DISPLAY_OVERRIDE, display_ip);LBL="" HELPID=""LM_A_EF_1, LM_A_EF_2, LM_A_EF_3, LM_A_EF_4, LM_A_EF_5ID="chap0637"Type: intThese five event flags are used on VMS only. FLEXID="chap0638"lm client routines assign these event flags dynamically. You can reassign the event flags used by FLEXlm by calling lc_set_attr() for the attributes ID="chap0639"LM_A_EF_1, LM_A_EF_2, LM_A_EF_3., LM_A_EF_4, or LM_A_EF_5. The only restriction is that flag #1 and flag #2 must be in the same event flag cluster. If you reset them, do it before calling any FLEXlm routines. You can use lib$get_ef and lib$free_ef to assign event flag numbers, if desired.Default: Event flags assigned with lib$get_ef()LBL="" HELPID=""LM_A_ETHERNET_BOARDSID="chap0640"Type: (char **)This table of ethernet devices, if specified, will be searched before the standard FLEXlm ethernet device table is searched. This can be used either to override the FLEXlm device order, or to add new devices that are not built into the FLEXlm table. This table is used for both Ultrix and VMS systems but not for Windows and Windows NT systems. The table should be specified as a NULL-terminated array of character string pointers, as in the following example (this example is the standard Ultrix table):ID="chap0641"ID="chap0642"char *our_ethernet_boards[] =
"qe0",
"de0",
"se0",
"ni0",
"ln0",
"xna0",
"ne0",
0};
lc_set_attr(LM_A_ETHERNET_BOARDS, our_ethernet_boards);For VMS systems, be sure to include each interface in the table four times as xxa0:, xxa1:, xxa2:, and xxa3: (for device xx). The following example is the FLEXlm standard ethernet device table for VMS:{"flexlm_hostid0", "flexlm_hostid1", "flexlm_hostid2", "flexlm_hostid3",
"_xqa0:", "_xqa1:", "_xqa2:", "_xqa3:",  /* DELQA, DEQNA, DESQA */
"_xea0:", "_xea1:", "_xea2:", "_xea3:",  /* DEUNA, DELUA */
"_esa0:", "_esa1:", "_esa2:", "_esa3:",  /* DESVA */
"_eta0:", "_eta1:", "_eta2:", "_eta3:",  /* DEBNA */
"_eza0:", "_eza1:", "_eza2:", "_eza3:",  /* uVAX 4000 */
"_exa0:", "_exa1:", "_exa2:", "_exa3:",  /* VAX 9000 */
"_ewa0:", "_ewa1:", "_ewa2:", "_ewa3:",  /* Alpha */
0 };In order to update your daemon for a new set of ethernet addresses, you will need to put this call to lc_set_attr() into an initialization routine and set ls_user_init1ID="chap0643" to the name of your initialization routine, as in the following example:In any source module:void daemon_init()
{
static char *new_board[] = {"new_board", 0};

lc_set_attr(LM_A_ETHERNET_BOARDS, new_board);
}In ls_vendor.c:extern void daemon_init();
void (*ls_user_init1)() = daemon_init;Then, modify the makefile for the daemon to include your module with daemon_init(), or put this module into the ID="chap0644"liblmgr_as.a archive. On Ultrix systems, CONFIG_DAEMONID="chap0645" will automatically make the edit to ls_vendor.c if you answer "daemon_init" to the daemon initialization (START) question.Default: Only standard FLEXlm table searched.LBL="" HELPID=""ID="40191"LM_A_HOST_OVERRIDEID="chap0646"Type: (char *)This string, if specified, will be used to override the hostname as derived from the UNIX gethostname()ID="chap0647" system call.NoteThis value cannot be changed for a job after the initial connection to the vendor daemon.Default: No override of host name.LBL="" HELPID=""ID="17720"LM_A_HOSTID_PARSEType: Pointer to a function returning int.int parse_id(HOSTID *id, char *hostid)
ID="chap0648"LM_A_HOSTID_PARSE, LM_A_VENDOR_GETHOSTID, LM_A_VENDOR_PRINTHOSTID, ID="chap0649"ID="chap0650"ID="chap0651"and LM_A_VENDOR_CHECKIDID="chap0652" are used by vendors who want to install their own vendor-defined hostid to extend the types of hostids which FLEXID="chap0653"lm can support.The hostid parsing routine takes the input "hostid" character string and returns the structure pointed to by "id". If successful, parse_id returns zero, otherwise a non-zero value.ID="chap0654"Default: NoneLBL="" HELPID=""See AlsoIDREF="66223" TYPE="TITLE""Vendor-defined hostid"LBL="" HELPID=""ID="75080"LM_A_LF_LISTID="chap0655"Type: pointer to (char **)List of all license files searched for features. Useful for failure messages for debugging. Note that lc_lic_where() only prints one file, the one last searched. For example:#include "lm_attr.h"
/*...*/
char **cp;
lc_get_attr(job, LM_A_LF_LIST, (LM_A_VAL_TYPE)&cp);
if (cp)
{
puts("files searched are: ");
while (*cp)
printf("\t%s\n",*cp++);
}LBL="" HELPID=""ID="67269"LM_A_LICENSE_FILEType: (char *)It is recommended that LM_A_LICENSE_FILE_PTR be used instead of LM_A_LICENSE_FILE.NoteIn FLEXlm v3.0 and later, Globetrotter Software strongly recommends the use of LM_A_LICENSE_FILE_PTRID="chap0656" rather than LM_A_LICENSE_FILE. Globetrotter Software strongly recommends that all code of the form:char path[MAXPATHLEN+1];
lc_get_attr(LM_A_LICENSE_FILE, path);be changed to:char *path;
lc_get_attr(LM_A_LICENSE_FILE, &path);LBL="" HELPID=""See alsoIDREF="92403" TYPE="TITLE""LM_A_LICENSE_FILE_PTR"LBL="" HELPID=""ID="92403"LM_A_LICENSE_FILE_PTRID="chap0657"Type: (char *), lc_set_attr,            or pointer to (char *), lc_get_attrThis string will be used as the default license file pathname, overriding /usr/local/flexlm/licenses/license.dat (or C:\FLEXLM\LICENSE.DAT for Windows and Windows NT), unless the LM_LICENSE_FILE environment variable is set. To override LM_LICENSE_FILE, use LM_A_DISABLE_ENV.lc_get_attr() expects an address of a (char *) pointer; the pointer's value will be set to the license file, but no data will be copied. If you want to modify the data, you should make a private copy. For example:char *path;
lc_get_attr(job, LM_A_LICENSE_FILE_PTR, (short *)&path);In practice, it is recommended that if you use LM_A_LICENSE_FILE_PTR with LM_A_DISABLE_ENV, you should do it in a manner similar to the following, to preserve the existing value of the LM_LICENSE_FILE environment variable:char *currenv;
char newenv[LM_MAXPATHLEN];
char *desired_license_location = "/usr/product/license.dat"; 
currenv = getenv("LM_LICENSE_FILE");
if (!currenv) 
strcpy(newenv, desired_license_location);
else
/*
 *Create a colon-separated list, with our location last
 */
sprintf(newenv, "%s:%s", crrrenv, desired_license_location);
lc_set_attr(LM_A_DISABLE_ENV, (LM_A_VAL_TYPE) 1);
lc_set_attr(LM_A_LICENSE_FILE_PTR, newenv);NoteOn VMS systems, the default license file is SYS$COMMON:[SYSMGR]flexlm.datLBL="" HELPID=""See alsoIDREF="67269" TYPE="TITLE""LM_A_LICENSE_FILE"IDREF="76398" TYPE="TITLE""LM_A_DISABLE_ENV"IDREF="35936" TYPE="TITLE""Locating the License File"LBL="" HELPID=""ID="51599"LM_A_LINGERType: longThis option controls the license linger time for your application. Any checkout performed after setting LINGER to a non-zero value will cause the license to be held by the vendor daemon for the specified number of seconds after either a checkin or your process dies. The vendor daemon only checks for lingering licenses once per minute, which will define the limit the granularity of this setting.ID="chap0658"Default: 0 (No linger).LBL="" HELPID=""See AlsoIDREF="80393" TYPE="TITLE""Lingering Licenses"IDREF="92354" TYPE="TITLE""Vendor daemon Support Routines"IDREF="76230" TYPE="TITLE""End-User Options File"LBL="" HELPID=""ID="78294"LM_A_MASTERID="chap0659"Type: (char *)Gets the name of the master server when redundant servers are being used. This must only be used after the client is already connected to a server, via lm_userlist(), lm_checkout(), or lc_get_attr(LM_A_VD_*...).LBL="" HELPID=""Error returnsLM_BADPARAMconnection not established yet.LBL="" HELPID=""ID="87030"LM_A_MAX_TIMEDIFFID="chap0660"Type: intThis field allows you to specify the maximum number of minutes that the client system's clock and the server systems's clock can differ. If set to a negative number, no check is performed. If set > 0, then the client and server's system clocks must agree within the specified number of minutes.NoteYou cannot set this parameter to 0 with lc_set_attr().Default: -1, No check performed.LBL="" HELPID=""LM_A_NO_DEMOID="chap0661"Type: shortThis field allows you to defeat the license file DEMO capability. If LM_A_NO_DEMO is set to 0, DEMO license files are allowed; if no_demo is set to a non-zero value, then DEMO license files are disallowed.Default: 0, Demo is allowed.LBL="" HELPID=""See AlsoIDREF="16686" TYPE="TITLE""DEMO Software"LBL="" HELPID=""LM_A_NO_TRAFFIC_ENCRYPTID="chap0662"Type: shortThis field allows you to defeat the encryption of traffic that happens between client and server programs. If you set this parameter to a non-zero value, client-server communications will be unencrypted, as they were in V1.x FLEXlm.Default: 0, Traffic is encrypted.LBL="" HELPID=""LM_A_PERIODIC_CALLType: Pointer to a function returning int. Return value not used.This function, if specified, will be called each LM_A_PERIODIC_COUNTID="chap0663"times that lc_timer() is called. lc_timer() is called directly or automatically depending on the value of LM_A_CHECK_INTERVALID="chap0664".Default: No periodic call.LBL="" HELPID=""See alsoIDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"IDREF="51258" TYPE="TITLE""lc_timer"LBL="" HELPID=""LM_A_PERIODIC_COUNTID="chap0665"Type: intThis is the count of how many times lc_timer()ID="chap0666" must be called before the function specified by LM_A_PERIODIC_CALL is called. lc_timer() is called directly or automatically depending on the value of LM_A_CHECK_INTERVALID="chap0667".Default: 0 (No PERIODIC_CALL).LBL="" HELPID=""See alsoIDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"IDREF="51258" TYPE="TITLE""lc_timer"LBL="" HELPID=""ID="25274"LM_A_RETRY_COUNT, LM_A_RETRY_INTERVALID="chap0668"Type: intTogether, LM_A_RETRY_COUNT and LM_A_RETRY_INTERVAL are used for automatic reconnection to a daemon. Once daemon failure is detected, the client library routines will attempt to re-connect to a daemon. If reconnection fails, then the reconnect will be re-attempted LM_A_RETRY_COUNT times at intervals of LM_A_RETRY_INTERVAL. This timing will be done with the same timer that detects the daemon's failure. If no FLEXlm timers (SIGALRM) are desired, set LM_A_RETRY_INTERVAL to a negative value. The minimum value for LM_A_RETRY_INTERVAL is 30 seconds.The default for LM_A_RETRY_COUNT is 5; the default for LM_A_RETRY_INTERVAL is 60.LBL="" HELPID=""See alsoIDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"IDREF="51258" TYPE="TITLE""lc_timer"LBL="" HELPID=""LM_A_SETITIMERID="chap0669"Type: Pointer to a function returning void.This option allows you to replace setitimer()ID="chap0670"with a routine of your choice. This might be done, for example, if your application uses XView or Sunview, where ID="chap0671"ID="chap0672"alarm()ID="chap0673" and setitimer() are not allowed.The FLEXlm routine that connects to the daemon (l_basic_conn()ID="chap0674") uses SIGALRM and the real timer even if the standard FLEXID="chap0675"lm timer routines have been disabled by setting ID="chap0676"LM_A_CHECK_INTERVAL and ID="chap0677"LM_A_RETRY_INTERVAL to -1. Although l_basic_conn() replaces the old values for the SIGALRM handler and the old timer interval, this operation is incompatible with the Xview function ID="chap0678"notify_setitimer(). As a result, you may replace the timer/signal handling in l_basic_conn() (so that you can use notify_setitimer) with the following two calls:lc_set_attr(LM_A_SETITIMER, new_setitimer_func);
lc_set_attr(LM_A_SIGNAL, new_signal_func);
ID="chap0679"where: is the:new_setitimer_funcis a function to replace setitimer. It must take the same parameters as setitimer and return void.new_signal_funcis a function to replace signal. It must take the same parameters as signal and return a pointer to a function returning either an int or void, depending on the platform. (it should return the same type as signal() returns on the platform).NoteThe FLEXlm implementation of setitimer() uses the sys$setimr() call on VMS.Default:setitimer().LBL="" HELPID=""LM_A_SIGNALID="chap0680"Type: Pointer to a function returning (pointer to function returning void).This option allows you to replace "signal()ID="chap0681" with a routine of your choice. This would be done, for example, if your application uses XView or Sunview, where SIGALRM is not allowed, or if you want to replace signal with sigaction. Make sure your replacement function takes the same arguments as signal. This function is not supported on VMS, Windows, or Windows NT systems.ID="chap0682"ID="chap0683"ID="chap0684"Default:signal().LBL="" HELPID=""ID="85076"LM_A_UDP_TIMEOUTType: intThis sets the amount of time (in seconds) during which a client must communicate with the vendor daemon for the UDP communications transport. If the client does not communicate within this interval (by calling ID="chap0685"lc_timer()), then the vendor daemon will release the license just as if an lc_checkin()ID="chap0686" call had been made.Default: 45 minutes (2700).LBL="" HELPID=""See alsoIDREF="51258" TYPE="TITLE""lc_timer"IDREF="85668" TYPE="TITLE""Communications Transport (TCP vs. UDP)"LBL="" HELPID=""LM_A_USE_START_DATEID="chap0687"Type: shortThis field allows you to use the start date that is built into the license file for each feature. If the current system date is earlier than the start date, then checkouts of the feature will be disabled. If set to a non-zero value, the start date will be used. LM_A_USE_START_DATE can only be turned off with lc_set_attr().NoteIf you use your own encryption routine, you must either disable the use of the start date, or create an license key which contains a valid start date. See the description of the LM_A_USER_CRYPTID="chap0688" attribute.Default: 1, Use start date.LBL="" HELPID=""ID="37464"LM_A_USER_CRYPTID="chap0689"Type: Pointer to a function returning (char *). Return value is the license key.The function pointer crypt can be set to point to a vendor-supplied encryption routine to be used in place of the default routine. Default: FLEXlm standard encryption routine. (See ID="chap0690"IDREF="55175" TYPE="TITLE""LM_CODE" for more information.)The crypt routine is called as follows:(*crypt)(conf,sdate, key);where: is the:(CONFIG *) confID="chap0691"CONFIG structure pointer.(char *) sdate4-byte encoded start date.(VENDORCODE *) keyID="chap0692"Pointer to the 1st argument to the ID="chap0693"LM_CODE macro in lm_code.h, where code.data[0] and code.data[1] have been XOR'd with VENDOR_KEY5ID="chap0694", so that the encryption seeds are as specified in lm_code.h.The function must return a character string (maximum length of MAX_CRYPT_LEN, minimum length of 8 characters), which is the encrypted code that should be in the license file. If you use your own encryption routine, then modify ID="chap0695"create_lic.c and lmcrypter.c to call it, so that it can generate the correct license keys for your customers. You must also specify the same encryption routine when building your vendor daemon. The standard encryption routine encrypts and encodes the sdate parameter into the features code. sdate can be extracted from a license file FEATURE line's code field as follows:l_extract_date(code)
ID="chap0696"where code is the output of the (standard) encryption routine. l_extract_date() returns char *.NoteIf your encryption routine has any order dependencies, it should sort the hostid's of the servers, so that you will obtain repeatable results when the end-user re-orders the SERVER lines to bias the master node selection.ID="chap0697"LBL="" HELPID=""See AlsoIDREF="55175" TYPE="TITLE""LM_CODE"ID="chap0698"IDREF="84652" TYPE="TITLE""The create_license Utility"ID="chap0699"IDREF="32035" TYPE="TITLE""lc_crypt"IDREF="33883" TYPE="TITLE""lc_cryptstr"IDREF="34134" TYPE="TITLE""ls_user_crypt"LBL="" HELPID=""ID="26627"LM_A_USER_EXITCALLID="chap06100"Type:Pointer to a function returning int. Return value unused.The function pointer LM_A_USER_EXITCALL can be set to point to the routine that is to receive control if reconnection fails after LM_A__RETRY_COUNT attempts. If no routine is specified, then lc_perrorID="chap06101" is called, and the program will exit.   If the LM_A_USER_EXITCALL function returns control to its caller, program operation will continue as if no license had been checked out. The LM_A_USER_EXITCALL routine is called as follows:(*exitcall)(feature)Default: No user exit handler (program exits).The exitcall() function will be called for each feature that the program had checked out, if that feature's license is lost. If the exitcall() function returns, it will be called again for the next feature. After it has been called for all features, control will return to the program at the point where detection of loss of licenses occurred.LBL="" HELPID=""See alsoID="chap06102"IDREF="51258" TYPE="TITLE""lc_timer"LBL="" HELPID=""ID="37713"LM_A_USER_OVERRIDEID="chap06103"Type: (char *)This string, if specified, will be used to override the username as derived from the UNIX password file. Vendors of software for Apollo systems might want to use this field to avoid the ID="chap06104"/etc/passwd lookup for Aegis-only sites.NoteThis value cannot be changed after the initial connection to the vendor daemon.Default: No override of username.LBL="" HELPID=""ID="32158"LM_A_USER_RECONNECTID="chap06105"ID="chap06106"ID="chap06107"Type: Pointer to a function returning int. Return value unused.This reconnection routine is called each time just before a reconnection is attempted, either automatically as a result of the timer set by ID="chap06108"LM_A_CHECK_INTERVAL, or as a result of the application program calling lc_timerID="chap06109". Default: No user reconnection handler.The reconnection routine is called as follows:(*reconnect)(feature, pass, total_attempts, interval)where: is the:(char *)featureFeature name.(int)pass Current attempt #.(int)total_attemptsMaximum number of passes that will be attempted.(int)intervalTime in seconds between reconnection attempts.If LM_A_RETRY_COUNT is set to a value <=0, then the reconnect handler will not be called.LBL="" HELPID=""See also IDREF="51258" TYPE="TITLE""lc_timer"IDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"LBL="" HELPID=""ID="10195"LM_A_USER_RECONNECT_DONEID="chap06110"Type: Pointer to a function returning int. Return value unused.This function will be called when reconnection is successfully completed. Default: No user reconnect_done handler.The reconnection done handler is called as follows:(*reconnect_done)(feature, tries, total_attempts, interval)where: is the:(char *)feature feature name.(int)triesnumber of attempts that were required to re-connect for this feature.(int)total_attemptsmaximum number of retry attempts that would be made.(int)intervalinterval in seconds between reconnection attempts.LBL="" HELPID=""LM_A_VD_GENERIC_INFO, LM_A_VD_FEATURE_INFOID="chap06111"ID="chap06112"Type: Pointer to LM_VD_GENERIC_INFO or pointer to LM_VD_FEATURE_INFOBoth attributes get information from your vendor daemon. LM_A_VD_GENERIC_INFO gets information which is not specific to a feature, and which is mostly found in ls_vendor.c.LM_A_VD_FEATURE_INFO gets information about a particular feature, and provides an accurate count of licenses used, users queued, etc., and works correctly when a license file has more than one FEATURE or INCREMENT line for the same feature name.These attributes will only work on your vendor daemon. If a request is made for a feature only served by a different vendor daemon, then lc_get_errno() is set to LM_NOADMINAPIID="chap06113".A pointer to a struct is given as an argument to lc_get_attr, and upon successful return, this struct is filled with the appropriate information. The following example illustrates the use of both attributes:#include "lm_client.h"
#include "lm_code.h"
#include "lm_attr.h"
/* ... */
/* 
 * Print out GENERIC and FEATURE information for every
 * license file line for a given feature name
 */
void
vendor_daemon_info(job, feature)
LM_HANDLE *job; /* if you want to use lc_* functions instead */
char *feature;
{
  CONFIG *conf, *c;
  LM_VD_GENERIC_INFO gi;
  LM_VD_FEATURE_INFO fi;
  int first = 1;

c = (CONFIG *)0; 

for (conf = lc_next_conf(job, feature, &c);conf; 
conf=lc_next_conf(job, feature, &c))
{
if (first)
{
/* 
 * get generic daemon info
 */
gi.feat = conf;
if (lc_get_attr(job, LM_A_VD_GENERIC_INFO,(short *)&gi))
{
lc_perror(job, "LM_A_VD_GENERIC_INFO");
}
else 
{
printf("conn-timeout = %d\n", 
gi.conn_timeout);
printf(" user_init1 %d\n", gi.user_init1);
printf(" user_init2 %d\n", gi.user_init2);
printf(" outfilter %d\n", gi.outfilter);
printf(" infilter %d\n", gi.infilter);
printf(" callback %d\n", gi.callback);
printf(" vendor_msg %d\n", gi.vendor_msg);
printf(" vendor_challenge %d\n", 
gi.vendor_challenge);
printf(" lockfile %d\n", gi.lockfile);
printf(" read_wait %d\n", gi.read_wait);
printf(" dump_send_data %d\n", 
gi.dump_send_data);
printf(" normal_hostid %d\n",
gi.normal_hostid);
printf(" conn_timeout %d\n", 
gi.conn_timeout);
printf(" enforce_startdate %d\n", 
gi.enforce_startdate);
printf(" tell_startdate %d\n", 
gi.tell_startdate);
printf(" minimum_user_timeout %d\n", 
   gi.minimum_user_timeout);
printf(" min_lmremove %d\n", 
gi.min_lmremove);
printf(" use_featset %d\n", 
gi.use_featset);
printf(" dup_sel 0x%x\n", gi.dup_sel);
printf(" use_all_feature_lines %d\n",
    gi.use_all_feature_lines);
printf(" do_checkroot %d\n", 
gi.do_checkroot);
printf(" show_vendor_def %d\n", 
gi.show_vendor_def);
printf(" allow_borrow %d\n", 
gi.allow_borrow);
}
first = 0;
}
fi.feat = conf;
if (lc_get_attr(job, LM_A_VD_FEATURE_INFO, (short *)&fi))
{
lc_perror(job, "LM_A_VD_FEATURE_INFO");
}
else
{
/* 
 * get specific feature info
 */
printf("lowwater %d\n", fi.lowwater);
printf("timeout %d\n", fi.timeout);
printf("linger %d\n", fi.linger);
printf("dup_select 0x%x\n", fi.dup_select);
printf("res %d\n", fi.res);
printf("maxborrow %d\n", fi.maxborrow);
printf("lic_in_use %d\n", fi.lic_in_use);
printf("user_cnt %d\n", fi.user_cnt);
printf("lic_avail %d\n", fi.lic_avail);
printf("queue_cnt %d\n", fi.queue_cnt);
printf("overdraft %d\n", fi.overdraft);
}
}
}LBL="" HELPID=""LM_A_VENDOR_CHECKIDID="chap06114"Type: Pointer to a function returning int.int check_id(HOSTID *id1, HOSTID *id2)
ID="chap06115"The vendor_checkid routine takes two HOSTID pointers, and returns 0 if they are different; 1 if they are the same. This is for supporting vendor-defined hostid.Default: None.LBL="" HELPID=""LM_A_VENDOR_GETHOSTIDID="chap06116"Type: Pointer to a function returning (HOSTID *).ID="chap06117"HOSTID *get_hostid(short idtype)The vendor_gethostid routine returns a pointer to a HOSTID struct after retrieving the hostid of type "idtype". This is for supporting vendor-defined hostid.ID="chap06118"Default: None.LBL="" HELPID=""See alsoIDREF="17720" TYPE="TITLE""LM_A_HOSTID_PARSE"IDREF="66223" TYPE="TITLE""Vendor-defined hostid"LBL="" HELPID=""LM_A_VENDOR_PRINTHOSTIDID="chap06119"Type: Pointer to a function returning (char *).char *print_id(HOSTID *id)
ID="chap06120"The print_id routine takes the input "id" struct and returns a pointer to the corresponding string. This is for supporting vendor-defined hostid.This string should be <= MAX_HOSTID_LEN bytesID="chap06121"Default: None.LBL="" HELPID=""See alsoIDREF="17720" TYPE="TITLE""LM_A_HOSTID_PARSE"IDREF="66223" TYPE="TITLE""Vendor-defined hostid"LBL="" HELPID=""ID="29254"LM_A_VERSION and LM_A_REVISIONID="chap06122"Type: shortFLEXlm version. Cannot be set. Only for use with lc_get_attr().Default: Version and revision of the libraries you have linked with.LBL="7"Configuring License DaemonsLBL="" HELPID=""ID="96005"lmgrdID="chap071"The purpose of lmgrd is to:start and maintain all the vendor daemons, listed in the DAEMON lines of the license file, and refer application checkout (or other) requests to the correct vendor daemon.lmgrd is a standard component of FLEXlm that neither requires nor allows for vendor customization. The license daemon does allow the license file location and the server-to-server connection timeout interval to be set by the end-user. These options are set by command line arguments when starting lmgrd. The command line for lmgrd is:lmgrd [-2 ] [-2 -p] [-b] [-c license_file] [-l logfile]  [-s timestamp_interval] [-t timeout_interval] [-x lmdown|lmremove ]
  [-v] [-z] [-f finder_file]where: is the:-2Use the FLEXlm v2.x startup arguments.-p -2Restricts usage of lmdown, ID="chap072"lmreread, and lmremove to a FLEXlm administrator who is by default root. If there is a UNIX group called, "lmadmin" then use is restricted to only members of that group. If root is not a member of this group, then root does not have permission to use any of the above utilities. (Default: no license administrator required).ID="chap073"-bSpecifies that the pre-v2.0 vendor daemon startup is to be used. When this option is present, FLEXlm v1.x and v2.1 vendor daemons can be controlled by the same lmgrd. If you have v2.0 and v2.1 vendor daemons, DO NOT use the -b switch. v2.1 and later vendor daemons can be started either with or without the -b switch. (-b is the default in FLEXlm v3.0).license_filepathname to the license file. (default: /usr/local/flexlm/licenses/license.dat on UNIX systems, or C:\FLEXLM\LICENSE.DAT on Windows and Windows NT systems).-l logfileID="chap074"Debug log file produced by the daemons. (default: stdout)ID="chap075"-s timestamp_intervalID="chap076"logfile time stamp interval, in minutes (default: 360 minutes).timeout_intervalID="chap077"time interval (in seconds) during which daemons must complete connections to each other. The default value is 10 seconds. A longer value may be desirable if the daemons are being run on busy systems and/or a very heavily loaded network.-x lmdown|lmremoveID="chap078"ID="chap079"disable lmdown or lmremove commands.-zRun in the foreground. lmgrd runs in the background by default.-vPrints lmgrd's version number and copyright and exits.-f finder_fileWith this option, lmgrd is run as a license finder. See Section IDREF="88104" TYPE="TITLE""The License Finder (lmgrd -f)".-appRun lmgrd as an application from Windows NT console. This option is Windows NT only.NoteThe license file pathname can also be specified by setting the environment variable LM_LICENSE_FILEID="chap0710" to the file's pathname. The -c path specification will override the setting of LM_LICENSE_FILE.LBL="" HELPID=""See alsoIDREF="88104" TYPE="TITLE""The License Finder (lmgrd -f)"LBL="" HELPID=""No lmgrd on VMSThe VMS version of FLEXlm does not use lmgrd, so clients connect directly with the vendor daemons. This implies that each vendor daemon is started independently in the system startup command file. The command line for starting a daemon is:daemon_name [-c license_file_path] [-l log_file_path]where: is the:daemon_name name of the daemon.license_file_path an alternate license file, if the LM_LICENSE_FILE environment variable is not set or if you want to override the setting of LM_LICENSE_FILE.log_file_path an optional log file name. If this option is not selected, the logging information will be written to the screen.The default license file on VMS is SYS$COMMON:[SYSMGR]flexlm.dat. You can set a new default in the vendor daemon by editing ls_vendor.c and changing the value of the (char *) variable default_license_file to be the pathname you wish for the default license file for your daemon. The end-user's license administrator can still override this setting with either the "-c" command-line option, and the end-user can set their LM_LICENSE_FILE environment variable.NoteOn VMS, the SYSNAM and SYSLCK privileges are required to run the daemons.LBL="" HELPID=""Starting lmgrd on Windows NT lmgrd can be started as an application from the Windows NT console with the app option. For example:D:\flexlm> lmgrd -app -c my_lic.datAlternatively, lmgrd can be installed as a service on a Windows NT system so that it can be managed from the control panel on NT. To install lmgrd as a service, use the INSTALL.EXE command provided by FLEXlm. For example:D:\flexlm> install d:\flexlm\lmgrd.exeNote that the full pathname to lmgrd.exe must follow the install command. You must also make sure that the full path name including drive letter for your vendor daemon is specified correctly in your license file, c:\flexlm\license.dat. FLEXlm Windows NT DLL, lmgr32.dll, must also be in the system's DLL search path.After INSTALL.EXE is run successfully, lmgrd is installed as a Windows NT service and will be started automatically each time your system is booted. To start lmgrd right after running INSTALL.EXE without rebooting your system, you may use the Service Icon from the Windows NT control panel. Look for FLEXlm Licensing Service from the dialogue box after you double click on the Service icon.To remove lmgrd from the registered service list, simple type install remove. If you wish to customize the INSTALL program, the source code and makefile for INSTALL.EXE is included in the UTILS directory.When lmgrd.exe is installed as a service on your system, you may use the following procedure to set the license file path for lmgrd by updating the system registry:Install lmgrd.exe as a service as described previously.Run Registry Editor, system32\regedt32.exeSelect HKEY_LOCAL_MACHINE:SYSTEM:CurrentControlSet:Control:Session Manager:EnvironmentFrom the menu bar, select Edit and then 'Add Value'When the Add Value dialog box is displayed, enter LM_LICENSE_FILE as Value Name, and select REG_SZ as Data Type. Click OK.At this point, the String Editor dialog box should appear, enter the full path to the license file that you wish to select. Click OK.Exit Registry Editor.Shutdown your system and restart. lmgrd.exe should now be using the selected license file. To verify this, you can view lmgrd.log in the system32 directory.LBL="" HELPID=""Pre FLEXlm v2.0 Startup ArgumentsThe startup arguments for vendor daemons changed between FLEXlm v1.x and v2.0. If you are running a configuration with a mixture of v1.x and v2.x vendor daemons, then you will need to use the b option (Note: this is the default in FLEXlm v3.0).LBL="" HELPID=""ID="95659"Privileged License Administration CommandsIf the "-2 -p" startup argument is used to lmgrd, then the user who issues an lmdown, lmreread, or lmremove command must be a "license administrator". A license administrator is:a member of the "lmadmin" group, or, if no lmadmin group exists,a member of group 0.LBL="" HELPID=""ID="88104"The License Finder (lmgrd -f)ID="chap0711"ID="chap0712"The license finder provides license file path information to FLEXlm clients so that your end-users' license administrator does not have to set LM_LICENSE_FILE environment variables for each user. The license finder provides a single license file path to all clients. On the client side, the name of the license file is determined using the following algorithm:Looks for the environment variable FLEXLM_USE_FINDER (which can be set to any value)If (1) fails, looks for the environment variable LM_LICENSE_FILEIf (1) succeeds, or (2) fails, looks for the "license finder":Uses port "FLEXLM" from the services map; if not present it uses port 744 (the "official" FLEXlm port)Attempts to connect to this port on flexlm_license_finder, flexlm_license_finder2, flexlm_license_finder3 in order. Connect timeout is fixed at 2 seconds. This is done with TCP/IP. No broadcasts are involved. (For debugging, the connect timeout can be modified by setting the FLEXLM_FINDER_TIMEOUTID="chap0713" environment variable to an integer). If the lookup of flexlm_license_finder fails, then the remainder of this step is skipped.If it can connect to any license finder, it gets the license file path from the finder.Uses the default license file if (1) (2) and (3) fail.LBL="" HELPID=""See AlsoIDREF="35936" TYPE="TITLE""Locating the License File"LBL="" HELPID=""Starting the license finderTo start the license finder, execute the following command on the node flexlm_license_finder (and optionally flexlm_license_finder2 and flexlm_license_finder3):lmgrd -f finder_filewhere: is the:finder_filelicense finder filelmgrd, when it is operating as a license finder ("-f finder_file" option), will ONLY processes the finder-specific messages, and sends the license file path back to the client. This lmgrd will NOT start any vendor daemons or process any other client request. This functionality is delivered in lmgrd so that you do not have to ship a separate executable.LBL="" HELPID=""The "finder file" formatThe "finder file" format is:DATA lfpath license_file_path1[:license_file_path2]for example:DATA lfpath /usr/local/flexlm/licenses/license.dat:1234@host2where: is the:license_file_path1...nfull path to or the port@host address of a license file or filesNoteThis format will be extended in a later release of FLEXlm to allow specification of paths that are specific to particular users, hosts, displays, and vendors.NoteThe license finder is not available on VMS systems.LBL="" HELPID=""Creating a New lmgrd ExecutableID="chap0714"All FLEXlm kits except for Windows NT contain the lmgrd library file liblmgrd.a. To create an lmgrd non-stripped executable, execute the following commands:% cc -o lmgrd liblmgrd.a liblmgr_s.a liblmgr.aLBL="" HELPID=""ID="84465"Configuring Your Vendor DaemonIn order to build your vendor daemon you must supply the following information:ID="chap0715"Your encryption seed(s).The name of the daemonname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'VENDOR_NAME in lm_code.h.If you use your own encryption routine, the routine must be specified in your vendor daemon.Your vendor daemon can be configured by editing ls_vendor.c, or by running the script ID="chap0716"CONFIG_DAEMON. (See Chapter 2, "Installing the Distribution Kit.") On VMS and Windows NT systems, you must edit the file ID="chap0717"ls_vendor.c to configure the daemon.CONFIG_DAEMON edits the files ls_vendor.c andID="chap0718"lm_code.h. The fields illustrated and described in the following sections can be edited with any text editor or via CONFIG_DAEMON.When you have completed the necessary edits to ls_vendor.cID="chap0719", the makefile will create an lmrandomID="chap0720" and then your vendor daemon by first running the lmrandom program to randomize your daemon configuration information (for additional security). For Windows NT systems, you must follow procedures listed in IDREF="14567" TYPE="TITLE""Example CONFIG_DAEMON Session" to properly configure your vendor daemon. A temporary file lsr_vendor.c is created with the randomized data. The source to lmrandom is provided on the kit so that you can customize the randomization, if you desire. One of the functions of lmrandomID="chap0721" is to remove the vendor name from the daemon executable file; the daemon name is constructed at run-time.NoteIn FLEXlm v2.4 and later, the ID="chap0722"CONFIG_DAEMON script only prompts for the daemon name, one set of encryption seeds, and the vendor keys. This is done to simplify installation when all the defaults are desired. If you wish to specify all the daemon options, use the "-x" option to CONFIG_DAEMON, which will cause it to prompt for all options as in prior FLEXlm versions.Following are the ls_vendor.c variables.LBL="" HELPID=""ID="19525"Daemon NameTo insert your vendor daemon name, the ID="chap0723"lmrandom program takes the built-in vendor_name variable from lm_code.hID="chap0724" and creates 10 single char variables with each character of your vendor name. Your daemon name no longer appears in the vendor daemon as a character string (from FLEXlm v2.4 on) until the daemon is running.NoteIn place of the lockfile used on UNIX systems, VMS daemons set the process name to: <daemon name>_FLEXlm" (truncated to 15 characters). This means that the daemon name must not contain any characters that are illegal in a VMS process name. This restriction will be removed in a future version of FLEXlm, as FLEXlm is migrated to use the VMS lock manager in place of the process name.LBL="" HELPID=""See alsoIDREF="79902" TYPE="TITLE""Installing Your FLEXlm Vendor Keys"LBL="" HELPID=""default_license_file (VMS only)ID="chap0725"ID="chap0726"This variable is set to the pathname of the (new) default license file, if the software vendor desires to override the FLEXID="chap0727"lm default of:SYS$COMMON:[SYSMGR]FLEXLM.DAT.LBL="" HELPID=""ID="67965"ls_compare_vendor_on_incrementID="chap0728"int ls_compare_vendor_on_increment = 0; /* Compare vendor-defined */INCREMENT lines are combined if the following is true:The feature names matchThe feature versions matchAny node-lock hostid, if present, matchesOptionally, the vendor-defined strings matchls_compare_vendor_on_increment gives you control whether an INCREMENT line will require the vendor string to match in order to pool its licenses. If set to a non-zero value, then the vendor string must match; if 0, then no comparison is done on the vendor string.LBL="" HELPID=""See alsoIDREF="79592" TYPE="TITLE""FEATURE or INCREMENT Line"LBL="" HELPID=""ls_compare_vendor_on_upgradeID="chap0729"int ls_compare_vendor_on_upgrade = 0; /* Compare vendor-def fields */Prior to FLEXlm v3.0, UPGRADE lines were assigned to a FEATURE/INCREMENT line if the following was true:The feature names matchThe FEATURE/INCREMENT version is >= FROMVERSION and < TOVERSION Any node-lock hostid, if present, matchesOptionally, the vendor strings matchls_compare_vendor_on_upgrade gives you control whether an UPGRADE line will require the vendor string to match in order to upgrade another license. If set to a non-zero value, then the vendor string must match; if 0, then no comparison is done on the vendor string.LBL="" HELPID=""See alsoIDREF="57505" TYPE="TITLE""UPGRADE Line"LBL="" HELPID=""ls_conn_timeoutID="chap0730"int ls_conn_timeout = MASTER_WAIT; /* How long to wait for a connection */ls_conn_timeout is the amount of time (in seconds) that vendor daemons will wait for connections from vendor daemons on other nodes when using redundant servers. It should normally not be changed. This parameter has no effect on VMS versions of FLEXID="chap0731"lm.LBL="" HELPID=""ls_crypt_case_sensitiveID="chap0732"int ls_crypt_case_sensitive = 0; /* Is license key case-sensitive? */If you have written your own encryption routine, and the output code from it is case-sensitive, set ls_crypt_case_sensitive to a non-zero value.LBL="" HELPID=""See alsoIDREF="55175" TYPE="TITLE""LM_CODE"IDREF="37464" TYPE="TITLE""LM_A_USER_CRYPT"LBL="" HELPID=""ls_daemon_periodicID="chap0733"void (*ls_daemon_periodic)() = 0; /* Vendor-defined periodic call in daemon */If you set the function pointer "ls_daemon_periodic" in ls_vendor.c to one of your functions, this function will be called approximately once per minute in the vendor daemon's main processing loop. You must insure that the .o file for this routine specified in ls_vendor.c is linked into your vendor daemon.LBL="" HELPID=""ID="24917"ls_do_checkrootID="chap0734"int ls_do_checkroot = 0; /* Perform check that we are running on the real root */To require that your vendor daemon be running on a filesystem which has its root directory as the "real" root directory of the disk, set this option. This prevents an end-user from cloning part of the UNIX file hierarchy and executing the daemon with a chrootID="chap0735" command. If this were done, the vendor daemon locking would be bypassed and the user could run as many copies of your vendor daemon as he desired.Theft by using chroot is considered to be an obscure, difficult kind of theft. The user has to have root permission, and setting up a phony / directory is a non-trivial task. It requires that the necessary parts of the OS from /etc, /dev, /bin, etc. be copied into this phony / directory, and is an ongoing administrative hassle.NoteThe check performed by ls_do_checkroot will FAIL on a diskless node. This prevents diskless nodes from acting as license servers. Globetrotter Software does NOT recommend running license daemons on diskless nodes, but if you choose to support this, you will need to set ls_do_checkroot to 0. For complete security, set ls_do_checkroot to 1. For minimization of confusion and support calls when your customers are running on diskless nodes, set ls_do_checkroot to 0.LBL="" HELPID=""ls_dump_send_dataID="chap0736"int ls_dump_send_data = 0; /* Set to non-zero value for debug output */This variable controls the debug output of transmitted daemon data. It should normally be left set to 0.LBL="" HELPID=""ls_enforce_startdateID="chap0737"int ls_enforce_startdate = 1; /* Enforce start date in features */To use the start date present in the feature line, set ls_enforce_startdate to a non-zero value.LBL="" HELPID=""See also IDREF="55175" TYPE="TITLE""LM_CODE"LBL="" HELPID=""ls_infilterID="chap0738"int (*ls_infilter)() = 0;To install a vendor-defined checkin filtering routine, initialize ID="chap0739"ls_infilter with a pointer to your routine. The checkin filter is called with no parameters. If it returns 0, the current checkin is aborted; a return of 1 allows the current checkin to continue. If the filter aborts the operation (returns 0), then it should set the error code, lc_get_errno(), appropriately. To obtain the parameters of the current checkin call, use the ls_get_attr() call described in IDREF="92354" TYPE="TITLE""Vendor daemon Support Routines".LBL="" HELPID=""ls_incallbackID="chap0740"int (*ls_incallback)() = 0;To install a vendor-defined checkin callback routine, initialize ID="chap0741"ls_incallback with a pointer to your routine. The checkin callback is called with no parameters, and the return value is unused. The checkin callback routine is called after the checkin is performed.To obtain the parameters of the current checkin call, use the ls_get_attr() call described in IDREF="92354" TYPE="TITLE""Vendor daemon Support Routines".LBL="" HELPID=""ID="65846"ls_min_lmremoveint ls_min_lmremove = 120; /* Minimum amount of time (seconds) that a...The lmremove utility could be used to bypass the license count for a feature if an end-user were to run lmremove on each user as soon as he had checked out a license. ls_min_lmremove makes the lmremove utility ineffective for a certain period of time after a user connects to the daemon (120 seconds by default). LBL="" HELPID=""See alsoIDREF="90930" TYPE="TITLE""lmremove"LBL="" HELPID=""ID="52105"ls_minimum_user_timeoutint ls_minimum_user_timeout = 900; /* Minimum user inactivity timeout (seconds)This is the minimum value (in seconds) that an end-user can set the feature's TIMEOUT value. An attempt to set a timeout less than ID="chap0742"ls_minimum_timeout will result in the minimum value being set. If ls_minimum_user_timeout is set to 0, then the user TIMEOUT option is disabled.LBL="" HELPID=""See alsoIDREF="76230" TYPE="TITLE""End-User Options File", especially TIMEOUTLBL="" HELPID=""ls_read_waitID="chap0743"int ls_read_wait = 10; /* How long to wait for solicited reads */This variable controls how long the vendor daemon will wait for a connection to be completed with another vendor daemon. The default is 10 seconds. If your daemon supports a large number of features, you may need to increase this value, since the remote daemon's feature initialization can happen during this timeout interval.LBL="" HELPID=""ls_outfilterID="chap0744"int (*ls_outfilter)() = 0;To install a vendor-defined checkout filtering routine, initialize ID="chap0745"ls_outfilter with a pointer to your routine. The checkout filter is called with no parameters. If it returns 0, the current checkout is aborted; a return of 1 allows the current checkout to continue. If the filter aborts the operation (returns 0), then it should set the error code appropriately with lc_set_errno(). The general-purpose error code LM_CHECKOUTFILTEREDID="chap0746" is used for checkout requests that are filtered, if no other FLEXlm error is appropriate.To obtain the parameters of the current checkout call, use the ls_get_attr() call described in IDREF="92354" TYPE="TITLE""Vendor daemon Support Routines".LBL="" HELPID=""ls_show_vendor_defID="chap0747"int ls_show_vendor_def = 0; /* If non-zero, the vendor daemon will send...FLEXlm v2.4 allows your client to send a vendor-defined checkout string to the daemon on each checkout request. If ls_show_vendor_def is non-zero, this data will appear in lc_userlist() calls, and hence, in lmstat output. If you use this vendor-defined checkout data and wish for your users to be able to view it with lmstat, then set ls_show_vendor_def to 1.LBL="" HELPID=""See alsoIDREF="79592" TYPE="TITLE""FEATURE or INCREMENT Line"LBL="" HELPID=""ls_tell_startdateID="chap0748"int ls_tell_startdate = 1; /* Tell the user if it is earlier than start date */To inform the user that a feature's start date is later than the system date, set ls_tell_startdate to a non-zero value. If ls_tell_startdate is 0, then the feature will not be enabled in the daemon, and no warning message will appear in the log file.LBL="" HELPID=""See also IDREF="32035" TYPE="TITLE""lc_crypt"0LBL="" HELPID=""ID="13021"ls_use_featsetint ls_use_featset = 0; /* Use the FEATURESET line from the license file */To require the FEATURESET line in the license file, set ID="chap0749"ls_use_featset to a non-zero value.LBL="" HELPID=""See alsoIDREF="26393" TYPE="TITLE""lmfeatset"IDREF="69035" TYPE="TITLE""FEATURESET Line"LBL="" HELPID=""ID="53119"ls_use_all_feature_linesID="chap0750"int ls_use_all_feature_lines = 0; /* Use ALL copies of feature lines that are...Globetrotter Software discourages your use of this option, which has been made unnecessary and obsolete by the new INCREMENT and UPGRADE features. The ID="chap0751"ID="chap0752"ls_use_all_feature_lines option will cause your vendor daemon to process every FEATURE line in the license file as INCREMENT lines. With ls_use_all_feature_lines set to a non-zero value, any old feature lines which you may have shipped will now be "legal", so, for example, if you had shipped a customer a feature line with a count of 5, then upgraded them with a new line with a count of 7, they would now be able to use 12 licenses.Some restriction on INCREMENT lines existed for FLEXlm v2.61. These restrictions are removed in FLEXlm v3.0.LBL="" HELPID=""See alsoIDREF="79592" TYPE="TITLE""FEATURE or INCREMENT Line"LBL="" HELPID=""ls_user_init1ID="chap0753"void (*ls_user_init1)() = 0;To install an initialization routine that runs before normal vendor daemon initialization, initialize ID="chap0754"ls_user_init1 with a pointer to your routine.LBL="" HELPID=""ls_user_init2ID="chap0755"void (*ls_user_init2)() = 0;To install an initialization routine that runs after normal vendor daemon initialization, initialize ID="chap0756"ls_user_init2 with a pointer to your routine and make sure an object file with this function is linked with your vendor daemon.LBL="" HELPID=""ID="73612"ls_vendor_msgchar *(*ls_vendor_msg)() = 0;To add support for sending messages from your client code to the daemon (with lc_vsend()ID="chap0757"), initialize ls_vendor_msg with a pointer to your routine which will process the message and create the reply for the client. ls_vendor_msg() is called with a single parametername='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'the character string sent by the client. It should create a reply message and return a pointer to it. The message string will be unused the next time that ls_vendor_msg() is called, so the use of a single static char array in ls_vendor_msg() is appropriate. Make sure this an object file with this routine is linked with your vendor daemon.LBL="" HELPID=""See alsoIDREF="40445" TYPE="TITLE""lc_vsend"LBL="" HELPID=""ID="34134"ls_user_cryptID="chap0758"char *(*ls_user_crypt)() = 0;To use your own encryption routine, initialize ID="chap0759"ls_user_crypt with a pointer to your routine, and make sure an object file with this routine is linked with your vendor daemon.LBL="" HELPID=""See alsoIDREF="32035" TYPE="TITLE""lc_crypt"IDREF="33883" TYPE="TITLE""lc_cryptstr"IDREF="37464" TYPE="TITLE""LM_A_USER_CRYPT"LBL="" HELPID=""ls_user_lockfileID="chap0760"char *user_lockfile = (char *)NULL;The vendor daemons use a lock file to prevent multiple copies from running on a server host. By default, this lock file is named /usr/tmp/lockDAEMON, where DAEMON is the name from the DAEMON line. On some new systems, the default is /usr/tmp/.flexlm/.lockDAEMON. If user_lockfile is NULL, or points to a null string, the default lock file will be used.In FLEXlm v3.0, the date on the lock file is updated every 6 hours to make it less likely for cron jobs to remove it.If you wish to change the location of the lock file, set user_lockfile to the new location. Be sure to use a full pathname for this file (i.e. the pathname should start with "/") otherwise, multiple vendor daemons could be run from different directories.LBL="" HELPID=""Vendorkeys and Vendor Encryption SeedsID="chap0761"ID="chap0762"VENDORCODE vendorkeys[] =.....Example from lm_code.h:/*
* VENDOR's private encryption seed name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' must be changed by user
* vendor should make up unique 32-bit hex numbers.
*/ 
#define ENCRYPTION_CODE_1 0x87654321
#define ENCRYPTION_CODE_2 0x12345678
/*
 *      FLEXlm vendor keys
 */ 
#define VENDOR_KEY1 0xe7503c03
#define VENDOR_KEY2 0x75811bed
#define VENDOR_KEY3 0xb8ea89c8
#define VENDOR_KEY4 0xc9a1b6d3
#define VENDOR_KEY5 0xc5dda903The ENCRYPTION_CODEs are to be made up by the FLEXlm developer; the VENDOR_KEYS are supplied by Globetrotter Software when you purchase or upgrade FLEXlm.CONFIG_DAEMONID="chap0763" edits lm_code.h (or you can edit it manually) with the encryption seeds and vendor keys that you specified for your daemon. When your vendor daemon comes up, it checks all feature lines that specify its daemon name. If the license key in the license file is valid for any feature lines that the daemon checks, and the hostid is correct, then the vendor daemon sets the number of licenses to the value in the license file. All components of FLEXlm must share the same lm_code.h, where the VENDORCODE is specified. This encryption seed is the unique part of your daemon, so it is wise tokeep it confidentialmake sure the encryption seeds are unique numbers you have made up.Each entry in the VENDORCODE array consist of a pair of 32-bit vendor-defined encryption seed values and a set of five 32-bit Globetrotter Software supplied FLEXlm Vendor Keys. The two 32-bit vendor-defined encryption seeds should be set to any values that do not contain long strings of either 0 or 1 bits (e.g. do not use 0x5 or 0xffffff3f). The FLEXlm Vendor Keys supplied by Globetrotter Software enable various portions of the FLEXlm software to run. Both the first set of vendor-defined encryption seeds and the FLEXlm Vendor Keys will be defined in the include file lm_code.hID="chap0764" by CONFIG_DAEMON.NoteThe encryption seeds that you use in your lc_init()ID="chap0765" call must be the same as the first set of encryption seeds in the vendorkeys array. Otherwise, a "Bad encryption handshake with daemon" error will result from a checkout request.NoteOnly the two encryption seeds, which you the vendor define, affect the licenses you create. The FLEXlm vendor keys have no effect on the license files you create.LBL="" HELPID=""Building Your Vendor Daemon - UNIX SystemsTo build your vendor daemon (assuming the FLEXID="chap0766"lm kit is in /usr/license):LBL="" HELPID=""For binary kits:% cd /usr/license/lmgr(run CONFIG_DAEMON to edit ls_vendor.c and lm_code.h as above).% makeLBL="" HELPID=""For source kits:Create a binary kit as described in Chapter 2, "Installing the Distribution Kit" then follow the directions for the binary kit.If you have added initialization or callback routines, you can add the XTRAOBJS macro to your make, e.g.:make XTRAOBJS="xxx.o yyy.o zzz.o"where xxx.o, yyy.o, and zzz.o are the object files for your additional routines. Alternately, you could modify the makefile to specify these objects.LBL="" HELPID=""Building Your Vendor Daemon - VMS SystemsID="chap0767"To build your vendor daemon (assuming the FLEXID="chap0768"lm kit is in [lmgr]):$ set def [lmgr]edit ls_vendor.c and lm_code.h to select your options and enter your vendor keys and encryption seeds.$ @makeIf you have added initialization or callback routines, you can edit make.com to add your new object files.LBL="" HELPID=""Building Your Vendor Daemon - Windows NT SystemsTo build your vendor daemon (assuming the FLEXlm kit is in C:\LMGR):C:> cd \lmgr\utils
C:> nmake /f lmrandom.mak
C:> cd \lmgr\vendor
C:> lmrandom < ls_vendo.c > lsr_vend.c
C:> nmake /f vendor.mak
C:> ren vendor.exe your_vendor_daemon_name.exeLBL="" HELPID=""ID="92354"Vendor daemon Support RoutinesTo aid in the development of the filter/callback functions, a new vendor daemon routine is available:ls_get_attr(attr, &value)
ID="chap0769"where: is the:attr an attribute specified in ls_attr.hID="chap0770"value (char *) - the value of the attribute.ls_get_attr() operates in the same manner as lc_get_attr(). ls_get_attr() allows you to retrieve the values of the feature name, user, host, display, etc. for use in your filtering function.The ls_checkout() vendor daemon routine is available for use in daemon filter routines:ls_checkout(feature, ndesired, wait, who, version, server, dup_sel, linger, key, 0,0);where: is the:(char *) featurefeature desired(char *) ndesiredNumber of licenses(char *) wait"Wait until available" flag (if == '1', the request will be queued if a license is not available.(CLIENT_DATA *) whothe user(char *) versionFeature's version number(SERVERNUM) serverServer requesting the checkout(char *) dup_sel Duplicate license selection criteria(char *) lingerHow long license is to linger(char *) keyLicense key from feature lineReturn: 0 -> checkout not available, > 0 -> checkout done, < 0 -> request queuedNotels_get_attr() can be used to retrieve all the parameters that ls_checkout() requires.LBL="" HELPID=""Redundant License ServersID="chap0771"FLEXlm supports a set of three licenses servers to be used in a redundant manner. If any of two of the three license servers are up and running, the system is functional and hands out its total complement of licenses (Two out of three license servers is referred to as a "quorum"). To generate a license file that uses redundant servers, simply specify three servers when you create your license. Note that the use of two license servers is not recommended, since a license file with two servers would require that you always had both running.NoteThe VMS version of FLEXlm does not support redundant servers.When redundant servers are started, they elect a master, which performs all licensing operations. The other one or two servers are there to provide a secure licensing mechanism in the event of hardware failure or in case the server node needs to be rebooted. Should the master fail, if two servers are still running, one of the remaining two will be elected master, and licensing operations will continue.The order of SERVER lines in the license file (for redundant servers) specifies the end-user's desired selection order for the master server node starting with FLEXID="chap0772"lm v2.0. If the order of these lines does not agree, then FLEXlm uses alphabetical order to determine the master, and the following messages are generated in the log file:6/26 11:00 (lmgrd) License File SERVER line order mismatch.
6/26 11:00 (lmgrd) Using alphabetical order If the server order does not match, the daemons will come up initially, but reconnection in the event of server node failure may not work, depending on which node fails and who was the master before the failure. If the automatic failover in the event of node failure is important, please ensure that the order of the server lines is consistent on all server nodes.When only two of the three license server machines are up, it is possible for the client to experience a timeout before connecting to the license server. Specifically, if the first license server in the license file is down, the client will timeout before attempting to connect to the second server in the license file. This timeout is set to 10 seconds by default, so there will be a 10-second delay before the license is granted. If the first server is to be down for a while, the order of the SERVER lines in the license file which the client reads could be changed to avoid this timeout. nLBL="8"Debugging HintsLBL="" HELPID=""Debugging Your Application CodeThere are several issues to be aware of when debugging your FLEXID="chap081"lm integrated application. Some of these are described in this chapter.If you are experiencing problems on only one platform (or if you run on only a single platform), please check the appropriate platform-specific notes in IDREF="17446" TYPE="TITLE"Chapter 14, "UNIX and VMS Platform-Specific Notes," or IDREF="34811" TYPE="TITLE"Chapter 15, "Windows, Win32s, and Windows NT."FLEXlm makes use of, and depends on, the UNIX standard I/O library and system calls. If you redefine any of the section 2 or section 3 calls, you will get unpredictable results.The sleep(3), pclose(3), and system(3) calls do not work with FLEXlm's default use of SIGALRM. If you must use these calls, disable FLEXlm timers with LM_A_CHECK_INTERNAL set to -1, and call lc_timer() periodically.FLEXlm installs a handler for SIGPIPE and SIGALRM. If your application uses FLEXID="chap082"lm timers and forks/execs another process, these signals must be restored to the default before the fork/exec, and then re-restored in the parent process. See signal(3) for details. If you fail to do this, the child process will fail with a segmentation violation, since the signal handler will not exist in the child process. This is due to the fact that the child inherits the signal handler setting of the timer, but it does not inherit the signal handler code.FLEXlm, by default, uses SIGALRM to check the health of the connection. This cannot be tolerated by certain applications (for example, applications that use SUNVIEW or XView). These applications should set the LM_A_CHECK_INTERVAL and LM_A_RETRY_INTERVAL attributes to -1 with lc_set_attr(). After checking out a license, the application must periodically call lc_timer() to keep checking the health of the connection.Applications that use Sunview should call ID="chap083"notify_no_dispatch() before calling lc_checkout() and lc_timer(), and call notify_do_dispatch() after the call to lc_checkout() and lc_timer(). This is due to the fact that the SUN notifier substitutes incompatible read() and select() calls while the notifier is being used.Applications that use XVIEW cannot tolerate the use of ID="chap084"setitimer() or signal() calls. These applications should use the LM_A_SETITIMERID="chap085" and LM_A_SIGNALID="chap086" attributes to install the XVIEW compatible routines in their place.Occasionally, the time stamps in the daemon log might appear to be incorrect. This can be caused by running lmgrd in the startup script before the timezone command is executed.If the daemon log file is missing, be sure that you are using bourne shell syntax in the startup file. In particular, do not use csh-style redirection >& in one of the rc startup files.If the FLEXlm timers are used to perform checking and/or reconnection, non-reentrant routines can possibly be called in the C run-time library. We have verified that the routines called by the timers are free of malloc/free reentrancy problems, since these are detectable by Purify, but there may be other, especially I/O or system routines which are not reentrant, but called by FLEXlm. The only way to be certain to avoid this problem would be to disable the FLEXlm timers and call lc_timer() directly.LBL="" HELPID=""See alsoIDREF="36648" TYPE="TITLE""lmdiag"IDREF="51258" TYPE="TITLE""lc_timer"LBL="" HELPID=""Solving Problems In The Field"License server does not support this feature"Prior to FLEXlm v2.61, client and server could read different license files, and the actual contents of the FEATURE line (other than the feature name) was of little consequence. However, after v2.61, both the client and server need to be reading the SAME license file, since the client passes the license key from the FEATURE line to the vendor daemon. The feature name and license key must both match for the vendor daemon to hand out a license."Encryption code in license file is inconsistent":FLEXlm will report the error "encryption code in license file is inconsistent" (LM_BADCODEID="chap087", -8) in a number of situations.In general, the LM_BADCODE error occurs when:Some data in the license file which factors into the license key (encryption code) (server hostid, feature name, feature version, expiration date, # licenses, vendor string, or encryption seed) has been changed, or The encryption seeds in your application, vendor daemon, and license creation program differ.If you are beginning to integrate your application with FLEXlm, this error is usually the result of not building all the software components with the same encryption seeds. Check create_lic.c, lmcrypter.c, ls_vendor.c, and your application code carefully to insure that they are all built with the same vendor code. If this is the case, you simply need to make sure that your application, create_license, lmcrypter, and your vendor daemon have all been re-built since the last time that you changed lm_code.h, and that there is only one lm_code.h file.The case where your software has been shipping and you encounter this error at a customer site is a little harder to diagnose. The problem in this case is usually a bad license file.You can test to see if the LM_BADCODE return is a result of the license file or some other machine failure by running your application with the license file on two different computers, if you are using a floating license. Since the client routines in FLEXlm verify the code before attempting to connect to the server, the error message that your client reports will help to isolate the problem. Note that this test does not require the daemons to be running, so you can perform the test at your site, even if the machine specified in the SERVER line does not exist on your network.Check the following:Verify that the code used in the vendor daemon, your application, create_license and lmcypter are consistent.Verify that you are not running an old copy of any of the three programs in (1).Verify that your create_license and lmcrypter programs can re-create the license file in question.Verify that the encryption seeds in all three programs in (1) are the codes that are in lm_code.h.If you are using your own encryption function, make sure that there are no machine dependencies.LBL="9"Software Vendor Utility ProgramsLBL="" HELPID=""The ID="84652"create_license UtilityID="chap091"The FLEXlm distribution kit includes the create_license utility program used for the creation of license files.create_license is a stand-alone license file generator. create_license can be used "as-is" to generate license files for your customers, or it can be used as an example for you to create your own customized license file generation program. If customizing, note that the essential function call is lc_crypt()ID="chap092", which returns the 20-character license key for each FEATURE line. create_license asks a number of questions, then generates the license file for the specific end-user.ID="chap093"create_license allows you to enter all the data for a customer's license file from scratch, or use an existing customer license file to update the feature lines.The license file is left in the current directory with the name license.dat.Prior to FLEXlm v2.3, create_license generated all license files with TCP/IP port numbers of 1700. After FLEXlm v2.3, create_license generates a default TCP/IP port number based on the first two characters of the vendor daemon name. This was done to avoid all license files having 1700 as the port number at end-user sites. If you use the new default, the chances of colliding with another FLEXlm vendor's port number will be minimal.For Windows and Windows NT systems, the file name of the create_license utility is actually CREATE_L.EXE in the utils directory.The following are examples of license creation sessions.LBL="" HELPID=""ExampleThe creation of a customer license file from scratch:speedy $ create_license

create_license - 
COPYRIGHT (c) 1988, 1994 Globetrotter Software Inc.

Do you want to use an existing file for SERVER and DAEMON lines [y/n] ? n

Please enter the name of the server node where you
would like to run the FLEXlm daemons.

NOTE: The server node name(s) and TCP/IP port nubmers
      can be changed by the end-user of your product.

Enter hostname: speedy
Enter the hostid: 08002b32b161
Enter the TCP/IP port number [7182]: <CR>

Enter DAEMON "demo" path: /etc/demo

You will be prompted for feature names.
 When the list is complete, just type <CR> to the Feature name prompt.
 To get the default answer to any question, type a <CR>.
To re-start specifying the feature, just type "-" to any of the prompts.

Feature name: f1
FEATURE/INCREMENT/UPGRADE line? [f/i/u, default: f]: <CR>
Version of f1 [default 1.0]: 2.0
Number of licenses [default: 4]: 7
Number of OVERDRAFT licenses [default: 0]: 
Duplicate grouping parameter [NONE, SITE, [UHDV], default: not specified]: <CR>
Intellectual Property Notice [default: ""]: <CR>
Expiration date [dd-mmm-yyyy, default: 1-jan-95]: 1-jan-0
Start date [dd-mmm-yyyy, default: 1-jan-94]: <CR>
Your vendor-defined string: my data goes here
Host id (if locking to a single host): <CR>


Feature name: 
speedy $ cat license.dat
SERVER speedy 08002b32b161 7182
DAEMON demo /etc/demo 
FEATURE f1 demo 2.000 1-jan-0 7 0BEC00313F2D7686F580 \
         VENDOR_STRING="my data goes here" ck=230

#NOTE: You can edit the hostname on the server line (1st arg),
#      the port address on the server line (3rd arg), the path
#      to the daemon on the daemon line (2nd arg), or any
#      right-half of a string (b) of the form a=b where (a) is all
#      lowercase. (For example, xxx in  vendor_info="xxx" can be
#      changed).  Any other changes will invalidate this license.LBL="" HELPID=""isvaliddateUsage:isvaliddate dateThe isvaliddate program will check the date which is provided on the command line. isvaliddate will parse the date and return an exit status as follows:no date -1invalid day LM_BADDATE (-11)ID="chap094"invalid month LM_BADDATE (-11)invalid year LM_BADDATE (-11)expired date LM_LONGGONE (-10)ID="chap095"binary date invalid LM_DATE_TOOBIG (-49)ID="chap096"LBL="" HELPID=""See alsoIDREF="32035" TYPE="TITLE""lc_crypt"LBL="" HELPID=""ID="95762"lmcrypterID="chap097"lmcrypter is a new way to generate license files that has a number of advantages over create_license. lmcrypter takes an existing license file where the 20-character codes have been replaced with a single `0' (zero) character, and then replaces the `0' with the correct code, which is then shippable to a customer. If -f arg is used, then all license keys will be recomputed, including lines with license keys already set.Usage:lmcrypter [ files ][-i infile] [-o outfile] [-r] -f
-r  Print copyright notice.If no input file, or if specified as - or stdin, stdin is used. If no output file, or if specified as - or stdout, stdout is used. files are read and written back in place. If no arguments, lmcrypter reads stdin and writes stdout. -f forces recomputing ALL license keys. Start dates are unchanged.The simplest way to use lmcrypter is:copy an existing good file to a another name, say temp.edit temp, and make any desired changes, such as changing the feature name, or number of uses, or adding new features, etc.change each 20-character code to a single `0' (zero), and save the file. type% lmcrypter < temp > newlicensenewlicense is then filled with correct 20-character codes and is usable by a customer.lmcrypter understands all FLEXlm license syntax. Comments are passed through unaltered.If you want to specify a start-date, then, in place of a `0' in the 20-character code, use the following syntax:start:dd-mmm-yyyLBL="" HELPID=""Example:start:1-jan-95See lmcrypter.c in the /lmgr/machind directory.LBL="" HELPID=""Error ReturnsErrors are printed to stderr. Most errors will prevent generation of license keys, and the text will be output unchanged from the input. An example of error reporting Input:FEATURE f1 demo 1.a50 01-jan-99 0 0 HOSTID=08002b32b161Error reported:stdin:line 1:Bad version number - must be floating point number, with no lettersLBL="" HELPID=""See alsoIDREF="33883" TYPE="TITLE""lc_cryptstr"IDREF="24709" TYPE="TITLE"Chapter 10, "The License File"LBL="" HELPID=""ID="84345"create_pkgID="chap098"The create_pkg utility is similar to create_license, and is used to make PACKAGE lines for license files. The reason this utility is separate from ID="chap099"create_license is that vendors will often want to ship PACKAGE lines with their product, and issue enabling FEATURE or INCREMENT lines later when the product is sold to individual customers.The source for create_pkg, create_pkg.c, is in the machind directory, and vendors are encouraged to modify this source as needed.NotePACKAGE lines can also be created with the new lmcrypter utility, but not with create_license.LBL="" HELPID=""ID="26393"lmfeatsetID="chap0910"The lmfeatset program is used by vendors that wish to support the FEATURESET capability in their vendor daemon. ID="chap0911"lmfeatset prints the FEATURESET line to be used in a license file. Usage is:lmfeatset [-c license_file] vendorThe lmfeatset program uses the default license file to calculate the FEATURESET line if no "-c" option is present.LBL="" HELPID=""See alsoIDREF="61646" TYPE="TITLE"Chapter 3, "lc_feat_set"ID="45129"LBL="10"ID="24709"The License FileID="chap101"LBL="" HELPID=""ID="26348"Format of the License FileA license file consists of the following sections:Optional license server section, with information about node where the SERVER (or redundant SERVERs) are running, along with a list of all vendor-specific DAEMON(s) that the SERVER needs to run. This section is required if any features are counted.Features section, consisting of any combination of FEATURE, INCREMENT, UPGRADE or PACKAGE lines. This section is required.Optional FEATURESET section, consisting of at most one FEATURESET line per DAEMON line in the file. This section is required for vendor daemons that use FEATURESET.Comments. The convention is to begin comments with a `#' character. However, in practice all lines not beginning with a FLEXlm reserved keyword are considered comments.Vendors and license administrators will read the license file to understand how the licensing will behave: what features are licensed, for how many users, whether these features are node-locked, if the features are demo or regular, etc. The options are very broad for what can be specified in a license file.End-users often need to edit this file. Nearly all of the file is authenticated; if these portions are edited by the license administrator, a ID="chap102"LM_BADCODE error will result. However, license administrators often must edit the license file for the following reasons:To change the SERVER nodenameID="chap103"To change the SERVER TCP/IP port addressID="chap104"To change the path to the vendor daemonAny amount of white space of any type can separate the components of license file lines, and the data can be entered via any text editor. Vendors can therefore distribute license data via Fax or telephone.Only five data items in the license file are editable by the end-user:hostnames on SERVER linesport-numbers on SERVER linespathnames on DAEMON linesoptions file pathnames on DAEMON linesDecnet object numbers on DAEMON lines (VMS only)NoteThe SERVER hostid(s) and everything on the FEATURE line (except the daemon name) is input to the encryption algorithm to generate the license key for that FEATURE.LBL="" HELPID=""ID="53802"SERVER LineID="chap105"A SERVER line specifies the node on which a license server process can run. If a license file has three SERVER lines, then two of the three servers must be running in order for the licensing system to operate. The SERVER node name in the license file can be any network alias for the node (prior to FLEXlm v2.4 it was restricted to the return of the gethostname() call).SERVER nodename id optional-port-numberwhere: is the:nodename string returned by the UNIX hostname or uname -n commands. This can be edited by the license administrator.id string returned by the lmhostid command. (Case insensitive). Alternate special hostids can also be specified here, including ANY, HOSTNAME=hostname, etc.optional-port-number TCP port number to use. This can be edited by the license administrator. If not specified, then the service must be registered in the /etc/servicesfile.NoteThe SERVER line must apply to all lines in the license file. It is permitted and encouraged to combine license files from different vendors, but this only works if the SERVER hostids are identical in all files that are to be combined.NoteOn VMS, the server node name can be entered with the trailing "::", if desired, as is the practice of many VMS system administrators.LBL="" HELPID=""See alsoID="chap106"IDREF="36467" TYPE="TITLE""lmhostid"IDREF="42751" TYPE="TITLE""Hostids for FLEXlm Supported Machines"IDREF="20049" TYPE="TITLE""Special Hostids"IDREF="90534" TYPE="TITLE""LM_A_ANY_ENABLED"IDREF="12922" TYPE="TITLE""Redundant vs. Single-server licensing"IDREF="37821" TYPE="TITLE""Counted Vs. Uncounted Licenses"LBL="" HELPID=""DAEMON LineID="chap107"The DAEMON line specifies the name and location of a vendor daemon, as well as the location of the end-user's options file.LBL="" HELPID=""UNIX and Windows/NT Platforms SyntaxDAEMON daemon-name path [options-file]where: is the:daemon-name Name of the daemon used to serve some feature(s) in the file.pathPathname to the executable code for this daemon.options-filePathname of the (optional) license administrator specified options file for this daemon.LBL="" HELPID=""Example UNIXDAEMON xyzd /etc/xyzd
DAEMON xyzd /etc/xyzd /usr/local/flexlm/options/xyz.optsLBL="" HELPID=""Example Windows/NTDAEMON xyzd c:\windows\system\xyzd.exe
DAEMON xyzd c:\windows\system\xyzd.exe c:\opts\xyz.optsLBL="" HELPID=""VMS Platforms SyntaxThe DAEMON line on VMS has an extra field - the DECnet object number. The syntax for a DAEMON line on VMS is:DAEMON daemon-name path [object] [options_file]where: is the:object DECnet object number: 0 - daemon uses object number 0, task name is "name" from the DAEMON line. 128-255 - daemon uses this object number. [Default: 0]LBL="" HELPID=""Examples (VMS)DAEMON xyzd du:[xyz]xyzd.exe 200
DAEMON xyzd du:[xyz]xyzd.exe 0 [xyz]xyz.optsNoteIf an options file is specified, the object number must be specified.LBL="" HELPID=""See AlsoIDREF="19683" TYPE="TITLE"Chapter 12, "End-User License Administration"LBL="" HELPID=""ID="79592"FEATURE or INCREMENT LineID="chap108"ID="chap109"A FEATURE line describes the license to use a product. An INCREMENT line can be used in place of a FEATURE line, as well as to add licenses to a prior FEATURE or INCREMENT line in the license file.If the vendor daemon has ls_use_all_feature_lines set in ls_vendor.c, then FEATURE lines function as INCREMENT lines, and the behavior of a FEATURE line is unavailable to that application.Only one FEATURE line for a given feature will be processed by the vendor daemon. If you want to have additional copies of the same feature (for example, to have multiple node-locked, counted features), then you must use multiple INCREMENT lines. INCREMENT lines form license groups based on the feature name, version, and node-lock hostid. If the feature name, version, and node-lock hostid (and optionally, the vendor string, if ls_compare_vendor_on_increment is non-zero) match a prior INCREMENT or FEATURE line, the new number of licenses is added to the old number. If any of the three do not match, a new group of licenses is created in the vendor daemon, and this group is counted independently from others with the same feature name. INCREMENT is not available for pre-v2.61 FLEXlm clients or servers. A FEATURE line does not give an additional number of licenses, whereas an INCREMENT line ALWAYS gives an additional number of licenses.There are two formats for FEATURE; pre-v3.0 and current. The old format is still understood and correct with new clients and servers, but the new format is more flexible. The syntax of FEATURE and INCREMENT lines in FLEXlm pre-v3.0 is:FEATURE|INCREMENT name daemon version exp_date #lic key \
"vendor_string" [hostid]The current syntax of FEATURE and INCREMENT lines (FLEXlm v4.0) is:FEATURE|INCREMENT name daemon version exp_date #lic key \
[HOSTID=hostid][VENDOR_STRING="vendor-string"] \ 
[vendor_info="..."] [dist_info="..."] [user_info="..."] \
[asset_info="..."] [ISSUER="..."] [NOTICE="..."] [ck=nnn] \
[OVERDRAFT=nnn] [DUP_GROUP=NONE|SITE|[UHDV]where: is the:name name given to the feature. Legal feature names in FLEXlm must contain only letters, numbers, and underscore characters.daemondaemon-name from a DAEMON line. The specified daemon serves this feature.versionlatest (highest-numbered) version of this feature that is supported. (floating point format, 3 decimal places).exp_dateexpiration date in the format: dd-mmm-yyyy, (for example, 22-mar-1988). If you do not want the feature to expire, select an expiration date with the year as 0, e.g., 1-jan-0. (Case insensitive).#lic number of licenses for this feature.keylicense key for this feature line. The key is produced by lc_crypt()ID="chap1010" in create_license, or lc_crypstr in lmcrypter or a vendor-defined routine. (Case insensitive). The start date is encoded into the key; thus identical keys created with different start dates will be different. The key field can be made case sensitive by calling lc_set_attr(ID="chap1011"LM_A_CRYPT_CASE_SENSITIVE, 1). Remember to select the "case sensitive" option when building your daemon, if you use a case sensitive license key comparison.The following fields are all optional (except for vendor-string in the old format). For optional fields of the "name=value" syntax, if the name is lowercase, it can be modified and the license will remain valid.where: is the:"vendor-string" Vendor-defined string, enclosed in double quotes. This string can contain any characters except a quote (white space will be ignored in the vendor-defined string). The application can retrieve this string by calling lc_auth_data(). [Pre-v3.0 format]hostidID="chap1012" String returned by lmhostid. Use if this feature is to be bound to a particular host, whether its use is counted or not. (Case insensitive). If the number of licenses is 0, then this field is required. If hostid is DEMO, the license is valid on any system. If DEMO, the application can determine this is a demo license by calling lc_auth_data() and noting the hostid type. All other special hostids are supported: DEMO, INTERNET=n.n.n.n, etc.[Pre-v3.0 format]HOSTID=hostidthe node-locked hostid (same as "hostid" in the old format, above)VENDOR_STRING="..."Vendor-defined license data (same as "vendor-string" in the old format, above)vendor_infoID="chap1013"="..."Additional information provided by the software vendor. Not encrypted into the feature's license key.dist_infoID="chap1014"="..."Additional information provided by the software distributor. Not encrypted into the feature's license key.user_infoID="chap1015"="..."Additional information provided by the software end-user's system administrator. Not encrypted into the feature's license key.asset_infoID="chap1016"="..."Additional information provided by the software end-user's system administrator for asset management. Not encrypted into the feature's license key.ISSUERID="chap1017"="..."Issuer of the license.NOTICEID="chap1018"="..."A field for intellectual property notices.ck=ID="chap1019"nnnA checksum, useful with the lmcksum utility, which will verify that the license has been entered correctly by the license administrator. Not encrypted.OVERDRAFT=ID="chap1020"nnnThe OVERDRAFT policy allows you to specify a number of additional licenses which your end user will be allowed to use, in addition to the licenses they have purchased. This is useful if you want to allow your customers to not be denied service when in a "temporary overdraft" state. Usage above the licensed limit will be reported by the FLEXadmin reporting tool. In addition, you can determine if you are currently in an overdraft condition by calling lc_get_attr(job, LM_A_VD_FEATURE_INFO, ...). The returned structure has, among others, three members of interest: lic_in_use, lic_avail, and overdraft. Iflic_in_use > lic_avail - overdraftthen you are in an "overdraft state".DUP_GROUP=ID="chap1021"...You can specify the Duplicate Grouping parameter in the license in FLEXlm v4.0. If DUP_GROUP is specified in the license, this parameter overrides the dup_group parameter in the lc_checkout() call. If not specified in the license, the dup_group parameter from lc_checkout() will be used. The syntax is:DUP_GROUP=NONE|SITE|[UHDV]
U = DUP_USER
H = DUP_HOST
D = DUP_DISPLAY
V = DUP_VENDOR_DEFAny combination of UHDV is allowed, and the DUP_MASK is the OR of the combination. For example "DUP_GROUP=UHD" means the duplicate grouping is (DUP_USER | DUP_HOST | DUP_DISPLAY), so a user on the same host and display will have additional uses of a feature not consume additional licenses.LBL="" HELPID=""ExamplesTo illustrate INCREMENT, the two feature lines:FEATURE f1 demo 1.000 1-jan-0 4 ....
FEATURE f1 demo 2.000 1-jan-0 5 ...would only result in 4 licenses for v1 or 5 licenses for v2, depending on their order in the file, whereas:INCREMENT f1 demo 1.000 1-jan-0 4 ....
INCREMENT f1 demo 2.000 1-jan-0 5 ....would result in 4 licenses for v1 and 5 licenses for v2 being available, giving a total of 9 licenses for f1.To illustrate counted vs. uncounted licenses, the following FEATURE lineFEATURE f1 demo 1.000 1-jan-95 0 12345678901234567890 HOSTID=DEMOhas unlimited usage on any hostid, requires no license servers (no SERVER or DAEMON lines) and is therefore a complete license file by itself. This FEATURE line also happens to be an "expiring" license and will not allow use of the FEATURE after 1-jan-95.In contrast the following FEATURE line requires a vendor daemon named "demo" (and naturally a SERVER and DAEMON as well) andFEATURE f1 demo 1.000 1-jan-0 5 12345678901234567890 \
HOSTID=INTERNET=195.186.*.*is limited to 5 users on any host with an internet IP address matching 195.186.*.*, and never expires. LBL="" HELPID=""See alsoIDREF="53119" TYPE="TITLE"Chapter 7, "ls_use_all_feature_lines"IDREF="67965" TYPE="TITLE"Chapter 7, "ls_compare_vendor_on_increment"IDREF="34313" TYPE="TITLE"Chapter 6, "LM_A_CRYPT_CASE_SENSITIVE"IDREF="20049" TYPE="TITLE"Chapter 10, "Special Hostids"LBL="" HELPID=""ID="57505"UPGRADE LineID="chap1022"UPGRADE name daemon fromversion version exp_date #lic code "string" [hostid]\
ck=nnnAll the data is the same as for a FEATURE or INCREMENT line, with the addition of the fromversion field. An UPGRADE line removes up to the number of licenses specified from any old version (>= fromversion) and creates a new version with that same number of licenses.For example, the two lines:FEATURE f1 demo 1.000 1-jan-94 5 9BFAC03164EDB7BC0462 ""
UPGRADE f1 demo 1.000 2.000 1-jan-94 2 1B9A30316207EC8CC0F7 ""would result in 3 licenses of v1.0 of f1 and 2 licenses of v2.0 of f1.UPGRADE will operate on the most recent FEATURE or INCREMENT line (i.e., closest preceding FEATURE or INCREMENT line) with a version number that is >= fromversion, and < version.Note that UPGRADE does not work for node-locked, uncounted licenses. A new FEATURE line should be issued in this case, since the license count is irrelevant.If a user has UPGRADE lines for his license file and performs the following sequence:start daemons WITHOUT UPGRADE lines in license filecheck out old versions of softwareadd UPGRADE lines to license filerun lmrereadthen he will have more checked out licenses of the old version of the software than the FEATURE/UPGRADE or INCREMENT/UPGRADE lines would normally allow. This license overdraft (of the old versions) will only exist for the life of the old processes.LBL="" HELPID=""PACKAGE LineID="chap1023"The purpose of the PACKAGE line is to support two different licensing needs:to license a product SUITE, orto provide a more efficient way of distributing a license file that has a large number of features, which largely share the same FEATURE line arguments.A PACKAGE line, by itself, does not license anything - it requires a matching FEATURE/INCREMENT line to license the whole PACKAGE. A PACKAGE line can be shipped with a product, independent of any licenses. Later, you can issue one or more corresponding FEATURE/INCREMENT licenses that will enable the PACKAGE.PACKAGE pkg_name vendor pkg_version pkg_key COMPONENTS=pkg_list \
[ OPTIONS=pkg_options ]where: is the:pkg_namename of the PACKAGE. The corresponding FEATURE/INCREMENT line must have the same name.vendorname of the vendor daemon that supports this PACKAGE (VENDOR_NAME in lm_code.h).pkg_versionversion of the PACKAGE. The corresponding FEATURE/INCREMENT line must have the same version.pkg_key20-character key generated by one of the license generators: create_pkg, lmcrypter, or the vendor's customized license generator.pkg_listthe space separated list of components. Format each component is:feature[:version[:count]]The PACKAGE must consist of at least one COMPONENT. version and count are optional, and if left out, their values come from the corresponding FEATURE/INCREMENT line. Count is only legal if OPTIONS=SUITE is not set - in this case the resulting number of licenses will be the count on the COMPONENTS line multiplied by the number of licenses in the FEATURE/INCREMENT line. Examples:COMPONENTS="comp1 comp2 comp3 comp4"
COMPONENTS="comp1:1.5 comp1 comp1:2.0:4"OPTIONS=pkg_optionsCurrently the only legal option is SUITE. This is what distinguishes a SUITE PACKAGE from a PACKAGE used to ease distribution.ID="chap1024"With OPTIONS=SUITE, the pkg_name FEATURE is checked out in addition to the component feature being checked out.If OPTIONS=SUITE is not set, then the FEATURE of the same name as the package is removed once the PACKAGE is turned on, and it also is not checked out when a component feature is checked out.LBL="" HELPID=""ExamplesExample 1:PACKAGE suite demo 1.0 20CHARCODEXXXXXXXXXX\
COMPONENTS="comp1 comp2" OPTIONS=SUITE
FEATURE suite demo 1.0 1-jan-0 5 20CHARCODEXXXXXXXXXXThis is a typical SUITE example. The user will have 2 features: comp1 and comp2, which are each version 1.0, with 5 non-expiring licenses available. When comp1 or comp2 are checked out, "suite" will also be checked out. The vendor will most likely want to turn on DUP_GROUP (either through the FEATURE line, or lc_checkout) so that the same user can use comp1 and comp2 while using only one license of the suite FEATURE.Example 2:PACKAGE suite demo 1.0 20CHARCODEXXXXXXXXXX\
                        COMPONENTS="comp1 comp2 comp3 comp4 comp5"
INCREMENT suite demo 1.0 1-jan-0 1 20CHARCODEXXXXXXXXXX\
                        HOSTID=12345678
INCREMENT suite demo 1.0 1-jan-0 1 20CHARCODEXXXXXXXXXX\
                        HOSTID=87654321This is a good way to distribute multiple node-locked, counted licenses. Rather than requiring 5 INCREMENT lines per node, only one INCREMENT line is required per node, and the features are indicated in the PACKAGE line.Example 3:PACKAGE suite demo 1.0 \
                        COMPONENTS="comp1:1.5:2 comp2:3.0:4 comp3"
FEATURE suite demo 1.0 1-jan-95 3 20CHARCODEXXXXXXXXXX\
                        ISSUER=distrib1The component versions override the FEATURE versions, and the number of licenses available for any component is the product of the 3 licenses for suite and the number of licenses of that component. The result is equivalent to:FEATURE comp1 demo 1.5 1-jan-95 6 20CHARCODEXXXXXXXXXX\
                        ISSUER=distrib1
FEATURE comp2 demo 3.0 1-jan-95 12 20CHARCODEXXXXXXXXXX\
                        ISSUER=distrib1
FEATURE comp3 demo 1.0 1-jan-95 3 20CHARCODEXXXXXXXXXX\
                        ISSUER=distrib1LBL="" HELPID=""ID="69035"FEATURESET LineID="chap1025"The FEATURESET line is required if ls_use_featset is set in ls_vendor.c. Otherwise, FEATURESET is unused.FEATURESET daemon-name keywhere: is the:daemon-name Name of the daemon used to serve some feature(s) in the file.keyLicense key for this FEATURESET line. This key encrypts the keys of all FEATUREs that this daemon supports, so that no FEATURE lines can be removed or added to this license file.The FEATURESET line allows the vendor to bind together the entire list of FEATURE lines supported by one daemon. If a FEATURESET line is used, then all the FEATURE lines must be present in the same order in the customer's license file. This is used, for example, to insure that a customer uses a complete update as supplied, without adding old FEATURE lines from the vendor.NoteThe SERVER hostid(s) and everything on the FEATURE line (except the daemon name) is input to the encryption algorithm to generate the code for that FEATURE.LBL="" HELPID=""See alsoIDREF="13021" TYPE="TITLE"Chapter 7, "ls_use_featset"IDREF="26348" TYPE="TITLE"Chapter 10, "Format of the License File"LBL="" HELPID=""CommentsID="chap1026"Comment lines can begin with a `#'. Currently, all lines not beginning with a license keyword are comment lines. Therefore, typically, license files can be sent as e-mail messages.LBL="" HELPID=""Continued LinesID="chap1027"Lines can be continued with a "\" character.LBL="" HELPID=""License file name limitsID="chap1028"The limits on names for the major parameters employed in the FLEXlm license file are:Host Names32 charactersFeature Names30 charactersDate String11 characters (dd-mmm-[yy]yy)License file lines (total)2048 charactersUser Names20 charactersDAEMON Names10 charactersVersion10 characters, in floating point format, maximum 3 decimal places, e.g., 123.456, or 2.10All other parametersLimited only by the total length of the license file line.When using TCP, a single vendor daemon can support as many clients as the system limit for file descriptors and sockets, which varies from around 256 on sunos4 to 4000 on OSF/1 (SCO comes with a configurable default of around 8). While file descriptors are exhausted, additional vendor daemons are spawned to support the extra file descriptors. the maximum number of spawned daemons is 255, which effectively limits the maximum number of clients to 256*25 -(2* # servers -1) or approximately 6,400 per vendor daemon. When using UDP, there is no limit to the number of clients. Note that multiple daemons can be run on a single network, making the number of even TCP clients effectively unlimited. LBL="" HELPID=""Example License FileID="chap1029"This example illustrates the license file for single vendor with two features, and a set of three server nodes, any two of which must be running for the system to function.SERVER pat 17003456 1700
SERVER lee 17004355 1700
SERVER terry 17007ea8 1700
DAEMON demo /etc/mydaemon
FEATURE f1 demo 1.000 01-jan-96 10 1AEEFC8F90030EABF324
FEATURE f2 demo 1.000 01-jan-96 10 0A7E8C4F561FE98BA073LBL="" HELPID=""ID="35936"Locating the License FileID="chap1030"ID="chap1031"On UNIX platforms the license file default is:ID="chap1032"/usr/local/flexlm/licenses/license.datFor Windows/NT systems, the default license file location is:ID="chap1033"C:\FLEXLM\LICENSE.DATFor VMS platforms, the default license file location is:SYS$COMMON:[SYSMGR]flexlm.datClient applications get the license file location in the following manner (in order of precedence; lowest to highest):Default locationlc_set_attr(LM_A_LICENSE_FILE_PTRID="chap1034",path)End-user or application sets LM_LICENSE_FILEID="chap1035" environment variable to path.License finder.LM_A_LICENSE_FILE_PTR set and lc_set_attr(LM_A_DISABLE_ENV,1)ID="chap1036", which makes the application override the LM_LICENSE_FILE environment variable.License finder forced via FLEXLM_USE_FINDER environment variable.Most FLEXlm utilities will accept a c license_file_path option, in order to specify the license file.The LM_LICENSE_FILE environment variable can be used to establish a new default location for the license file.NoteThe c option will override the setting of LM_LICENSE_FILE for all FLEXlm utilities such as: lmgrd, lmdown, lmstat etc.NoteThe FLEXlm daemons do not use the license file path; they will only process the first file in a license file path.In addition, client programs can process a series of license files by setting LM_LICENSE_FILE to a path, as in:% setenv LM_LICENSE_FILE file1:file2:file3:....:filenClient programs will then try using file1; if it fails, file2 will be tried, etc.When using a license file path on VMS systems, the license file names should be separated by the " " (space) character, rather than the ":" character that is used on UNIX or Windows systems. When assigning a license file path on VMS, use a command similar to the following:$ assign "license_file_1 license_file_2 license_file_3" lm_license_fileNoteThe quotes around all the license file names are required on VMS platforms.The license file does not need to be accessible on each client node; it can be read by the client from lmgrd. In order to do this, specify the license file as port@host, either in the LM_LICENSE_FILE environment variable or in your call to lc_set_attr(LM_A_LICENSE_FILE_PTR,...);The syntax is:port@host[,port2@host2[,port3@host3]]where: is the:portTCP/IP port number (integer) from the license filehostName of the server host from the license file.A non-redundant server would have only a single ID="chap1037"port@host, whereas redundant servers could be specified as 1, 2, or 3 sets of port@host, separated by commas. For example, if you have a single server node named "serverhost", and you are running FLEXlm on port 1700, you could specify your "license file" as:1700@serverhostYou could have a license file path which looked like the following:1700@serverhost:/usr/local/license.dat:1700@shost2or, if the second server was a set of 3 redundant servers, the path might look like this:1700@serverhost:1700@host1,1700@host2,1700@host3:1700@shost2In this last example, the "1700@host1,1700@host2,1700@host3" part specifies a set of 3 redundant servers.Noteport@host is expensive in its use of networking resources and should be avoided with very large license files (longer than 250 lines) within slow wide-area networks, or extremely busy networks (heavy checkout traffic >1/second).NotePrior to FLEXlm v2.61, client and server could read different license files, however, after FLEXlm v2.61, both the client and server need to be reading the SAME license file, since the client passes the license key from the FEATURE line to the vendor daemon.LBL="" HELPID=""See AlsoIDREF="43831" TYPE="TITLE"Chapter 3, "lc_set_attr"IDREF="67269" TYPE="TITLE"Chapter 6, "LM_A_LICENSE_FILE"LBL="" HELPID=""ID="42751"Hostids for FLEXID="chap1038"lm Supported MachinesFLEXlm uses different machine identifications for different machine architectures. For example, all Sun Microsystems machines have a unique integer hostid, whereas all DEC machines do not. For this reason, the Ethernet address is used on some machine architectures as the "Hostid". An Ethernet address is a 6-byte quantity with each byte specified as two hex digits. Specify all 12 hex digits when using an Ethernet address as a hostid. For example, if the Ethernet address is 8:0:20:0:5:ac, specify "0800200005AC" as the hostid.ID="chap1039"The program ID="chap1040"lmhostid will print the exact hostid that FLEXlm expects to use on any given machine. The following table lists alternate methods to obtain the required hostid for each machine architecture.Integer hostids (used on Sun, SGI, HP, etc.) are normally hexadecimal numbers. However, a license file can take a decimal number if the hostid has a "#" prefix. Certain systems, notably HP uname and SGI, return decimal numbers by default, and this can make license file generation easier. Note that whenever a FLEXlm utility prints such a hostid, it always prints a hexadecimal number.Hostids for Windows and Window NT systems is the serial number of the C: drive of the system by default. FLEXlm also supports a hardware key available from Globetrotter Software. For more details, see IDREF="60608" TYPE="TITLE""Node Lock and Hostid for Standalone PCs".The VMS version of FLEXlm includes support for certain specified devices. For more information, see IDREF="42247" TYPE="TITLE""VMS Ethernet Device Support". COLUMNS="4"LBL="10-1"Table 10-1  (continued)        HostidsLEFT="0" WIDTH="64"Hardware PlatformLEFT="70" WIDTH="93"HostidLEFT="170" WIDTH="113"Type this command on the 
license serer:LEFT="290" WIDTH="115"ExampleLEFT="0" WIDTH="64"ApolloLEFT="70" WIDTH="93"20-bit node IDLEFT="170" WIDTH="113"lcnode -meLEFT="290" WIDTH="115"BE70LEFT="0" WIDTH="64"ConvexLEFT="70" WIDTH="93"32-bit hostidLEFT="170" WIDTH="113"getsysinfoLEFT="290" WIDTH="115"LEFT="0" WIDTH="64"DECstationLEFT="70" WIDTH="93"ethernet addressLEFT="170" WIDTH="113"pfstat or arp 
hostnameIDREF="chap10TF0a"aLEFT="290" WIDTH="115"080020005532LEFT="0" WIDTH="64"DG aviionLEFT="70" WIDTH="93"32-bit hostidLEFT="170" WIDTH="113"/usr/sbin/systemidLEFT="290" WIDTH="115"0C020972LEFT="0" WIDTH="64"HPLEFT="70" WIDTH="93"32-bit hostidIDREF="chap10TF0b"bLEFT="170" WIDTH="113"echo `uname -i' 16o 
p | dcLEFT="290" WIDTH="115"778DA450LEFT="0" WIDTH="64"LEFT="70" WIDTH="93"Ethernet addressLEFT="170" WIDTH="113"lanscan (use station 
address without leading 
"0x")LEFT="290" WIDTH="115"0000F0050185LEFT="0" WIDTH="64"LEFT="70" WIDTH="93""id module"IDREF="chap10TF0c"cLEFT="170" WIDTH="113"read ID typed on module, 
remove `A', and convert 
remainder to hex.LEFT="290" WIDTH="115"118CD098LEFT="0" WIDTH="64"MIPSLEFT="70" WIDTH="93"32-bit hostidLEFT="170" WIDTH="113"lmhostidLEFT="290" WIDTH="115"170a3472LEFT="0" WIDTH="64"Motorola 88KLEFT="70" WIDTH="93"32-bit hostidLEFT="170" WIDTH="113"lmhostidLEFT="290" WIDTH="115"170a3472LEFT="0" WIDTH="64"NeXTLEFT="70" WIDTH="93"32-bit hostidLEFT="170" WIDTH="113"hostidLEFT="290" WIDTH="115"170a3472LEFT="0" WIDTH="64"RS/6000LEFT="70" WIDTH="93"32-bit hostidLEFT="170" WIDTH="113"unmae -m (returns 
000276513100), then 
remove last 2 digits, and 
use remaining last 8 digitisLEFT="290" WIDTH="115"02765131LEFT="0" WIDTH="64"SCO (Current 
FLEXlm)LEFT="70" WIDTH="93"Hostid StringLEFT="170" WIDTH="113"unmae -x (returns 
SCO00354), then prefix 
with "ID_STRING="LEFT="290" WIDTH="115"ID_STRING=SCO00354LEFT="0" WIDTH="64"SCO (FLEXlm 
pre v.3.0)LEFT="70" WIDTH="93"LEFT="170" WIDTH="113"unname -x (returns 
SCO00354, then remove 
any non-hex proceeding 
letters from the serial 
numberLEFT="290" WIDTH="115"00354LEFT="0" WIDTH="64"SGILEFT="70" WIDTH="93"32-bit hostidLEFT="170" WIDTH="113"echo `/etc/sysinfo 
-s' 16o p | dcLEFT="290" WIDTH="115"69022F72LEFT="0" WIDTH="64"SUNLEFT="70" WIDTH="93"32-bit hostidLEFT="170" WIDTH="113"hostidLEFT="290" WIDTH="115"170a3472LEFT="0" WIDTH="64"VAX/VMSLEFT="70" WIDTH="93"Ethernet addressLEFT="170" WIDTH="113"ncpdLEFT="290" WIDTH="115"0800200055327LEFT="0" WIDTH="64"VAXLEFT="70" WIDTH="93"Ethernet addressLEFT="170" WIDTH="113"pfstatLEFT="290" WIDTH="115"0800200055327LEFT="0" WIDTH="64"WindowsLEFT="70" WIDTH="93"EthernetLEFT="170" WIDTH="113"lmutil lmhostidLEFT="290" WIDTH="115"0800200055327LEFT="0" WIDTH="64"LEFT="70" WIDTH="93"DISK_SERIAL_NUM
name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'32-bit hostidLEFT="170" WIDTH="113"DIR C:\ (look for 
"Volume Serial Number 
is", and remove `-')LEFT="290" WIDTH="115"DISK_SERIAL_NUM=1CA25283LEFT="0" WIDTH="64"LEFT="70" WIDTH="93"SENTINEL_KEYname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'
32-bit hostidLEFT="170" WIDTH="113"lmhostid -sentinelLEFT="290" WIDTH="115"SENTINEL_KEY=B285003LBL="a" ID="chap10TF0a"The "arp hostname" (substitute the name of the desired host) command must be issued on another machine 
on the network, not on the target machine. Alternately, the ethernet address can be read at boot time on the 
machine console.LBL="b" ID="chap10TF0b"Default fo FLEXlm v3.0 and above only.LBL="c" ID="chap10TF0c"Only for HP300. The ID module is the default hostid for FLEXlm v2.21LBL="" HELPID=""ID="20049"Special HostidsFLEXlm contains a number of "special" hostid types which apply to all platforms. These hostid types can be used on either a SERVER line or a FEATURE line, wherever a hostid is required. These are:ID="chap1041"ID="chap1042"USER=nameID="chap1043"Locks the software to UNIX user "name".DISPLAY=dispID="chap1044"Locks the software to display "disp".HOSTNAME=nodeID="chap1045"Locks the software to computer hostname "node".DISK_SERIAL_NUM=sn ID="chap1046"Locks the software to a PC with C drive serial number sn. (Windows and NT only)ID_STRING=stringUsed on SCO systems for hostid.SENTINEL_KEY=sn ID="chap1047"Locks the software to a PC with a SentinelSuperpro hardware key of serial number sn. (Windows and NT only)ANYID="chap1048"Locks the software to any node (i.e., does not lock anything)DEMOID="chap1049"Similar to ANY, but only for use with uncounted FEATURE linesINTERNET=nnn.n n.nnnID="chap1050"Locks the software to an Internet IP address, or group of IP addresses. Wildcards are allowed. For example, 198.156.*.* means any host with a matching internet IP address. The main use is to limit usage access by subnet, implying geographic area. For this purpose, it would be used on the FEATURE/INCREMENT line, as a hostid lock.NoteThe Internet hostid can be used on the SERVER line, as a hostid to lock the vendor daemon to. In this case, the wildcards should usually not be used, else the customer could easily start license managers on more than one node and obtain "extra" licenses.LBL="" HELPID=""ExamplesFEATURE f1 none 1.000 1-jan-95 0 AB28E0011DA1F13C62B3\
HOSTID=HOSTNAME=globesorFEATURE f1 none 1.000 1-jan-93 0 EB78201163B0CBBD6A07\HOSTID=USER=joeLBL="" HELPID=""See alsoIDREF="42751" TYPE="TITLE""Hostids for FLEXlm Supported Machines"IDREF="62250" TYPE="TITLE""Demo Software"IDREF="79592" TYPE="TITLE""FEATURE or INCREMENT Line"IDREF="53802" TYPE="TITLE""SERVER Line"IDREF="60608" TYPE="TITLE""Node Lock and Hostid for Standalone PCs"LBL="" HELPID=""ID="66223"Vendor-defined hostidID="chap1051"FLEXlm allows you to specify your own vendor-defined hostid types. In order to do this, follow these steps:Set up four routines to parse, retrieve, compare and print your hostid types:int parse_id(HOSTID *id, char *hostid)
HOSTID *retrieve_id(short idtype)
int check_id(HOSTID *id1, HOSTID *id2)andchar *print_id(HOSTID *id)parse_id takes the input "hostid" character string and returns the structure pointed to by "id". If successful, parse_id returns zero, otherwise non-zero value. retrieve_id returns a pointer to a HOSTID struct after retrieving the hostid of type "idtype".ID="chap1052"check_id takes two HOSTID pointers, and returns 0 if they are different; 1 if they are the same.print_id takes the input "id" struct and returns a pointer to the corresponding string. (Note: this string should be <= MAX_HOSTID_LEN bytes)ID="chap1053"Define your hostid types, with values >= HOSTID_VENDOR (see ID="chap1054"lm_client.h in the /lmgr/machind directory).Install your parsing and retrieval routines with lc_set_attr():lc_set_attr(LM_A_HOSTID_PARSE, parse_id);
lc_set_attr(LM_A_VENDOR_CHECKID, check_id);
lc_set_attr(LM_A_VENDOR_GETHOSTID, retrieve_id);
lc_set_attr(LM_A_VENDOR_PRINTHOSTID, print_id);
ID="chap1055"ID="chap1056"ID="chap1057"ID="chap1058"You should make sure that your hostid types do not use strings that could be confused with the FLEXlm standard hostids. For example, do not use "DEMO", "ANY", "USER=...", "HOSTNAME=...", or "DISPLAY=...". Globetrotter Software recommends using strings of the form "TYPE=VALUE" where TYPE is your new hostid type, and VALUE is the value of the hostid. The ENTIRE string (including the "TYPE=" part) must be less than MAX_HOSTID_LEN bytes (currently 41). Do NOT use "X" or "x" as the first character of your hostid name, and do not use the double quote character (") anywhere within your hostid.For example, you might create a new serial number hostid type (to be contained in a "hidden" file). You might then use:SERIAL_NUMBER=xxx (in your license file)You would define MYHOSTID_SERIAL_NUMBER (for use in your parsing and retrieval functions) as:#define MYHOSTID_SERIAL_NUMBER HOSTID_VENDOR + 1Finally, you would write parsing, retrieval, comparison and printing routines for the serial number, and call lc_set_attr() to make FLEXlm know about them. You should modify your vendor daemon, your application, create_license and lmcrypter to use your serial number routines.LBL="" HELPID=""See alsoIDREF="60608" TYPE="TITLE""Node Lock and Hostid for Standalone PCs"IDREF="42751" TYPE="TITLE""Hostids for FLEXlm Supported Machines"LBL="" HELPID=""Types of License FilesID="chap1059"Depending on the information in this file, the contents will be interpreted differently by FLEXlm. The license file supports network licensing, node locking, network licensing on a limited set of hosts, and demo/evaluation software.LBL="" HELPID=""ID="37821"Counted Vs. Uncounted LicensesID="chap1060"ID="chap1061"ID="chap1062"The license file will determine whether a license server is needed. If all the FEATURE (or INCREMENT/UPGRADE) lines have a license-count of 0 (unlimited), then no server is needed. This type of license can be called uncounted. Alternatively, if any FEATURE lines have a non-zero license-count, then a server is required to count those licenses. If you want to implement license management without requiring a server, you must issue uncounted licenses. Uncounted licenses do not use any networking and can therefore be safely used on systems where networking is not available.LBL="" HELPID=""Floating LicensesTo provide floating licenses (i.e., concurrent usage), the license file is created with no hostids specified for individual features. This allows anyone on a network that can reach the server nodes to use the licensed software, up to the concurrent usage limit specified in the license file. This is the normal case, and an example of such a license file is:SERVER sam 17001234 1700
DAEMON xxx /etc/xxx
FEATURE f1 xxx 1.00 1-jan-92 2 code1 "" 
FEATURE f2 xxx 1.00 1-jan-92 6 code2 ""
FEATURE f3 xxx 1.00 1-jan-92 1 code3 "" This license file would allow 2 copies of f1, 6 copies of f2, and 1 copy of f3 to be run anywhere on the network that could access server node "sam".LBL="" HELPID=""Node Locked, Uncounted LicensesID="chap1063"Node locking (i.e., single node use), is provided by specifying a hostid on the feature lines that represent node-locked features. If the number of licenses is set to 0, then unlimited use on the specified host is allowed, and no daemons are required (the license file can not contain INCREMENT lines in this case.). The following license file would allow unlimited usage of feature "f1" on the nodes with host IDs of 12001234 and 1700ab12:ID="chap1064"ID="chap1065"FEATURE f1 xxx 1.000 1-jan-90 0 code1 "" 12001234
FEATURE f1 xxx 1.000 1-jan-90 0 code2 "" 1700ab12LBL="" HELPID=""Node Locked, CountedIf a concurrent usage limit is desired on a single host, then daemons are specified as in standard floating licensing. To enable counted usage, simply set the number of licenses > 0. In this case, the SERVER and DAEMON lines must be present in the license file. The following license file allows 3 copies of feature "f1" to be run, but only on the node with hostid 1300ab43 (the daemons are configured to run on the same node that runs the software, since there is no reason to run the daemons on another node).ID="chap1066"SERVER sam 1300ab43 1700
DAEMON xxx /etc/xxx
FEATURE f1 xxx 1.00 1-jan-92 3 code "" 1300ab43LBL="" HELPID=""Concurrent Usage; Restricted nodesID="chap1067"To provide network licensing on a limited set of hosts, use INCREMENT. ID="chap1068"SERVER sam 17001234 1700
DAEMON xxx /etc/xxx
INCREMENT f1 xxx 1.00 1-jan-0 2 code1 "" 17001111
INCREMENT f1 xxx 1.00 1-jan-0 2 code2 "" 17002222
INCREMENT f1 xxx 1.00 1-jan-0 2 code3 "" 17003333In this example, feature f1 is separately counted for three separate hostids or nodes. Two uses on each are allowed.LBL="" HELPID=""Mixed Counted and Uncounted LicensesTo provide node-locked, uncounted licenses on one set of hosts, yet allow other licenses to float on the network, create a license file with some node-locked feature lines followed by a normal concurrent usage licensing feature line. It is important to put the node-locked lines first; otherwise users on the node-locked hosts will get the floating licenses first. In this case, you can use either FEATURE or INCREMENT lines.ID="chap1069"For example, the following license file would allow use of "f1" on nodes 17001111 and 17002222, while allowing 2 other copies of "f1" to be run anywhere else on the network:SERVER sam 17001234 1700
DAEMON xxx /etc/xxx
FEATURE f1 xxx 1.00 1-jan-92 0 code1 "" 17001111
FEATURE f1 xxx 1.00 1-jan-92 0 code2 "" 17002222
FEATURE f1 xxx 1.00 1-jan-92 2 code3 "" LBL="" HELPID=""ID="62250"Demo SoftwareID="chap1070"Demo/evaluation software is provided by setting the expiration date to the end date desired; the vendor-defined field can be used to turn off certain product features.    Demo software only operates in "node-locked, uncounted" mode with the word "DEMO" replacing the node ID; thus demo software can run on any node.   An example of a license file that supports DEMO software is:ID="chap1071"FEATURE f1 xxx 1.00 1-jan-92 0 code1 "" DEMO You can check if the currently checked-out feature is using a DEMO license via the following code:CONFIG *conf;
conf = lc_auth_data(feature); /* feature is currently checked out */
if (conf && conf->id.override == DEMO_SOFTWARE) /* it's a DEMO feature */; Of course, you are always free to implement demo software in any manner you choose, for example, by using the vendor-defined string.LBL="11"Configuration Guidelines and HintsThe following describes configuration guidelines in terms of how many daemons to run and how to keep your software secure.LBL="" HELPID=""Where to Install Your Licensing SoftwareWhen your installation procedure installs the FLEXlm software at your end-user site, there are some things you should keep in mind:All license server executables (lmgrd and vendor daemons) should be LOCAL on the system(s) which will run them. A corollary of this is that you should not run license servers on diskless nodes. (See IDREF="24917" TYPE="TITLE""ls_do_checkroot" for more information on diskless license server nodes.)There should be a local copy of the license file on each server node. It is fine to NFS-mount the license file for client access, but each server node should have a local copy. An even better approach is to set the ID="chap111"ID="chap112"LM_LICENSE_FILE environment variable to ID="chap113"port@host for all clients, unless the license file is particularly large (larger than 5K), in which case having a local copy of the license file be provide improved network performance. (See IDREF="35936" TYPE="TITLE""Locating the License File" for more information.It is poor policy to configure redundant servers and then keep only one copy of either the daemons or license filename='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'in this case you still have a single point of failure. Put a copy of ID="chap114"lmgrd, your vendor daemon, and the license file on the disk of each license server node.LBL="" HELPID=""ID="12922"Redundant vs. Single-server licensingYou will have to help your end-user decide how many server nodes to run, as the license keys are partially derived from the list of server node hostids.One server node is recommended, unless the network and/or server machines on the network regularly go down. In this case use three server nodes, so that any one can go down and still allow the software to run. Note that the server nodes do not have to be of the same machine architecture; all FLEXlm platforms (except VMS) can operate in a heterogeneous manner.ID="chap115"LBL="" HELPID=""How to Keep Your Software SecureNo software is completely secure. FLEXID="chap116"lm is no exception. While Globetrotter Software has made every effort to ensure the integrity of FLEXlm, all points of attack can never be anticipated. The following lists known points of vulnerability in FLEXlm in increasing order of difficulty to break.LBL="" HELPID=""EasyRunning the debugger on the application code if it is released with unstripped executables.LBL="" HELPID=""Very DifficultGuessing the license keys that belongs in the license file, see below.LBL="" HELPID=""Very DifficultWriting a new daemon that emulates your vendor daemon. FLEXlm encrypts the traffic between client and vendor daemon to make this point of attack much more difficult.LBL="" HELPID=""Very DifficultRunning the debugger on stripped executables. This would require someone to find the FLEXlm calls without any symbol table knowledge.LBL="" HELPID=""Difficult, depending on application policyKilling the daemons, since a majority of daemons must be up in order for anything to run, and a dead daemon is detected within the timer interval in a client. If, however, you do not use one of the built-in timers and you do not call lc_timerID="chap117", then your software protection could be bypassed by someone who kills the daemons each time that the application reaches the maximum license limit, as the applications would never detect that the daemon went down.To reduce the potential for theft by killing and starting daemons:call lc_timer() at least every 120 seconds (but not more often than every 30 seconds)Once reconnection is being attempted, exit after less than 5 minutes, and at least 3 reconnection attempts.FLEXlm's standard encryption algorithm takes the user-visible data fields (number of licenses, expiration date, feature version number, vendor-defined string, feature name, host IDs of all servers, plus any optional encrypted fields) and combines them with the vendor's private encryption seeds and the start date to produce a 20 hex-character license key. The algorithm used is a proprietary one-way block chaining encypherment of all the input data.LBL="" HELPID=""ID="16686"DEMO SoftwareID="chap118"FLEXlm provides the capability for you to create time-expired demo software with no source code changes. This is accomplished via appropriate selections when creating the customer license file. In order to create a license file that supports demo mode, simply select 0 as the number of licenses, and use "DEMO" as the node ID of the feature. Any such feature will run on any node until the feature's expiration date is reached. In addition, the application can detect that the enabling FEATURE line has a DEMO hostid, and can limit functionality appropriately. Some applications may then prefer to issue non-expiring DEMO licenses.ID="chap119"ID="chap1110"ID="chap1111"LBL="" HELPID=""Multiple Vendors Using FLEXID="chap1112"lm At A Single End-User SiteIn the case where multiple software vendors install FLEXlm-based products at a single end-user site, the potential for license file location conflicts arises. This section summarizes strategies that allow for a minimum of end-user inconvenience.There are basically two cases involved at an end-user site when more than one software vendor installs products.LBL="" HELPID=""Case 1All products use the same license server node(s).In this case, there are two solutions:The end-user can keep both license files separate, running two lmgrds, one for each license file. There's no drawback in this approach, since each lmgrd requires few system resources, and take almost no CPU time.You can combine license files by taking the set of SERVER lines from any one license file, and add all the other lines (DAEMON, FEATURE, INCREMENT, PACKAGE, UPGRADE, and FEATURESET lines) from all the license files. The combined license file can be located in the default location ID="chap1113"(/usr/local/flexlm/licenses/license.dat on UNIX platforms and C:\FLEXLM\LICENSE.DAT on Windows and Windows NT) or in any convenient location (with the end-user using the LM_LICENSE_FILE environment variable or license finder), or multiple copies can be located at fixed locations as required by the various software vendors. The user should leave a symbolic link to the "real" license file in the locations where each software package expects to find its license file.LBL="" HELPID=""See AlsoIDREF="88104" TYPE="TITLE""The License Finder (lmgrd -f)"IDREF="35936" TYPE="TITLE""Locating the License File"In practice, sites that have experienced system administrators often prefer to combine license files. However, sites with relatively inexperienced users, and no system administrator, usually do better leaving the files separate.LBL="" HELPID=""Case 2 The products use different license server node(s).In this case, separate license files will be required, one for each distinct set of license servers (where multiple software vendors use the same set of license server nodes, the technique described in case 1 above can be used to combine their license files).The resulting (multiple) license files can then be installed in convenient locations, and the user's ID="chap1114"LM_LICENSE_FILE environment variable would be set as follows.% setenv LM_LICENSE_FILE lfpath1:lfpath2:....:lfpathN"where: is the:lfpath1is the path to the first license file lfpath2is the path to the second license file..lfpathN is the path to the last (Nth) license file When products from different vendors use different versions of FLEXlm, always use the latest versions of lmgrd and the lmutil utilities.The latest version of lmgrd will always support any FLEXlm license. The end-user has to find out which lmgrd at their site is the latest version. This can be done using lmgrd -v to get the version. If an earlier version of lmgrd is used than the vendor daemon, then various errors may occur, especially "Vendor daemon can't talk to lmgrd (invalid returned data from license server)."LBL="" HELPID=""FLEXlm Version CompatibilityWhen an end-user has licensed products that incorporate various versions of FLEXlm, care must be taken to insure that the correct versions of lmgrd and the FLEXlm utilities are used. The basic rule is that the most recent (highest version number) lmgrd should be used. If the utility programs are FLEXlm v2.4 or later, then the newest utility programs should be used as well. If the utility programs are older than v2.4, then the oldest (lowest version number) utility programs should be used. This is due to the fact that the newest lmgrd knows how to support all versions of the vendor daemons, whereas utilities prior to FLEXlm v2.4 did not know how to communicate with the older vendor daemons. After FLEXlm v2.4, the utility programs automatically back off their communications version to enable them to work with all versions of the FLEXlm daemons.To determine the version of any FLEXlm-based product, use the following command:% lmver program_nameOnce you have determined the versions of all the software you want to use, do the following:Use the highest-numbered lmgrd that you have.Use the FLEXlm utilities that correspond to the oldest client or vendor daemon that you have in use., OR, use the newest utilities if they are FLEXlm v2.4 or newer. LBL="12"ID="19683"End-User License AdministrationID="chap121"LBL="" HELPID=""ID="76230"End-User Options FileID="chap122"End-users can customize their use of your software via the daemon options file provided by FLEXID="chap123"lm. This options file allows the end-user to reserve licenses for specified users or groups of users, to allow or disallow use of your software to certain people, to set software timeouts. The daemon options file is specified in the license file on the DAEMON line as the fourth parameter as follows:DAEMON daemon-name path [options-file]A daemon options file consists of lines in the following format:INCLUDE feature {USER|HOST|DISPLAY|GROUP|HOSTGROUP|INTERNET} name
INCLUDEALL feature {USER|HOST|DISPLAY|GROUP|HOSTGROUP|INTERNET} name
EXCLUDE feature {USER|HOST|DISPLAY|GROUP|HOSTGROUP|INTERNET} name
EXCLUDEALL feature {USER|HOST|DISPLAY|GROUP|HOSTGROUP|INTERNET} name
NOLOG {IN|OUT|DENIED|QUEUED}
GROUP name user1 user2 ...
LINGER feature seconds
NOLOG {IN|OUT|DENIED|QUEUED}
REPORTLOG file
RESERVE number feature {USER|HOST|DISPLAY|GROUP|HOSTGROUP|INTERNET} name
TIMEOUT feature timeout_in_seconds Lines beginning with the sharp character ("#") are ignored, and can be used as comments. If the filename in the REPORTLOG line starts with a "+" character, the old report log file will be opened for append.Lines can be up to 2000 characters, with backslash `\' continuation character used to make a line easier to read and type.NoteVersions prior to 4.0 did not support the backslash `\' continuation character, and, prior to FLEXlm v3.0, had a line limit of 200 characters.EXCLUDE ID="chap124"ID="chap125"allows the end-user to disallow certain users use of a particular feature. EXCLUDE overrides INCLUDE.EXCLUDEALL ID="chap126"allows the end-user to disallow certain users use of all features.GROUP ID="chap127"allows the specification of a group of users for use in the other commands. Multiple GROUP lines for the same group name will have the effect of concatenating all members specified on all the GROUP lines. (Prior to FLEXlm v3.0, only the last GROUP line for a given name was effective.)HOSTGROUPallows the specification of a group of hosts for use in the other commands. Multiple HOSTGROUP lines for the same group name will have the effect of concatenating all members specified on all the HOSTGROUP lines.INCLUDE ID="chap128"ID="chap129"allows the end-user to specify a list of users who are allowed access to a particular feature. EXCLUDE overrides INCLUDE.INCLUDEALL ID="chap1210"allows the end-user to specify a list of users who are allowed access to all features your daemon supports.LINGER ID="chap1211"causes licenses to be held by the vendor daemon for a period after the application checks them in or exits.NOLOG ID="chap1212"ID="chap1213"causes messages of the specified type to be filtered out of the daemon's log output; useful to save disk space.REPORTLOG ID="chap1214"specifies that a logfile be written suitable for use by the FLEXadmin report writer.RESERVE ID="chap1215"ID="chap1216"insures that your application software will always be available to one or more users or on one or more host computer systems.TIMEOUT ID="chap1217"allows licenses that are idle to be returned to the free pool, for use by someone else. This only works if the application supports it. TIMEOUT requires that the application not send lc_timer() heartbeats when its idle. If the application uses FLEXlm timers (ID="chap1218"LM_A_CHECK_INTERVAL > 0), it must call lc_idle(1), when idle and lc_idle(0)ID="chap1219" when not. If FLEXlm timers are disabled, then the application must ensure that it calls lc_timer()ID="chap1220" regularly when active, and not call it when inactive. If lc_timer() is not called regularly when active, the TIMEOUT option can cause the client to lose its license.All the INCLUDE and EXCLUDE family of options take an internet address in addition to USER, HOST, DISPLAY, and GROUP. The keyword is INTERNET, and the address is specified as follows:ID="chap1221"a.b.c.d(any of a, b, c, d can be "*"). For example:INCLUDEALL INTERNET 192.*.*.*This allows any user from network number 192 to access any feature supported by this daemon.The following options file would reserve a copy of feature compile for user pat, three copies for user lee, and a copy for anyone on a computer with the hostname of terry, and would cause QUEUED messages to be omitted from the log file. In addition, user joe would not be allowed to use the compile feature:RESERVE 1 compile USER pat
RESERVE 3 compile USER lee
RESERVE 1 compile HOST terry
EXCLUDE compile USER joe
NOLOG QUEUEDIf this data were in file /usr/local/flexlm/options/local.options, then you would modify the license file DAEMON line as follows:DAEMON XXX /usr/local/xxx /usr/local/flexlm/options/local.optionsLBL="" HELPID=""See alsoIDREF="43831" TYPE="TITLE""lc_set_attr"IDREF="84465" TYPE="TITLE""Configuring Your Vendor Daemon"For LINGER:IDREF="80393" TYPE="TITLE""Lingering Licenses"IDREF="51599" TYPE="TITLE""LM_A_LINGER"For TIMEOUT:IDREF="91352" TYPE="TITLE""lc_idle"IDREF="51258" TYPE="TITLE""lc_timer"IDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"IDREF="52105" TYPE="TITLE""ls_minimum_user_timeout"For FLEXadmin: call your Globetrotter Software sales representative.LBL="" HELPID=""Interaction Between RESERVE and the Duplicate Grouping MaskID="chap1222"ID="chap1223"A license reservation for an entity not contained in the duplicate grouping mask in the lc_checkout()ID="chap1224" call (e.g., a USER) when the duplicate grouping mask is LM_DUP_HOST | LM_DUP_DISPID="chap1225"ID="chap1226") can cause an interesting interaction at run-time. To understand why this is the case, consider the following example:Your software groups duplicates based on USER and DISPLAYYour end-user has a license file with a single licenseYour end-user reserves this license for HOST "nodea"User "joe" on display "displaya" on HOST "nodea" checks out a license. He gets the license, since his HOST matches the reservation.User "joe" on display "displaya" on HOST "nodeb" checks out a license. He also gets a license, since he is grouped with the first license as a duplicate.The first user (joe/displaya/nodea) checks in his license.At this point in the example, the situation appears to be inconsistent. The second user continues to hold the reservation, which means that a user on "nodeb" is using a license reserved for nodea. Once this second user checks in the license, the reservation will return to the pool of reservations, to be used by anyone on "nodea".Globetrotter Software believes that the potential temporary inconsistency is better than the alternative, which is to have an unusable reservation.LBL="" HELPID=""See alsoIDREF="65026" TYPE="TITLE""lc_checkout"LBL="" HELPID=""ID="57661"License Administration ToolsAll license administration tools are contained in the single executable lmutilID="chap1227". lmutil contains the following utility programs:lmcksum ID="chap1228"lmdiaglmdownlmhostidlmremovelmrereadlmswitch (VMS only)lmswitchrlmstatlmutil behavior is determined by its first argument, or its argv[0] name. lmutil renamed to lmstat will behave the same as "lmutil lmstat". The INSTALL script creates hard links from lmutil to all program names listed when you install your FLEXlm kit. You should also create the hard links when your software is installed on your customer's system.All utilities take the following arguments:-vprint version and exit-c license_fileoperate on "license file"NoteThe lmdown, lmremove, and lmreread commands are "privileged". If you have started lmgrd with the "-p -2" switch, you must be a "license administrator" to run any of these three utilities. A "license administrator" is a member of the UNIX "lmadmin" group, or, if the lmadmin group does not exist, a member of group 0. In addition, lmgrd -x can disable lmdown and/or lmremove.LBL="" HELPID=""lmcksumID="chap1229"The lmcksum program will perform a checksum of a license file. This is useful to verify data entry errors at your customer's location. lmcksum will print a line-by-line checksum for the file as well as an overall file checksum. If the license file contains "cksum=nn" attributes, the bad lines will be automatically indicated.lmcksum will ignore all fields that do not enter into the license key computation; thus the server node name and port number, as well as the daemon pathname and options file names are not checksummed. In addition, lmcksum will treat non-case sensitive fields correctly (in general, lmcksum is not case-sensitive). lmcksum takes the "-k" switch to force the license key checksum to be case-sensitive. lmcksum takes an optional daemon name; if specified, only license file lines for the selected daemon are used to compute the checksums.By default, lmcksum operates on license.dat in the current directory. Specify -c license_file if you want to checksum another license file. Example output is:lmcksum - Copyright (C) 1989, 1994 Globetrotter Software, Inc.
lmcksum: using license file "/usr/local/flexlm/licenses/license.dat"

189: SERVER speedy 08002b32b161 2837
166: DAEMON demo /u/gsi/lmgr/src/testsuite/demo 
8: FEATURE f1 demo 1.000 01-jan-99 0 3B2BC33CE4E1B8F3A0BF "" 08002b32b161
109: (overall file checksum)LBL="" HELPID=""ID="36648"lmdiaglmdiag allows you to diagnose problems when you cannot check out a license.lmdiag [-c license_file] [-n] [feature]where: is the:-c license_filepath to file to diagnose.-n run in non-interactive mode; lmdiag will not prompt for any input in this mode. In this mode, extended connection diagnostics are not available. featurediagnose this feature only. If no feature is specified, lmdiag will operate on all features in the license file(s) in your path. lmdiag will first print information about the license, then attempt to check out each license. If the checkout succeeds, lmdiag will indicate this. If the checkout fails, lmdiag will give you the reason for the failure. If the checkout fails because lmdiag cannot connect to the license server, then you have the option of running "extended connection diagnostics". These extended diagnostics attempt to connect to each port on the license server node, and can detect if the port number in the license file is incorrect. lmdiag will indicate each port number that is listening, and if it is an lmgrd process, lmdiag will indicate this as well. If lmdiag finds the vendor daemon for the feature being tested, then it will indicate the correct port number for the license file to correct the problem. LBL="" HELPID=""ID="88547"lmdownThe lmdown utility allows for the graceful shutdown of all license daemons (both ID="chap1230"lmgrd and all vendor daemons) on all nodes. Usage is:% lmdown [-c license-file]The daemons which will be shut down will be the daemons specified in /usr/local/flexlm/licenses/license.dat(or C:\FLEXLM\LICENSE.DAT for Windows and Windows NT) or the license file pathname in the environment variable LM_LICENSE_FILE.   In addition, lmdown takes the "-c license_file_path" argument to specify the license file location. If you wish to restrict the use of lmdown to license administrators, start lmgrd with the "-2 -p" switch. It is reasonable to restrict the execution of lmdown, since shutting down the servers will cause loss of licenses. To disable lmdown, the license administrator can use "lmgrd -x lmdown".LBL="" HELPID=""See alsoIDREF="96005" TYPE="TITLE""lmgrd"LBL="" HELPID=""ID="36467"lmhostidID="chap1231"The lmhostid program is used to print the correct hostid value on any machine supported by FLEXID="chap1232"lm. Usage is:lmhostid [type]where: is the:typethe type of hostid to print. Type must be one of "long", "idmodule", "ether", or "string", and is currently used only on HP and SCO systems. On HP, ID="chap1233"ID="chap1234"type specifies the ID module, the machine id as returned from the uname command, or the ethernet address. The HP default is "long" name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' uname. On SCO, long specifies the pre-3.0 default, which was a 32-bit long int, while "string" specifies a string hostid, which is the new default.The output from lmhostid will be similar to the following: lmhostid - Copyright (C) 1989, Globetrotter Software, Inc. 
The FLEXlm host ID of this machine is "1200abcd"LBL="" HELPID=""See alsoIDREF="42751" TYPE="TITLE""Hostids for FLEXlm Supported Machines"LBL="" HELPID=""ID="90930"lmremoveID="chap1235"The lmremove utility allows the system administrator to remove a single user's license for a specified feature. This could be required in the case where the licensed user was running the software on a node that subsequently crashed name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' in these cases, due to a limitation in the way TCP works, it can take several hours for the license server to detect that the user is gone. This situation will sometimes cause the license to remain unusable.ID="chap1236"ID="chap1237"NoteNote:If the application is still active when it is removed with lmremove, it will simply checkout the license again (assuming the applications FLEXlm timers are enabled, or lc_timer() is called). lmremove therefore cannot be used to "steal" licenses.lmremove will allow the license to return to the pool of available licenses.Usage is:lmremove [ -c file ] feature user host displayThe user host display information must be obtained from the output of lmstat -a.lmremove removes all instances of user on host on display from usage of feature. If the optional "-c file" is specified, the indicated file is used as the license file. The end-user system administrator should protect the execution of lmremove since removing a user's license can be disruptive.An alternate usage, which makes use of the license handle in the vendor daemon, is:lmremove [-c file] -h feature serverhost port handleThis variation uses the severhost, port, and license handle, as reported by lmstat a. Consider this example lmstat a output:joe cloud7 /dev/ttyp5 (v1.000) (cloud9/7654 102), start Fri 10/29 18:40In this example, the serverhost is "cloud9", the port is "7654" and the license handle is 102, so to remove this license, issue the following command:lmremove -h f1 cloud9 7654 102orlmremove f1 joe cloud7 /dev/ttyp5When removing by handle, if licenses are grouped as duplicates, all duplicate licenses will also be removed.LBL="" HELPID=""See alsoIDREF="51258" TYPE="TITLE""lc_timer"IDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"ID="chap1238"IDREF="65846" TYPE="TITLE""ls_min_lmremove"LBL="" HELPID=""lmrereadID="chap1239"The lmreread utility causes the license daemon to reread the license file and start any new vendor daemons that have been added. In addition, all pre-existing daemons will be signaled to re-read the license file for changes in feature licensing information. If the optional daemon name is specified, only the named daemon will re-read the license file (in this case, lmgrd does not re-read the license file either).Usage is:lmreread [ daemon ]NoteIf the -c option is used, the license file specified will be read by lmreread, not by lmgrd; lmgrd re-reads the file it read originally. Also, lmreread cannot be used to change server node names or port numbers. Vendor daemons will not re-read their option files as a result of lmreread.LBL="" HELPID=""ID="47746"lmstatID="chap1240"License administration is simplified by the lmstat utility. lmstat allows the user of FLEXlm to instantly monitor the status of all network licensing activities. lmstat allows a system administrator at an end-user (or application developer) site to monitor license management operations including:which daemons are runningusers of individual featuresusers of features served by a specific DAEMONUsage is:lmstat [-a] [-S [daemon]] [-f [ feature]] [-i feature] 
[-s [server]] [-t value] [-c license_file] [ -A ] 
[-l [regular expression]-aDisplay everything-AList all active licenses-c license_fileUse license_file-S [daemon]Restrict output to one daemon, and the features and users of that daemon-f [feature_name]List users of feature(s)-i [feature_name]Prints information about the named feature, or all features if no feature name is given.-s [server_name]Display status of server node(s)-t valueSet lmstat timeout to valuelmremove requires the output of lmstat -a.Notelmstat -a is a potentially expensive command. With lots of active users, this call can generate a lot of network activity, and therefore should not be used too often.LBL="" HELPID=""lmswitchID="chap1241"NoteThe lmswitch command is available on VMS only.The lmswitch utility switches the debug log file for the daemon serving the specified feature while the daemon is running. Usage is:lmswitch feature new-filewhere: is the:featureany feature this daemon supports.new-fileNew file path.Of course, for this syntax to work, lmswitch needs to be installed as a foreign command. The new logfile will be opened for write, rather than append, so it is possible to "switch" to the same filename in order to be able to view the old log file.LBL="" HELPID=""lmswitchrID="chap1242"The lmswitchr utility switches the FLEXadmin (REPORTLOG) log file for the specified feature. Usage is:lmswitchr feature new-fileLBL="" HELPID=""See alsoIDREF="76230" TYPE="TITLE""End-User Options File" for REPORTLOGID="chap1243"LBL="" HELPID="" lmverID="chap1244"The lmver program reports the FLEXlm version of a library or binary. Usage is:lmver [filename]If a filename is specified, the FLEXlm version incorporated into this file is displayed, otherwise lmver looks for the library file liblmgr.a to detect its version.LBL="" HELPID=""Switching the Debug Log File Under UNIXID="chap1245"The FLEXlm daemons create an ascii Debug log file on stdout. There are several processes in a parent-child hierarchy which are sharing the same file pointer, so this log file cannot be changed after the vendor daemons have been started, since each process has a copy of the current offset, etc.There is another way to switch the log file output data however; this involves piping the stdout of lmgrd to a shell script that appends each line to a file. This is done as follows:Instead of the "normal" startup:% lmgrd > LOG
ID="chap1246"Start lmgrd this way:% lmgrd -z | sh -c 'while read line; do echo "$line" >> LOG ; done'With this startup method, the output file "LOG" can be renamed and a new log file will be created. You could even make "LOG" a symbolic link and change the value of the link to "switch" the log file.LBL="" HELPID=""ID="85668"Communications Transport (TCP vs. UDP)ID="chap1247"ID="chap1248"ID="chap1249"FLEXlm v3.0 and later optionally support the UDP connectionless transport, in addition to the default TCP connection-based transport. Note that this does not apply to VMS systems. See ID="chap1250"IDREF="42036" TYPE="TITLE""Communications transport" for a discussion of VMS communications transport.LBL="" HELPID=""How to Select UDP ConnectionsID="chap1251"UDP can be selected by the application or by the end-user, in the following ways:The application can call:lc_set_attr(LM_A_COMM_TRANSPORT, LM_UDP);
ID="chap1252"The end-user can set the comm transport with the ID="chap1253"FLEXLM_COMM_TRANSPORT environment variable:% setenv FLEXLM_COMM_TRANSPORT UDPThe comm transport can be selected in the daemon options file, with the line:TRANSPORT UDP
ID="chap1254"orTRANSPORT TCPThe application can prevent the user from setting the TRANSPORT mode via: ID="chap1255"lc_set_attr(LM_A_ALLOW_SET_TRANSPORT, 0);
ID="chap1256"The environment variable and options file settings are disabled with this call.FLEXlm defaults to TCP, and all the above options can be set to TCP. The order of precedence is (higher number takes precedence over lower number):default TCPOptions file specified name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'COMM_TRANSPORTID="chap1257"Environment variable specified name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'FLEXLM_COMM_TRANSPORTID="chap1258"LM_A_ALLOW_SET_TRANSPORTID="chap1259" == false, Options file and Environment variable are disabled.Set in application name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'LM_A_COMM_TRANSPORTID="chap1260"Vendor daemon is pre-v3.0name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' TCP only.LBL="" HELPID=""UDP Behavioral DifferencesID="chap1261"Servers that use UDP clients require a small, fixed number of sockets. This can be preferable on systems with limited resources and a large number of clients (500 or more). In addition, they never need to spawn additional vendor daemons, as TCP servers do when they use up the maximum number of file descriptors.When a UDP client dies without doing a checkin, the server does not become immediately aware of this, but will time the license out. Therefore, applications should always call lc_checkin() before exiting. The default for a timeout is 45 minutes, but can be set in the application via:lc_set_attr(LM_A_UDP_TIMEOUT, <# seconds>);Therefore, a UDP client which does not, or is unable to, call lc_checkin(), will have a license checked out for 45 minutes (by default) after the program exits. This behavior will also be affected by LM_A_CHECK_INTERVAL. In particular, for UDP clients, LM_A_CHECK_INTERVAL must never be longer than LM_A_UDP_TIMEOUTID="chap1262", or the client will be timed out for no good reason. This is not normally fatal, but a client could lose a license to someone else in trying to retrieve it after being timed out.Applications that call lc_timer directly must ensure that they call it often enough to prevent being timed out.When a client has to reconnect to a server (which can happen for numerous reasons), the reconnection process requires 10 seconds for the client to timeout the read from a server which is down. With TCP, this recognition is instantaneous. The result is that a server's failure will cause a client using UDP to hang for a minimum of 10 seconds, while with a TCP client, this recognition is transparent.In Globetrotter Software's testing environment, we have found no discernible performance advantage in checking out licenses or getting status information via either TCP or UDP. Based on test results, we find TCP to be a far superior mode of communication, and should be used wherever possible.LBL="" HELPID=""See alsoIDREF="43831" TYPE="TITLE""lc_set_attr"IDREF="51258" TYPE="TITLE""lc_timer"IDREF="10309" TYPE="TITLE""LM_A_ALLOW_SET_TRANSPORT"IDREF="53814" TYPE="TITLE""LM_A_CHECK_INTERVAL"IDREF="62518" TYPE="TITLE""LM_A_COMM_TRANSPORT"IDREF="76230" TYPE="TITLE""End-User Options File"LBL="13"End-User Installation Instruction TemplateTo ensure that your customers can use your FLEXlm-managed product easily and successfully, use the following chapter as minimal guidelines about what they need to have and what information they need to know.LBL="" HELPID=""Binaries Your Customers Will RequireWhen your application software is built with the calls to FLEXlm, you will need to ship the following three files in addition to the files that you normally ship in your installation kit.license.datID="chap131"The license file, customized for your customer.lmgrdID="chap132"The License Manager daemon (license daemon).xyzdYour vendor daemon.LBL="" HELPID=""Information every Customer Needs to KnowIn addition to installing your software your customer will need to:Install license.dat in /usr/local/flexlm/licenses, (or C:\FLEXLM\LICENSE.DAT for Windows NT systems) on any machine that is to run your application and on any server nodes, with a separate copy on each of the server nodes. The license file should be accessible to any user of your software.If you or the end-user decides to put the license file somewhere other than /usr/local/flexlm/licenses/license.dat (or C:\FLEXLM\LICENSE.DAT for Windows NT systems), then use one of the following methods for the daemon to locate the license file:Method A: Start the license daemon as follows.% lmgrd -c license_file_pathwhere license_file_path is the full pathname to the license file.Globetrotter Software recommends the use of the c option to locate the license file if the default location cannot be used.Method B: Use the environment variable LM_LICENSE_FILE to override the location of the license file. For example:% setenv LM_LICENSE_FILE license_file_pathorC:\>set LM_LICENSE_FILE=license_file_path 
(for Windows NT systems)where license_file_path is the full pathname to the license file. NoteThe c option overrides the setting of the LM_LICENSE_FILE environment variable.Install lmgrd and xyzd.Add the line: nohup lmgrd > license.log &ornohup lmgrd > license.log 2>&1 &to either /etc/rc.boot, or /etc/rc.local file. Remember that /etc/rc.local is run as a Bourne shell, so do not use the csh ">&" redirection syntax.The nohup command is used to trap the SIGHUP signal, and is required on some systems, and is safe to use on all systems for lmgrd with the BOURNE shell only.On RS/6000, ID="chap133"lmgrd cannot be started in /etc/rc; this is because on that OS, the TCP/IP networking is started after /etc/rc is run. IBM has recommended that this be performed in the /etc/inittab file. Add a line like this to /etc/inittab after the lines which start networking:rclocal:2:wait:/etc/rc.local > /dev/console 2>&1In /etc/rc.local add a line to start the daemon:nohup /etc/lmgrd -c license_file_path > /etc/license.log 2>&1 &To the /etc/services file add the line:FLEXlm 1200/tcpIf the TCP/IP port number is included in the license file, this step is not required.If the daemons are to be run from a non-root account, the specified port number must be greater than 1024.NoteThe FLEXlm service has been assigned port number 744 by the Network Information Center (NIC).If the network is running NIS, then this line must be added on the NIS master, and the services map must be propagated to the network.If modifying the /etc/services file is unacceptable, then add the port number at the end of "SERVER" lines in the license file. If a port number is present in the license file it will be used. The following illustrates a modified server line.SERVER mynode 1700ae83 1200In this example, TCP/IP port 1200 will be used for the license manager daemons.LBL="14"UNIX and VMS ID="17446"Platform-Specific NotesLBL="" HELPID=""ApolloID="chap141"FLEXlm v2.4 executables and later will not run on Apollo SR10.1. The FLEXlm kit, however, contains everything required to re-build all executables on these Apollo releases. If you need to support SR10.1, you will need to re-build lmgrd, the FLEXlm utilities, and your vendor daemon on SR10.1.LBL="" HELPID=""DGID="chap142"On DG systems the daemon lockfile MUST be on a local filesystem (not NFS-mounted).LBL="" HELPID=""HPID="chap143"The /dev/lan0 device must be readable to obtain an ethernet hostid. The uname -i hostid is preferable for this reason, and because ethernet is not always present.In version 2.4, /dev/lan0 must have read and write permissions for everyone. Ethernet and FDDI are known to be supported devices, although earlier versions of HPUX had a bug with FDDI as hostid.LBL="" HELPID=""IBMID="chap144"IBM changed the system call that returns the node id (uname) several times; most recently, in AIX 3.1, the low-order decimal digit of the machine serial number was left off. The AIX 3003 version has a corrected system call which returns the entire serial number. This means that the hostid of your customer's RS/6000 system CAN CHANGE when they upgrade OS revisions. We know of no workaround other than to re-issue passwords.ID="chap145"ID="chap146"We believe that this condition stabilized in AIX v3.1.LBL="" HELPID=""NCRID="chap147"Redundant servers are not supported on NCR systems, due to a bug in the accept() networking call on these platforms. The permissions on the /dev/lan0 ID="chap148"device must be readable to obtain a hostid.LBL="" HELPID=""SGIID="chap149"On SGI systems, NIS is not enabled in your application by default. In order to build your program (and vendor daemon) for NIS support on SGI systems, add the following libraries at the end of your ld command:-lsun -lbsd -lc_sLBL="" HELPID=""SVR4 SystemsID="chap1410"ID="chap1411"All SVR4 systems, including Solaris 2.x, require linking with -lsocket -lnsl. Solaris 2.x also requires -lintl. (OSF/1 does NOT require these link flags, although it is otherwise similar to SVR4).LBL="" HELPID=""UltrixID="chap1412"The Ultrix ethernet address lookup algorithm will search all ethernet devices, if the device is not found in the vendor-supplied or standard tables. The search order is now:vendor-supplied table.standard table.generic lookup.LBL="" HELPID=""VMSID="chap1413"ID="chap1414"Redundant server hosts are not supported on VMS.FLEXlm client routines continue to use SIGALRM and setitimer(), as they do on the UNIX version. The FLEXlm implementation of setitimer() uses the alarm() call on VMS.On VMS, the SYSNAM and SYSLCK privileges are required to run the daemons.Vendor daemons support up to 255 clients each.LBL="" HELPID=""ID="42036"Communications transportThe VMS version of FLEXID="chap1415"lm uses DECnet as a transport, rather than TCP/IP. This means that VMS servers cannot serve UNIX clients, and UNIX servers cannot serve VMS clients.ID="chap1416"LBL="" HELPID=""Special AST ConsiderationsIf you let FLEXlm do its checking automatically, the check routine is implemented with signals (i.e., it runs at AST level). Therefore, if you use any of the following handler routines:LM_A_USER_RECONNECTLM_A_RECONNECT_DONELM_A_USER_EXITCALLLM_A_PERIODIC_CALLyou should be careful to code them such that they can work at AST level. Note that you can call any of the FLEXlm client routines (routines that start with "lc_") from AST level.If you use your own encryption routine (the "crypt" member of the setup struct), this routine must be coded to work properly from AST level.LBL="" HELPID=""DECnet Logical LinksEach FLEXlm client requires a pair of DECnet logical links. A typical default for the maximum # of logical links is 32, therefore, you will need to increase this parameter on the node that runs your vendor daemon(s). Do this with the following NCP command sequence.$ mcr ncp
NCP> set exec links 100To show how many logical links your system is configured for, do the following:$ mcr ncp
NCP> show exec charThe result will be displayed as "MAXIMUM LINKS".Setting the number of links to 100 should allow for 30 FLEXlm clients and a sufficient number of links for other uses. (If your current number of links is greater than 32, increase it accordingly).LBL="" HELPID=""ID="42247"VMS Ethernet Device SupportVMS supported ethernet devices:_xqa0:DELQA, DEQNA, DESQA_xea0:DEUNA, DELUA_esa0:DESVA_eta0:DEBNA_ewa0:Alpha_eza0:uVax 4000_exa0:Vax 9000If your customer's device is not one of the supported devices, they can "add support" by doing an assign. The standard table includes the logical device names "flexlm_hostid0", "flexlm_hostid1", "flexlm_hostid2", and "flexlm_hostid3". Assuming that your customer has ethernet device qqa0:, the following assign statement would add device qqa0:$ assign _qqa0: flexlm_hostid0This assignment would be done in the process that runs the daemon (for floating licenses) or the process that runs your application (for nodelocked licenses).LBL="15"ID="34811"Windows, Win32s, and Windows NTID="chap151"ID="chap152"ID="chap153"This version of FLEXlm supports the full feature (client and server) of FLEXlm on Windows NT systems and the client library on Windows. On Windows systems, both 16 bit and 32 bit mode applications are supported. 32 bit Win32s applications can be linked with the FLEXlm Windows NT library lmgr32.lib to work in both the Win32s and Windows NT environments. LBL="" HELPID=""Supported CompilersSince the FLEXlm client library on Windows/NT is implemented as a standard DLL, it can interface with almost any compiler. However, to build your vendor daemon on a Windows NT system, FLEXID="chap154"lm supports only the Microsoft C/C++ compiler.In order for FLEXlm API include files to compile properly on Windows platforms, one of the following three compile time flag must be defined: _MSDOS, _WINDLL, or _WINDOWS. On Windows NT systems, an additional compile time flag, WINNT, must be defined. This flag will be used to include proper macro definitions in lm_clien.h for FLEXlm on Windows and Windows NT systems. If you use the Microsoft C/C++ compiler for Windows, this flag is defined automatically by the compiler.LBL="" HELPID=""Stack Space RequirementThe FLEXlm DLL, like all Windows/NT DLLs, operates on the calling application's stack. The FLEXlm DLL requires a maximum of 6K bytes of stack space in addition to your application's stack requirement.LBL="" HELPID=""lc_init() and lc_free_job() Must Be MatchedID="chap155"ID="chap156"lc_init() creates a license job, and lc_free_job() marks the end of the license job. FLEXlm applications must match lc_free_job() with lc_init() perfectly to avoid unexpected system problems on Windows. The reason for this requirement is the following: FLEXlm issues a Windows Socket WSAStartup()ID="chap157" call in lc_init(), and WSACleanup()ID="chap158" is issued by lc_free_job(). Failure to match lc_init() with lc_free_job() will cause unmatched WSAStartup() and WSACleanup(), which violates the WinSock specification and often results in an unstable system.ID="chap159"LBL="" HELPID=""FLEXlm Callback RoutinesFLEXlm API supports application callbacks on various events such as lost of license and hostid acquisition. Like all Windows SDK standard callback routines, FLEXID="chap1510"lm application callback routines must be declared as an __exported CALLBACK procedure. The callback routine should also be declared in the EXPORT section of your application's .DEFID="chap1511" file. In addition, the procedure entry point must be derived from Windows SDK MakeProcInstance() call. The following code segment from the sample program demonstrates how this should be done:;
;       This is your application .DEF file
;
...............
EXPORTS
Quit @1 ; All FLEXlm callback routines should have
; their individual line in the EXPORTS
; section.
;
;       End of .DEF file
;

//
//FLEXlm callback routine on the event of  lost license.
//CALLBACK is defined in  <windows.h> as _far _pascal.
//Declaring  __export instruct the compiler to generate prolog
//and epilogue to set up and restore DS register from AX. AX
//register will be set to your applications data segment by
// the function whose pointer is returned to you by Windows (NT)
//MakeProcInstance()call (see the next code segment for
//MakeProcInstance() usage).
//
extern "C" void  __export CALLBACK Quit(char *feature)
{
//
// Add application code here to take action when license is
// lost.
//
.....
}


//
//Register callback routines when broken connection to
//license server is detected. FLEXlm application must register
//the pointer returned by MakeProcInstance() as callback
//address.  lpfn will set up application data segment value in
//AX for the prolog of an __export routine to set up its DS
//register.
//

FARPROC lpfn;
lpfn = (FARPROC) MakeProcInstance( (FARPROC) Quit, hInstance );
(void) lc_set_attr (LM_A_USER_EXITCALL, (long) lpfn); LBL="" HELPID=""FLEXlm exit() CallbackYour application must call lc_set_attr(LM_A_USER_EXITCALL, ExitProc) to set a callback routine to take action when FLEXlm loses connection to the license server. The default callback routine, exit(), for FLEXlm on UNIX is not supported on Windows/NT systems. LBL="" HELPID=""Default License FileThe default location for the license file on Windows and Windows NT is C:/FLEXLM/LICENSE.DAT.LBL="" HELPID=""Time Zone SettingAn optional part of FLEXlm's client/server handshake procedure is to check the difference between their system time settings. The allowed difference in minutes is set by the client program using lc_set_attr(LM_A_MAX_TIMEDIFF, x). On Windows and Win32s systems, the FLEXlm client library checks the time zone environment variable, TZ,ID="chap1512" to adjust local time (set by the DOS TIME command) to Universal Coordinated Time (UCT, the same as GMT) in order to communicate with the FLEXlm server which may be anywhere in the world. On Windows NT systems, the user has to use the control panel to set the time and time zone correctly.Use the following DOS syntax to set the TZ environment variable:set TZ=tzn[+|-]hh[:mm[:ss]][dzn]NoteThis is only required if you call lc_set_attr(LM_A_MAX_TIMEDIFF, *).The tzn must be a three-letter time-zone name, such as PST, followed by an optionally signed number, hh, giving the difference in hours between UCT and local time. To specify the exact local time, the hours can be followed by minutes (:mm), seconds (:ss), and a three-letter daylight savings time zone, dzn, such as PDT. Separate hours, minutes, and seconds with colons (:). If daylight savings time is never in effect, as is the case in certain states and localities, set TZ without a value for dzn. If the TZ value is not currently set, the default is PST8PDT, which corresponds to the Pacific time zone.For example, to set the TZ environment variable to correspond to the current time zone in Germany, you can use either one of the following forms:set TZ=GST1GDT
set TZ=GST+1GDTThis uses the letters GST to indicate German Standard Time, though you can use any combination of three letters. This syntax assumes that Germany is one hour ahead of UCT, and that this timezone uses daylight savings timeLBL="" HELPID=""ID="60608"Node Lock and Hostid for Standalone PCsAs in FLEXlm on UNIX, the FLEXlm for Windows and Windows NT also supports node locking. Several important issues should be considered when designing a node- lock licensing scheme for Windows and Windows NT systems. One or more of the following four options can be adopted to implement the node locking scheme that best fits your products.Hostid implementation is essential to designing a node lock scheme, and the fact that PCs in general do not have a unique serial number is a problem. FLEXlm for Windows and Windows NT can use the 4-byte volume serial number on the C: drive as the hostid for the PC. Your end-user may issue a DIR command on C: to get the serial number. The serial number is presented by DOS in hex form, and this number can be used in the hostid field of a license file. Please note that when a disk serial number is to be used as a hostid, you must use the format DISK_SERIAL_NUM=xxxxxxxx where x is a hexadecimal number. This is the default solution.There are two disadvantages to the volume serial number solution. First, disk serial number is only supported by DOS version 4.0 and later. Second, hard disk serial numbers can be changed by software with a single DOS file system IOCTL call.   Therefore, FLEXlm offers a hardware solution using an external hardware key available from Globetrotter Software. Where in the license file a hostid is of the form SENTINEL_KEY=xxxxxxxx, FLEXlm will then assume that a hardware key solution for hostid is desired.On Windows system, FLEXlm can use NDIS or Packet Driver interface specification to retrieve the Ethernet address as a hostid. When generating license files for this type of node lock scheme, simple use the 6 digit Ethernet address without any prefix.If none of the above solutions is satisfactory, FLEXlm provides a set of callback routines for vendors to implement their private hostid.   An application may use lc_set_attr(LM_A_HOSTID_PARSE, x), lc_set_attr(LM_A_VENDOR_CHECKID, x),lc_set_attr(LM_A_VENDOR_PRINTID, x), andlc_set_attr(LM_A_VENDOR_GETHOSTID, x)to integrate a private hostid scheme into FLEXlm. The included sample program demonstrates how this can be done in WINTEVW.CPP.LBL="" HELPID=""See alsoIDREF="20049" TYPE="TITLE""Special Hostids"LBL="" HELPID=""Debugging FLEXlm Windows and Windows NT Application and DLLThe FLEXlm Client Library for Windows and Windows NT includes two sets of DLLs:COLUMNS="3"LBL="15-1"Table 15-1 DLLsLEFT="0" WIDTH="72"DLL NameLEFT="80" WIDTH="72"PlatformLEFT="160" WIDTH="243"PurposeLEFT="0" WIDTH="72"LMGR.DLLLEFT="80" WIDTH="72"WindowsLEFT="160" WIDTH="243"Release version for 16 bit Windows ApplicationsLEFT="0" WIDTH="72"LMGR.DBGLEFT="80" WIDTH="72"WindowsLEFT="160" WIDTH="243"Debug version for 16 bit Windows ApplicationsLEFT="0" WIDTH="72"LMGR32.DLLLEFT="80" WIDTH="72"Win32s,NTLEFT="160" WIDTH="243"Release version for 32 bit Win32 ApplicationsLEFT="0" WIDTH="72"LMGR32.DBGLEFT="80" WIDTH="72"Win32s,NTLEFT="160" WIDTH="243"Debug version for 32 bit Win32 ApplicationsThe debug version of DLLs have all the functionality of the non-debug version. In addition, they also include the DLL's symbol table and code to output debug messages. Debug version DLLs use standard Windows (NT) SDK OutputDebugString() to output debug messages to your debugging terminal or the auxiliary display. Where a debugging terminal is not available, you may also use the DebugWin program provided by Windows (NT) SDK to catch those debug messages.ID="chap1513"In debug or non-debug mode, your application will link with the import library LMGR.LIB for 16 Windows applications and LMGR32.LIB for WIN32 and Win32s applications. To turn on debug mode, copy the debug version of DLL to the non-debug version before you start your application. To turn off debugging, copy back the original non-debug version DLL. For example, to turn on debugging on Windows system, issue the following commands:C:\lmgr\bin> copy lmgr.dll lmgr.org
C:\lmgr\bin> copy lmgr.dbg lmgr.dllTo turn off debugging, simple copy the original DLL back:C:\lmgr\bin> copy lmgr.org lmgr.dllLBL="" HELPID=""Unsupported API RoutinesThe following API service routines are not supported on Windows and Windows NT systems:ID="chap1514"ID="chap1515"lc_startup()lc_set_attr(ID="chap1516"LM_A_PERIODIC_CALL, x)            lc_set_attr(ID="chap1517"LM_A_PERIODIC_COUNT, x)LBL="" HELPID=""Sample Client ProgramA sample Windows and Windows NT application program and its source code are included. This sample program is written using the Microsoft Foundation Class library. This sample code covers the usage of the basic job initialization and termination, license check-in and check-out, using TCP or UDP as transport protocol, getting the user list, and LSAPI. These API function calls are made in a single file, WINTEVW.CPP. In order for this sample program to work with your vendor daemon, the sample program must be configured to have the same encryption seeds as your vendor daemon. Use the Change Encryption Code button to change the encryption seeds for the sample program to match your vendor daemon.LBL="" HELPID=""WINSOCK DLL CompatibilityThe FLEXlm Client Library for Windows and Windows NT should operate on any WINSOCK compatible TCP/IP stack. If you are using PathWay Access version 3.0 or PathWay Runtime version 2.0, you must contact Wollongong for a ID="chap1518"ID="chap1519"WINSOCK.DLL patch (TC56236.EXE) in order for the DLL to work properly over PathWay TCP/IP stack. Before you acquire the patch from Wollongong, the temporary workaround for PathWay WINSOCK.DLL problem is to type the following command before starting Windows.C:> set PATHWAY_PATCH=1LBL="A"ID="41257"Distribution Kit ContentsLBL="" HELPID=""Binary kitsVERSION File containing the version number of this FLEXlm kit.lmgr/examples/ Example FLEXlm programs.        child/ Example child process to check out a license.        client.c A more advanced example of a client program.        filter/ Example vendor-daemon checkout filter.        licenses/ License templates for use with lmcrypter.        ls_co_ex.c Example of client-side checkout filter.        vendor_hostid/ Example vendor-defined hostid implementation.ID="appA1"        vendor_info/ Example of LM_A_VD_FEATURE_INFOID="appA2" usage.lmgr/machind/ Machine-independent portions of the FLEXlm kit.        CONFIG_DAEMON Vendor daemon configuration script.        DEMO_INSTALL Installation script for demo kits.        INSTALL Kit installation script.        RELEASE_NOTES Release notes for this version.        create_lic.c Source to create_license.        create_pkg.c Source to create_pkg.        isvaliddate.c Source to isvaliddate.        lm_attr.h Definitions of attribute values.        lm_client.h Client include file.        lm_code.h Definition of encryption seed values.        lm_comm.h  Communications definitions.        lm_errors.h Definitions of FLEXlm error strings.        lm_hosttype.h Host machine type definitions.        lm_lsapi.h Definitions for the LSAPI interface.        lm_slwg.h Software License Working Group definitions.        lmclient.c Source to example client program.        lmcrypter.c Source to lmcrypter program.        lmfeatset.c Source to lmfeatset program.        lmrandom.c Source to lmrandom program.        ls_attr.h Daemon include file.        ls_feature.h Daemon include file.        ls_log.h Daemon include file.        ls_master.h Daemon include file.        ls_server.h Daemon include file.        l_servprot.h Daemon include file.        ls_vendor.c The vendor daemon global configuration data.        ls_vendor.tpl Template ls_vendor.c.        manual.ps FLEXlm Programmers Guide (this manual) in PostScript format.lmgr/man/ Man pages for FLEXlm.lmgr/arch_os/ where `arch' is the machine architecture, and `os' is the operating system version.        llib-lmgr.ln Client lint library.        liblmgr.a Client library.        liblmgrd.a The license daemon object library file.        liblmgr_as.a Vendor daemon library.        liblmgr_pic.a (certain platforms only) - client library compiled PIC.        liblmgr_s.a Additional vendor daemon library.        lmgrd The license daemon.        lmutil FLEXlm administration utilities.        lmutil.o Object file for lmutil.        makefile Makefile for utilities, daemons, and client software.lmgr/debug_libs/arch_os/ The `debug_libs' directory only appears on tape and CD kits. Versions of the libraries compiled with -g.        liblmgrd.a The license daemon object library file.        liblmgr_as.a Vendor daemon library.        liblmgr_s.a Additional vendor daemon library.LBL="" HELPID=""Binary Kit for Windows and Windows NTBIN\        LMGR32.DLL Client DLL        WINTEST.EXE Demo program        LMUTIL.EXE FLEXlm administration utilities        LMGRD.EXE The license daemon        CREATE_L.EXE Sample create license program        VENDOR.EXE Sample vendor daemon        LMCLIENT.EXE Sample client program        LICENSE.DAT Sample license file        VSN16.DLL Special DLL for FLEXlm under Win32s        INSTALL.EXE lmgrd-as-service installation program        CREATE_P.EXE Sample create package program        LMCRYPTE.EXE Sample lmcrypter programDOC\        RELEASE.NOT Release note for this version        MANUAL.PS Programmer's manual in PostscriptH\        LM_CODE.H Definition of encryption seed values        LM_CLIEN.H Client include file        LM_ATTR.H Definition of attribute values        LM_LSAPI.H Definition of LSAPI interface        LM_COMM.H Communication definitions        LM_ERROR.H Definitions of FLEXlm error strings.        LM_HOSTT.H Host machine type definitions        LS_FEATU.H Daemon include file        LS_MASTE.H Daemon include file        LS_SERVE.H Daemon include file        LS_SERVP.H Daemon include file        LS_LOG.H Daemon include file        LS_ATTR.H Daemon include fileLIB\        LMGR32.LIB Client DLL import library        LMGRS.LIB Vendor daemon library        LMGRAS.LIB Vendor daemon libraryTEST\        LMCLIENT.C. Source code for sample program        LMCLIENT.MAK. Makefile for sample programUTILS\        CREATE_L.C  Source code for create license program        CREATE_L.MAK Makefile file for create license program        ISVALIDD.C Source code for date validation program        ISVALIDD.MAK Makefile for date validation program        LMFEATSE.C Source code for lmfeatset        LMFEATSE.MAK Makefile for lmfeatset        LMRANDOM.C Source code for lmrandom        LMRANDOM.MAK Makefile for lmrandom        LMCRYPTE.C Source code for lmcrypter        LMCRYPTE.MAK Makefile for lmcrypter        CREATE_P.C Source code for create package program        CREATE_P.MAK Makefile for create packet program        INSTALL.C Source code for lmgrd-as-service installation        INSTALL.MAK Makefile for lmgrd-as-service installationVENDOR\        LS_VENDO.C The vendor daemon global configuration data        VENDOR.MAK The vendor daemon makefileWINTEST\        CRYPCODE.CPP Source code for the demo program        MAINFRM.CPP Source code for the demo program        STDAFX.CPP Source code for the demo program        WINTEDOC.CPP  Source code for the demo program        WINTEST.CPP Source code for the demo program        WINTEVW.CPP Source code for the demo program        CRYPCODE.H Source code for the demo program        MAINFRM.H Source code for the demo program        RESOURCE.H Source code for the demo program        STDAFX.H Source code for the demo program        WINTEDOC.H Source code for the demo program        WINTEST.H Source code for the demo program        WINTEVW.H Source code for the demo program        WINTEST.RC Source code for the demo program        WINTEST.MAK Makefile for the demo program        WINTEST.DEF Source code for the demo programLBL="" HELPID=""Source kitslmgr/        BINARY_KIT Script to create a binary kit.        BINARY_CLEAN Script to clean up a binary kit.        app/ Source library for vendor daemons.        examples/ FLEXlm example programs.        h/ Include files used by both the client and daemon routines.        machind/ Machine-independent source directory (same as binary kit).        makefile Top-level makefile for the whole kit.        man/ Man pages for FLEXlm.        master/ The license daemon source. (DO NOT MODIFY) - (not on VMS kits).        server/ The source common to lmgrd and vendor daemons. (DO NOT MODIFY).        src/  The client library (also used by the daemons).        test/ Misc. test programs.        testsuite/ FLEXlm test suite.        utils/ Utility programs for creating license files, etc.        vendor/ Source code used for customizing vendor daemons.        UNIX/ VMS interface libraries (VMS kits only).LBL="" HELPID=""VMS kitsOn VMS kits, all the files from the machind and platform-specific directories are contained in a single directory. All object files have the extension ".obj" instead of ".o", all executables have the extension ".exe". In addition, the library files have different names under VMS. The library file names under VMS are:lmgr.olb Client library lmgr_as.olb Vendor daemon librarylmgr_s.olb Additional vendor daemon librarySome additional files on the VMS kit are:release_notes.vms VMS-specific release notesLBL="B"ID="69670"FLEXlm 3.0 API Compatibility MacrosID="appB1"FLEXlm v4.0 has a completely new API, where every function uses a job handle. In the new API, all the lm_xxx() functions are replaced by lc_xxx() functions. Each lc_xxx() function is identical to the pre 4.0 lm_xxx() function with the addition of a job handle pointer as its first parameter. So, for example, lm_checkin() was called as:lm_checkin(feature, keep_connection)so, lc_checkin is:lc_checkin(job, feature, keep_connection)In this call "job" is a (LM_HANDLE *).The lc_ prefix stands for "license client function", while the ls_, used for functions in liblmgr_s.a, stands for "license server function".The old API has been preserved with a set of macros in lm_client.h; however, if you want to use the old API, you will need to make the following code changes:You must invoke either the ID="appB2"LM_DATA or LM_DATA_STATIC macro in one of your modules. If you have all your lm_xxx() calls in a single module, Globetrotter Software recommends invoking the LM_DATA_STATIC macro near the top of this module (after including lm_client.h).If you have lm_xxx() calls in more than one module, you must either use LM_DATA in one module (to generate globals) and LM_DATA_REF in every other module which calls lm_xxx() functions, OR, you can pass the FLEXlm variables using the LM_DATA_STATIC, LM_DATA_PARAM, and LM_DATA_DECL macros. An example of how you would pass the variables as parameters:#include "lm_client.h"
LM_DATA;
[...]
my_function(LM_DATA_PARAM, p1, p2, p3);
[...]
void my_function(LM_DATA_PARAM, p1, p2, p3)
LM_DATA_DECL;
int p1;
char *p2.
int p3;
{...}Note in the example above, LM_DATA declares the variables, LM_DATA_PARAM generates the parameter list to pass them to the called function (and as the declaration in the called function), and LM_DATA_DECL declares them inside the called function. These macros are in lm_client.h.When you call lm_init(), you MUST specify "&lm_job" as the job handle in the third parameter, e.g.:rc = lm_init(VENDOR_NAME, &code, &lm_job);Finally, if you use any of the following internal FLEXlm client-library functions (l_xxx functions), you must add a job handle (lm_job) as the first parameter:COLUMNS="3"LBL="B-1"Table B-1 Internal FLEXlm Client-Library FunctionsLEFT="0" WIDTH="110"l_allfeatLEFT="115" WIDTH="110"l_asc_hostidLEFT="230" WIDTH="110"l_basic_connLEFT="0" WIDTH="110"l_checkoffLEFT="115" WIDTH="110"l_checkLEFT="230" WIDTH="110"l_clr_rcv_queueLEFT="0" WIDTH="110"l_conn_msgLEFT="115" WIDTH="110"l_connect_port LEFT="230" WIDTH="110"l_connect LEFT="0" WIDTH="110"l_dateLEFT="115" WIDTH="110"l_ether_idLEFT="230" WIDTH="110"l_featonLEFT="0" WIDTH="110"l_get_idLEFT="115" WIDTH="110"l_get_lfile LEFT="230" WIDTH="110"l_get_portLEFT="0" WIDTH="110"l_getattr_initLEFT="115" WIDTH="110"l_handshakeLEFT="230" WIDTH="110"l_hostLEFT="0" WIDTH="110"l_init_fileLEFT="115" WIDTH="110"l_lookupLEFT="230" WIDTH="110"l_lookup_servLEFT="0" WIDTH="110"l_master_list_lfpLEFT="115" WIDTH="110"l_msgrdyLEFT="230" WIDTH="110"l_open_fileLEFT="0" WIDTH="110"l_parse_feature_lineLEFT="115" WIDTH="110"l_parse_server_lineLEFT="230" WIDTH="110"l_print_configLEFT="0" WIDTH="110"l_print_serverLEFT="115" WIDTH="110"l_rcvmsgLEFT="230" WIDTH="110"l_rcvmsg_typeLEFT="0" WIDTH="110"l_rcvheartLEFT="115" WIDTH="110"l_read_lfile LEFT="230" WIDTH="110"l_resend_cmdLEFT="0" WIDTH="110"l_set_errnoLEFT="115" WIDTH="110"l_set_license_pathLEFT="230" WIDTH="110"l_sndmsgLEFT="0" WIDTH="110"l_start_okLEFT="115" WIDTH="110"l_timer_addLEFT="230" WIDTH="110"l_timer_deleteLEFT="0" WIDTH="110"l_timer_job_done LEFT="115" WIDTH="110"l_timer_changeLEFT="230" WIDTH="110"l_upgrade_featLEFT="0" WIDTH="110"l_validdateLEFT="115" WIDTH="110"LEFT="230" WIDTH="110"LBL="" HELPID=""LM_A_CUR_JOB removedID="appB3"With the new API, each lc_xxx function takes the job handle as a first argument, so there is effectively no "current job." If you are using the LM_DATA macro and lm_xxx functions, then you can change "current jobs" by simply setting lm_job to the current job handle, since, all the lc_xxx functions get lm_job as the job handle.LBL="" HELPID=""VENDOR_KEY5 and the LM_CODE macroID="appB4"ID="appB5"FLEXlm v4.0 added a fifth vendor key to increase the security of your binaries. This key is XORd ("^") into your two encryption seeds, so that your encryption seeds never appear anywhere in your program or vendor daemon. This fifth vendor key, also, never appears in your application code. The only place they occur is in calls to the new lc_crypt function, which should only be used to generate license files. LBL="" HELPID=""lc_checkout() version is now a stringID="appB6"ID="appB7"The version argument to lc_checkout() has been changed from a double floating point number to a string. FLEXlm requires that the string be a valid floating point number, so the only change that has occurred is that double-quotes (") must be added around the version argument.Example, before FLEXlm v4.0:lm_checkout("f1", 1.0, 1, LM_CO_WAIT, &code, LM_DUP_NONE);Current:lc_checkout(job, "f1", "1.0", 1, LM_CO_WAIT, &code, LM_DUP_NONE);In FLEXlm v4.0, there is no use of floating-point in the libraries, and all the alternate floating-point libraries have been removed from the kits.LBL="" HELPID=""LM_USERS struct changesID="appB8"The LM_USERS struct previously contained three members that have been replaced. The old members were:LM_SERVER *server;   /* License server */
LM_LICENSE_HANDLE license; /* License handle */
LM_FEATURE_HANDLE feature; /* feature handle */The replacement members are:CONFIG_PTR ul_conf;  /* CONFIG associated */
LM_LICENSE_HANDLE ul_license_handle; /* Server's license handle */The new members provide a better description of the license that the user is using. Note the following equivalences:old: server => new: ul_conf->server
old: license.handle => new: ul_license_handle
old: feature.code => new: ul_conf->codeNoteOld->feature.code was a char *name='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]' new->ul_conf->code is a char array.LBL="" HELPID=""ID="73563"l_crypt renamed to lc_crypt and args changedID="appB9"ID="appB10"Change any pre-4.0 references you have in your license generator from l_crypt() to lc_crypt(). This new name was made for additional security on Windows platforms, where DLLs are used. To take advantage of this security feature, ID="appB11"never call lc_crypt() (or the new lc_cryptstr() function) in programs that are shipped to customers.Before calling lc_crypt(), or lc_cryptstr(), you must add the following or similar code:LM_CODE(code, ENCRYPTION_CODE_1, ENCRYPTION_CODE_2, VENDOR_KEY1,
VENDOR_KEY2, VENDOR_KEY3, VENDOR_KEY4, VENDOR_KEY5);
VENDORCODE vc;
[...]
(void) memcpy((char *)&vc, (char *)&code, sizeof(vc));
vc.data[0] ^= VENDOR_KEY5;
vc.data[1] ^= VENDOR_KEY5;
lc_crypt(lm_job, &conf, l_bin_date(0), &vc);LBL="" HELPID=""See alsoIDREF="32035" TYPE="TITLE""lc_crypt"IDREF="33883" TYPE="TITLE""lc_cryptstr"LBL="C"The Daemon Log FileThe daemons all generate log files in the following format.ID="appC1"mm/dd hh:mm (DAEMON NAME) messagewhere: is the:mm/dd hh:mmThe time that the message was logged.DAEMON NAMEID="appC2"Either lmgrd or the string from the DAEMON line that describes your daemon.   In the case where a single copy of the daemon cannot handle all of the concurrent clients, an optional "_" followed by a number indicates that this message comes from a forked daemon.messageThe text of the message.The log files can be used to:Inform users when they need to purchase additional application software licenses.Diagnose configuration problems.Diagnose daemon software errors.These messages are described below in terms of their content:(If you have a source kit, these messages are also found by searching for the "LOG" macros in the .c files in the daemon directories.)LBL="" HELPID=""Informational MessagesConnected to nodeThis daemon is connected to its peer on node "node".CONNECTED, master is nameThe license daemons log this message when a quorum is up and everyone has selected a master.DEMO mode supports only one SERVER host!An attempt was made to configure a demo version of the software for more than one server host.DENIED: N feature to user (mm/dd/yy hh:mm)"user" was denied access to "N" licenses of "feature".   This is the message that will help you sell more licenses.EXITING DUE TO SIGNAL nnnEXITING with code nnnAll daemons list the reason that the daemon has exited.EXPIRED: feature"feature" has passed its expiration date.IN: feature by user(N licenses) (used: d:hh:mm:ss)(mm/dd/yy hh:mm)"user" has checked back in "N" licenses of "feature" at mm/dd/yy hh:mm.IN server died: feature by user (number licenses) (used: d:hh:mm:ss) (mm/dd/yy hh:mm)"user" has checked in "N" licenses by virtue of the fact that his server died.License Manager server startedThe license daemon was started.Lost connection to hostA daemon can no longer communicate with its peer on node "host", which can cause the clients to have to reconnect, or cause the number of daemons to go below the minimum number, in which case clients may start exiting. If the license daemons lose the connection to the master, they will kill all the vendor daemons; vendor daemons will shut themselves down.Lost quorumThe daemon lost quorum, so will process only connection requests from other deamons.MASTER SERVER died due to signal nnnThe license daemon received fatal signal nnn.MULTIPLE xxx servers running.Please kill, and restart license daemonThe license daemon has detected that multiple copies of vendor daemon "xxx" are running. The user should kill all "xxx" daemon processes and re-start the license daemon.OUT: feature by user (N licenses) (mm/dd/yy hh:mm)"user" has checked out "N" licenses of "feature" at mm/dd/yy hh:mmRemoving clients of childrenThe top-level daemon logs this message when one of the child daemons dies.RESERVE feature for HOST nameRESERVE feature for USER nameA license of "feature" is reserved for either user "name" or host "name".REStarted xxx (internet port nnn)Vendor daemon "xxx" was restarted at internet port "nnn".Retrying socket bind (address in use)The license servers try to bind their sockets for approximately 6 minutes if they detect "address in use" errors.Selected (EXISTING) master node.This license daemon has selected an existing master (node) as the master.SERVER shutdown requested.A daemon was requested to shut down via a user-generated kill command.[NEW] Server started for: feature-listA (possibly new) server was started for the features listed.Shutting down xxxThe license daemon is shutting down the vendor daemon xxx.SIGCHLD received. Killing child serversA vendor daemon logs this message when a shutdown was requested by the license daemon.Started nameThe license daemon logs this message whenever it starts a new vendor daemon.Trying connection to nodeThe daemon is attempting a connection to "node".LBL="" HELPID=""Configuration Problemshostname: Not a valid server host, exitingThis daemon was run on an invalid hostname.hostname: Wrong hostid, exitingThe hostid is wrong for "hostname".BAD CODE for feature-nameThe specified feature name has a bad license key.CANNOT OPEN options file "file"The options file specified in the license file could not be opened.Couldn't find a masterThe daemons could not agree on a master.license daemon: lost all connectionsThis message is logged when all the connections to a server are lost, which often indicates a network problem.lost lock, exitingError closing lock fileUnable to re-open lock fileThe vendor daemon has a problem with its lock file, usually because of an attempt to run more than one copy of the daemon on a single node. Locate the other daemon that is running via a "ps" command, and kill it with "kill -9".NO DAEMON line for daemonThe license file does not contain a "DAEMON" line for "daemon"No "FLEXlm" service foundThe TCP "FLEXlm" service did not exist in /etc/services.No license data for "feat", feature unsupportedThere is no feature line for "feat" in the license file.No features to serve!A vendor daemon found no features to serve. This could be caused by bad data in the license file.UNSUPPORTED FEATURE request: feature by userThe "user" has requested a feature that this vendor daemon does not support. This can happen for a number of reasons: the license file is bad, the feature has expired, or the daemon is accessing the wrong license file.Unknown host: hostnameThe hostname specified on a "SERVER" line in the license file does not exist in the network database (probably /etc/hosts).lm_server: lost all connectionsThis message is logged when all the connections to a server are lost. This probably indicates a network problem.NO DAEMON lines, exitingThe license daemon logs this message if there are no DAEMON lines in the license file. Since there are no vendor daemons to start, there is nothing to do.NO DAEMON line for nameA vendor daemon logs this error if it cannot find its own DAEMON name in the license file.LBL="" HELPID=""Daemon Software Errorsaccept: messageAn error was detected in the "accept" system call.ATTEMPT TO START VENDOR DAEMON xxx with NO MASTERA vendor daemon was started with no master selected. This is an internal consistency error in the daemons.BAD PID message from nnn: pid: xxx (msg)A top-level vendor daemon received an invalid PID message from one of its children (daemon number xxx).BAD SCONNECT message: (message)An invalid "server connect" message was received.Cannot create pipes for server communicationThe "pipe" call failed.Can't allocate server table spaceA malloc error. Check swap space.Connection to node TIMED OUTThe daemon could not connect to "node"Error sending PID to master serverThe vendor server could not send its PID to the top-level server in the hierarchy.f-do-notify called with no valid featureThis is an internal consistency error.Illegal connection request to DAEMONA connection request was made to "DAEMON", but this vendor daemon is not "DAEMON"Illegal server connection requestA connection request came in from another server without a DAEMON name.KILL of child failed, errno = nnnA daemon could not kill its child.No internet port number specifiedA vendor daemon was started without an internet port.Not enough descriptors to re-create pipesThe "top-level" daemon detected that one of its sub-daemons exited. In trying to restart the chain of sub-daemons, it was unable to get the file descriptors to set up the pipes to communicate. This is a fatal error, and the daemons must be re-started.read: error messageAn error in a "read" system call was detected.recycle_control BUT WE DIDN'T HAVE CONTROLThe hierarchy of vendor daemons has become confused over who holds the control token. This is an internal error.return_reserved: can't find feature listheadWhen a daemon is returning a reservation to the "free reservation" list, it could not find the listhead of features.select: messageAn error in a select system call was detected.Server exitingThe server is exiting. This is normally due to an error.SHELLO for wrong DAEMONThis vendor daemon was sent a "server hello" message that was destined for a different "DAEMON".Unsolicited msg from parent!Normally, the top-level vendor daemon sends no unsolicited messages. If one arrives, this message is logged. This is a bug.WARNING: CORRUPTED options list (o->next == 0)Options list TERMINATED at bad entryAn internal inconsistency was detected in the daemon's option list.LBL="D"FLEXlm Status Return ValuesThese are all the possible errors returned from lc_xxx() functions.Error numberSymbolic Name and Description-1 LM_NOCONFFILE  "cannot find license file"The license file cannot be opened. FLEXlm will attempt to open the standard file /usr/local/flexlm/licenses/license.dat,(or C:\FLEXLM\LICENSE.DAT on Windows and Windows NT) or the file specified by the vendor (via lc_set_attr()), or the file specified by the user in LM_LICENSE_FILE.-2 LM_BADFILE "invalid license file syntax"A feature name is > MAX_FEATURE_LEN,A daemon name is > MAX_DAEMON_LEN.A server name is > MAX_SERVER_NAME.A feature specifies no hostid and # of licenses is <= 0.-3 LM_NOSERVER "cannot connect to a license server"The daemon name specified in the license file FEATURE line does not match the vendor daemon name.-4 LM_MAXUSERS "licensed number of users already reached"The licenses number of users has been reached.-5 LM_NOFEATURE "no such feature exists"The feature could not be found in the license file.A call was made to one of the software license working group usage metering functions (um_xxx_record()).-6 LM_NOSERVICE  "no TCP "license" service exists"This happens if a SERVER line does not specify a TCP/port number, and the TCP license service does not exist in /etc/services.-7 LM_NOSOCKET  "no socket connection to license manager server"lc_disconn() was called after the process had been disconnected from the socket. This error can also occur if an internal error happens within l_sndmsg() or l_rcvmsg().-8 LM_BADCODE "encryption code in license file is inconsistent"The code in a license file line does not match the other data in the license file. This is usually the result of not building all the software components with the same encryption seeds. Check create_lic.c, ls_vendor.c, and your application code carefully to insure that they are all built with the same vendor code.-9 LM_NOTTHISHOST "invalid host"The hostid specified in the license file does not match the node on which the software is running.-10 LM_LONGGONE "feature has expired"The feature has expired, i.e., today's date is after the expiration date in the license file.-11 LM_BADDATE "invalid date format in license file"The start or expiration date in the license file is invalid.-12 LM_BADCOMM "invalid returned data from license server"The port number returned from lmgrd is invalid.An attempted connection to a vendor daemon did not result in a correct acknowledgment from the daemon.The daemon did not send back a message within the timeout interval.A message from the daemon had an invalid checksum.An lc_userlist() request did not receive the correct data.-13 LM_NO_SERVER_IN_FILE "no SERVER lines in license file"There is no SERVER line in the license file. All non-zero license count features need at least one SERVER line.-14 LM_BADHOST "cannot find SERVER hostname in network database"The gethostbyname() system call failed for the SERVER nodename in the license file.-15 LM_ CANTCONNECT "cannot connect to license server"The connect() system call failed, while attempting to connect to the daemon. The attempt to connect to the vendor daemon on all SERVER nodes was unsuccessful.lc_status() returns LM_CANTCONNECT if the feature had been checked out but the program is in the process of reconnecting. If reconnection fails, the final status return is LM_CANTCONNECT.-16 LM_CANTREAD "cannot read data from license server"The process cannot read data from the daemon within the timeout interval.The connection was reset by the daemon (usually because the daemon exited) before the process attempted to read data.-17 LM_CANTWRITE "cannot write data to license server"The process could not write data to the daemon after the connection was established.-18 LM_NOSERVSUPP "license server does not support this feature"The feature has expired (on the server node), or has not yet started, or the version is greater than the highest supported version.-19 LM_SELECTERR "error in select system call"The select() system call failed. This should never happen in a client program.-20 LM_SERVBUSY "license server busy (no majority)"The license server is busy establishing a quorum of server nodes so that licensing can start. This error is very rare, and checkout should be retried if this occurs.-21 LM_OLDVER "license file does not support this version"The version requested is greater than the highest version supported in the license file FEATURE line.-22 LM_CHECKINBAD "feature checkin failure detected at license server"The checkin request did not receive a proper reply from the vendor daemon (the license might still be considered in use).-23 LM_BUSYNEWSERV "license server temporarily busy (new server connecting)"The vendor daemon is in the process of establishing a quorum condition. New requests from clients are deferred during this period. This request should be retried.-24 LM_USERSQUEUED  "users are queued for this feature"This error is similar to MAXUSERS, but supplies the additional information that there are other users in the queue for this feature.-25 LM_SERVLONGGONE  "license server does not support this version of this feature"The version specified in the checkout request is greater than the highest version number the daemon supports.-26 LM_TOOMANY  "request for more licenses than this feature supports"A checkout request was made for more licenses than are supported in the license file. This request will never succeed.-27 LM_CANTREADKMEM "cannot read /dev/kmem"The file /dev/kmem is not readable on this system. This error will only occur if using extended hostid checking, which is no longer supported in current versions of FLEXlm.-28 LM_CANTREADVMUNIX  "cannot read /vmUNIX"The file /vmUNIX is not readable on this system. This error will only occur if using extended hostid checking, which is no longer supported in current versions of FLEXlm.-29 LM_CANTFINDETHER  "cannot find ethernet device"The ethernet device could not be located on this system.-30 LM_NOREADLIC "cannot read license file"The license file could not be read (errno == EPERM or EACCES).-31 LM_TOOEARLY "feature not yet available"The feature is not enabled yet (current date is before the feature start date).-32 LM_NOSUCHATTR "No such attribute"A call to lc_get_attr() or lc_set_attr() specified an unknown attribute code.-33 LM_BADHANDSHAKE  "Bad encryption handshake with daemon"The client performs an encryption handshake operation with the daemon prior to any licensing operations. This handshake operation failed.-34 LM_CLOCKBAD "Clock difference too large between client and server"The date on the client system does not agree closely enough with the date on the server (daemon) system. The amount of difference allowed is set by the software vendor with lc_set_attr(LM_A_MAX_TIMEDIFF, ...).-35 LM_FEATQUEUE "In the queue for this feature"This checkout request has resulted in the process being placed in the queue for this feature. Subsequent calls to lc_status() will yield the status of this queued request.-36 LM_FEATCORRUPT  "Feature database corrupted in daemon"The daemon's run-time feature data structures have become corrupted. This is an internal daemon error.-37 LM_BADFEATPARAM "Duplicate selection mismatch for this feature"The checkout request for this feature has specified a duplicates mask that does not match the mask specified by an earlier checkout. This is probably the result of using different versions of your client software, or from having an uninitialized variable in the dup_group field for lc_checkout(). -38 LM_FEATEXCLUDE  "User/host on EXCLUDE list for feature"The user/host/display has been excluded from this feature by an end-user's daemon option file.-39 LM_FEATNOTINCLUDE  "User/host not on INCLUDE list for feature"The user/host/display has NOT been included in this feature by an end-user's daemon option file.-40 LM_CANTMALLOC  "Cannot allocate dynamic memory"The malloc() call failed to return sufficient memory. -41 LM_NEVERCHECKOUT  "Feature was never checked out"This code is returned by lc_status() if the feature requested has never been checked out.-42 LM_BADPARAM "Invalid parameter"A call to lc_set_attr() specified an invalid value for its attribute.lc_get_attr(LM_A_MASTER,...) called without connection already established to server.-43 LM_NOKEYDATA "No FLEXlm key data supplied in lc_init() call"No FLEXlm key data was supplied to the lc_init() call. Some FLEXlm functions will be disabled.-44 LM_BADKEYDATA "Invalid FLEXlm key data supplied"Invalid FLEXlm key data was supplied to the lc_init() call. Some FLEXlm functions will be disabled.-45 LM_FUNCNOTAVAIL "FLEXlm function not available in this version"This FLEXlm function is not available. This could be a result of a BADKEYDATA, NOKEYDATA, or DEMOKIT return from lc_init().-46 LM_DEMOKIT "FLEXlm software is demonstration version"lc_init() returns this code when the FLEXlm vendor keys supplied indicate that this is a DEMO kit. Note that this means that FLEXlm functionality will expire.-47 LM_NOCLOCKCHECK "Clock setting check not available in daemon"lc_checkout() returns this code when the CLOCK SETTING check between client and daemon is not supported in this daemon. Try calling:lc_set_attr(LM_A_MAX_TIMEDIFF, -1)to disable the clock check.-48 LM_BADPLATFORM "FLEXlm platform not enabled"The software is running on a platform which is not supported by the vendor keys you have purchased. To purchase keys for additional platforms, contact Globetrotter Software, Inc.-49 LM_DATE_TOOBIG "Date too late for binary format"The expiration date format in FLEXlm licenses are good until the year 2027. This is probably a bogus date.-50 LM_EXPIREDKEYS "FLEXlm key data has expired"The FLEXlm Demo vendor keys have expired. Contact Globetrotter Software for new demo keys.-51 LM_NOFLEXLMINIT  "FLEXlm not initialized"A FLEXlm function was called before lc_init() was called. Always call lc_init() first.-52 LM_NOSERVRESP "Server did not respond to message"UDP communications failure. UDP communications are not guaranteed. FLEXlm makes a best effort to recover from lost and garbled messages, but this indicates a failure.-53 LM_CHECKOUTFILTERED  "Request rejected by vendor-defined filter"lc_checkout() failed because of the vendor defined routine which is set in ls_vendor.c: ls_outfilter.-54 LM_NOFEATSET "No FEATURESET line present in license file"lc_ck_feats() called, but no FEATURESET line in license file.-55 LM_BADFEATSET "Incorrect FEATURESET line in license file"Error return from lc_ck_feats().-56 LM_CANTCOMPUTEFEATSET  "Cannot compute FEATURESET line"Error return from lc_ck_feats(), which occurs because lc_feat_set() can not compute the FEATURESET line. This can happen because there's no FEATUREs in the file.-57 LM_SOCKETFAIL "socket() call failed"This can occur when the UNIX OS runs out of system resources.-58 LM_SETSOCKFAIL "setsockopt() failed"The setsockopt() call has failed. This is likely due to an OS error.-59 LM_BADCHECKSUM "message checksum failure"Communications error -- messages between client and server are encrypted and checksummed for security and integrity. The checksum will usually fail because of poor networking communications.-60 For internal use. -61 LM_SERVNOREADLIC  "Cannot read license file from server"This occurs when the license file, via LM_LICENSE_FILE, or lc_set_attr(LM_A_LICENSE_FILE, path), is incorrectly defined. This only occurs when LM_LICENSE_FILE is set to port@host.-62 LM_NONETWORK "Network software (tcp/ip) not available"This is reported on systems where this is detectable. Some systems may have this problem, but the error will not be reported as LM_NONETWORKname='mdash' font=symbol charset=fontspecific code=190 
			descr='[mdash]'system calls will simply fail.-63 LM_NOTLICADMIN "Not a license administrator" Various functions, such as lc_remove() and lc_shutdown(), require that the user be an license administrator, depending on how lmgrd was started. See lmgrd(), lmremove() and lmdown().-64 LM_REMOVETOOSOON  "lmremove request too soon"An lc_remove request occurred, but ls_min_lmremove (defined in ls_vendor.c) seconds have not elapsed since the license was checked out. See ls_vendor().-65 LM_BADVENDORDATA  "Bad VENDORCODE struct passed to lc_init()"LM_CODE macro was not used to define the VENDORCODE argument for lc_init. See lm_code.h and lmclient.c for an example of how to use the LM_CODE macro.-66 LM_LIBRARYMISMATCH  "FLEXlm include file/library mismatch"An attempt was made to create a licensed binary with mismatching source/header files and liblmgr.a. The source code version must match the linking libraries.-67 For Internal Use -68 For Internal Use -69 For Internal Use -70 For Internal Use -71  LM_BAD_TZ "Invalid TZ environment variable"On some operating systems, the end-user can significantly change the date using the TZ environment variable. This error detects this type of theft.-72 LM_OLDVENDORDATA "`Old-style' vendor keys (3-word)"V3.0 uses 4-vendor keys. This error detects that the LM_CODE macro was used with only 3 keys.-73 LM_LOCALFILTER "Local checkout filter requested request"Request was denied by filter specified in lc_set_attr(LM_A_CHECKOUTFILTER, filter).-74 LM_ENDPATH "Attempt to read beyond the end of LF path"An error occurred with the colon-separated list of license files.-75 LM_VMS_SETIMR_FAILED "SYS$SETIMR call failed"SYS$SETIMR is used on VMS to time out certain FLEXlm system calls.-76 LM_INTERNAL_ERROR "Internal FLEXlm Error - Please report to Globetrotter Software"-77 LM_BAD_VERSION "Bad version number - must be floating point number, with no letters"A line in the license file has an invalid version number.lc_checkout() was called with an invalid version character string.-78 LM_NOADMINAPI "FLEXadmin API functions not available"An attempt to get information from another company's vendor daemon was made via lc_get_attr(LM_A_VD_*, ...). This function call is only allowed for the client's own vendor daemon.-79 For Internal Use -80 For Internal Use -81 For Internal Use -82  LM_BADPKG "Invalid PACKAGE line in license file"PACKAGE missing or invalid COMPONENTS.A COMPONENT has number of users set, with OPTIONS=SUITE.A COMPONENT has number of users==0.-lsocketIDREF="chap0429"TLI vs. SocketsAIXIDREF="chap145"IBMalarm()IDREF="chap0673"LM_A_SETITIMERANYIDREF="chap066"LM_A_ANY_ENABLEDIDREF="chap1048"Special HostidsIDREF="chap03132"Error ReturnsAPIIDREF="appB1"FLEXlm 3.0 API Compatibility MacrosIDREF="chap051"Industry-Standard Licensing APIsApolloIDREF="chap06104"LM_A_USER_OVERRIDEIDREF="chap141"Apolloascii log fileIDREF="chap075"lmgrdasset_info=IDREF="chap1016"FEATURE or INCREMENT LineBINARY_KITIDREF="chap0211"Source Installationcheckin callbackin vendor daemonIDREF="chap0741"ls_incallbackcheckin filterin vendor daemonIDREF="chap0739"ls_infiltercheckout filterin vendor daemonIDREF="chap0745"ls_outfilterchrootIDREF="chap0735"ls_do_checkrootck=IDREF="chap1019"FEATURE or INCREMENT LineCOMM_TRANSPORTIDREF="chap1257"How to Select UDP ConnectionsCommentsIDREF="chap1026"CommentsCommunications Transport (TCP vs. UDP)IDREF="chap1247"Communications Transport (TCP vs. UDP)CONFIGIDREF="chap032"ReturnIDREF="chap0359"SyntaxIDREF="chap0691"LM_A_USER_CRYPTCONFIG_DAEMONIDREF="chap021"Binary Installation for UNIX SystemsIDREF="chap0722"Configuring Your Vendor DaemonIDREF="chap0645"LM_A_ETHERNET_BOARDSIDREF="chap0763"Vendorkeys and Vendor Encryption SeedsIDREF="chap0214"Example CONFIG_DAEMON SessionIDREF="chap0716"Configuring Your Vendor Daemonconfiguring FLEXlmnumber of server nodesIDREF="chap0119"Selecting Server Nodestypical configurationIDREF="chap018"Typical ConfigurationsContinued LinesIDREF="chap1027"Continued LinesCounted Vs. Uncounted LicensesIDREF="chap1061"Counted Vs. Uncounted Licensescreate_lic.cIDREF="chap0360"DescriptionIDREF="chap047"FLEXlm Example Applicationscreate_licenseIDREF="chap091"The create_license UtilityIDREF="chap0365" See AlsoIDREF="chap0698"See AlsoIDREF="chap046"FLEXlm Example Applicationscreate_pkgIDREF="chap098"create_pkgcustomizationby end usersIDREF="chap123"End-User Options FileDAEMONIDREF="chap107"DAEMON LineIDREF="chap03106"ReturnIDREF="appC2"The Daemon Log FileIDREF="chap0388"Parametersdaemon deathautomatic reconnectionIDREF="chap06107"LM_A_USER_RECONNECTdetectingIDREF="chap069"LM_A_CHECK_INTERVALdaemon log fileIDREF="appC1"The Daemon Log Filedaemon options fileEXCLUDE optionIDREF="chap124"End-User Options FileEXCLUDEALL optionIDREF="chap126"End-User Options FileINCLUDE optionIDREF="chap128"End-User Options FileNOLOG optionIDREF="chap1213"End-User Options Filedaemon.dat fileIDREF="chap023"Binary Installation for UNIX Systemsdebugging hintsIDREF="chap081"Debugging Your Application CodeDebugWinIDREF="chap1513"Debugging FLEXlm Windows and Windows NT Application and DLLDECnetIDREF="chap1416"Communications transport.DEF fileIDREF="chap1511"FLEXlm Callback Routinesdefault_license_fileIDREF="chap0725"default_license_file (VMS only)DEMOIDREF="chap03133"Error ReturnsIDREF="chap1110"DEMO SoftwareIDREF="chap0181"FLEXlm KitsIDREF="chap1049"Special HostidsDEMO SoftwareIDREF="chap118"DEMO Softwarecreating with FLEXlmIDREF="chap119"DEMO Software/dev/lan0IDREF="chap148"NCRDGIDREF="chap142"DGDISK_SERIAL_NUM=IDREF="chap1046"Special HostidsDISPLAYIDREF="chap0322"ParametersDISPLAY=IDREF="chap1044"Special HostidsDisplayStringIDREF="chap0635"LM_A_DISPLAY_OVERRIDEdist_info=IDREF="chap1014"FEATURE or INCREMENT Linedistribution kitIDREF="chap0210"Source InstallationDLLIDREF="chap154"Supported CompilersDUP_GROUPIDREF="chap0422"Lingering LicensesDUP_GROUP=IDREF="chap1021"FEATURE or INCREMENT LineDuplicate Grouping MaskIDREF="chap1223"Interaction Between RESERVE and the Duplicate Grouping Maskencryption routineuserIDREF="chap0689"LM_A_USER_CRYPTIDREF="chap0759"ls_user_cryptENCRYPTION_CODEIDREF="chap03144"DescriptionIDREF="chap0216"Installing Your FLEXlm Vendor KeysIDREF="chap0762"Vendorkeys and Vendor Encryption SeedsIDREF="chap03244"ParametersEnd-User License AdministrationIDREF="chap121"End-User License Administrationenvironment variablesLM_LICENSE_FILE IDREF="chap0111"Location of the License File/etc/rcIDREF="chap0117"Overview of Installation ProcessEXCLUDEIDREF="chap0186"FLEXlm KitsEXCLUDE optionIDREF="chap125"End-User Options Fileexpiration dateIDREF="chap1071"Demo SoftwareIDREF="chap1111"DEMO SoftwareFEATUREIDREF="chap108"FEATURE or INCREMENT LineFEATURESETIDREF="chap1025"FEATURESET LineIDREF="chap0749"ls_use_featsetIDREF="chap03108"DescriptionIDREF="chap0376"DescriptionIDREF="chap0353"DescriptionIDREF="chap0190"FLEXlm KitsIDREF="chap1113"Case 1IDREF="chap0911"lmfeatsetFinderIDREF="chap0712"The License Finder (lmgrd -f)FLEXlm APIIDREF="chap055"The FLEXlm APIIDREF="chap052"Industry-Standard Licensing APIsFLEXlm.poIDREF="chap0410"InternationalizationIDREF="chap0415"InternationalizationIDREF="chap049"InternationalizationFLEXLM_COMM_TRANSPORTIDREF="chap1253"How to Select UDP ConnectionsIDREF="chap064"LM_A_ALLOW_SET_TRANSPORTIDREF="chap1258"How to Select UDP ConnectionsFLEXLM_DIAGNOSTICSIDREF="chap0628"LM_A_DIAGS_ENABLEDFLEXLM_FINDER_TIMEOUTIDREF="chap0713"The License Finder (lmgrd -f)gethostnameIDREF="chap0636"LM_A_DISPLAY_OVERRIDEIDREF="chap0647"LM_A_HOST_OVERRIDEGROUPIDREF="chap127"End-User Options FileHeartbeatsIDREF="chap03219"How lc_timer() WorksIDREF="chap048"Client Heartbeats and License Server FailuresHOSTIDREF="chap0321"ParametersHost IDdetermining with lmhostidIDREF="chap1039"Hostids for FLEXlm Supported Machineson different machine typesIDREF="chap1038"Hostids for FLEXlm Supported MachineshostidIDREF="chap1012"FEATURE or INCREMENT LineIDREF="chap058"LSAPI v1.1IDREF="chap03112"ReturnIDREF="chap06115"LM_A_VENDOR_CHECKIDIDREF="chap03111"DescriptionIDREF="chap06117"LM_A_VENDOR_GETHOSTIDIDREF="chap1041"Special HostidsIDREF="chap06118"LM_A_VENDOR_GETHOSTIDIDREF="chap03114"DescriptionIDREF="chap06120"LM_A_VENDOR_PRINTHOSTIDIDREF="chap0653"LM_A_HOSTID_PARSEIDREF="chap0697"LM_A_USER_CRYPTIDREF="chap1232"lmhostidIDREF="chap1051"Vendor-defined hostidIDREF="chap1052"Vendor-defined hostidIDREF="chap0654"LM_A_HOSTID_PARSEIDREF="chap03115"ParametersIDREF="chap0648"LM_A_HOSTID_PARSEhostid, vendor-definedIDREF="appA1"Binary kitsHOSTID_DISK_SERIAL_NUMIDREF="chap03128"ParametersHOSTID_DISPLAYIDREF="chap03121"ParametersHOSTID_ETHERIDREF="chap03118"ParametersHOSTID_HOSTNAMEIDREF="chap03122"ParametersHOSTID_INTERNETIDREF="chap03129"ParametersHOSTID_LONGIDREF="chap03116"ParametersHOSTID_PARSEIDREF="chap0649"LM_A_HOSTID_PARSEHOSTID_SENTINEL_KEYIDREF="chap03127"ParametersHOSTID_STRINGIDREF="chap03125"ParametersHOSTID_UNAME_LONGIDREF="chap03123"ParametersHOSTID_USERIDREF="chap03120"ParametersHOSTID_VENDORIDREF="chap1054"Vendor-defined hostidIDREF="chap03130"ParametersHOSTNAME=IDREF="chap1045"Special HostidsHOSTTYPEIDREF="chap03135"ReturnHPIDREF="chap1233"lmhostidIDREF="chap143"HPHP300IDREF="chap03124"ParametersIBMIDREF="chap144"IBMINCLUDEIDREF="chap129"End-User Options FileIDREF="chap0185"FLEXlm KitsINCLUDEALLIDREF="chap1210"End-User Options FileINCREMENTIDREF="chap109"FEATURE or INCREMENT LineIDREF="chap0751"ls_use_all_feature_linesinitialization routinethat runs after normal initializationIDREF="chap0756"ls_user_init2that runs before normal initializationIDREF="chap0754"ls_user_init1INSTALLIDREF="chap0212"Example INSTALL SessionIDREF="chap0213"Example INSTALL Sessioninstalling FLEXlmCONFIG_DAEMON scriptIDREF="chap022"Binary Installation for UNIX Systemsinterface routinesIDREF="chap0123"Developer's InterfaceINTERNETIDREF="chap1221"End-User Options FileINTERNET=IDREF="chap1050"Special HostidsISSUER=IDREF="chap1017"FEATURE or INCREMENT LinejobIDREF="chap03143"DescriptionIDREF="chap0314"Descriptionl_basic_connIDREF="chap0674"LM_A_SETITIMERl_cryptIDREF="chap0699"See AlsoIDREF="appB9"l_crypt renamed to lc_crypt and args changedIDREF="chap1010"FEATURE or INCREMENT LineIDREF="chap092"The create_license Utilityl_extract_dateIDREF="chap0696"LM_A_USER_CRYPTIDREF="chap0361"Descriptionl_tli.oIDREF="chap0428"TLI vs. SocketsLANGIDREF="chap0416"Internationalizationlc_auth_dataIDREF="chap031"lc_auth_dataIDREF="chap0184"FLEXlm Kitslc_baddateIDREF="chap1514"Unsupported API RoutinesIDREF="chap036"lc_baddateIDREF="chap0126"Client Library Routineslc_checkinIDREF="chap0614"LM_A_CHECKOUT_DATAIDREF="chap0686"LM_A_UDP_TIMEOUTIDREF="chap0127"Client Library RoutinesIDREF="chap037"lc_checkinIDREF="chap0180"Example ApplicationIDREF="chap0125"Developer's Interfacelc_checkoutIDREF="chap0128"Client Library RoutinesIDREF="chap0620"LM_A_CHECKOUTFILTERIDREF="chap0613"LM_A_CHECKOUT_DATAIDREF="chap1224"Interaction Between RESERVE and the Duplicate Grouping MaskIDREF="chap0179"Example ApplicationIDREF="chap0312"lc_checkoutIDREF="chap03235"DescriptionIDREF="chap0124"Developer's Interfacelc_checkout versionIDREF="appB6"lc_checkout() version is now a stringlc_ck_featsIDREF="chap0129"Client Library RoutinesIDREF="chap0352"lc_ck_featslc_cryptIDREF="appB10"l_crypt renamed to lc_crypt and args changedIDREF="chap0358"lc_cryptlc_cryptstrIDREF="chap0366"lc_cryptstrlc_disconnIDREF="chap0368"lc_disconnIDREF="chap0130"Client Library Routineslc_displayIDREF="chap0131"Client Library RoutinesIDREF="chap0369"lc_display, lc_hostname, lc_usernamelc_errstringIDREF="chap0372"lc_errstringIDREF="chap0132"Client Library RoutinesIDREF="chap03175"Descriptionlc_feat_listIDREF="chap0133"Client Library RoutinesIDREF="chap0373"lc_feat_listlc_feat_setIDREF="chap0134"Client Library RoutinesIDREF="chap0375"lc_feat_setlc_first_jobIDREF="chap0135"Client Library RoutinesIDREF="chap0378"lc_first_job, lc_next_joblc_flush_configIDREF="chap0137"Client Library RoutinesIDREF="chap0380"lc_flush_configlc_free_jobIDREF="chap0136"Client Library RoutinesIDREF="chap156"lc_init() and lc_free_job() Must Be Matchedlc_get_attrIDREF="chap0435"Multiple JobsIDREF="chap063"Controlling Licensing Behavior Of Your Application With lc_set_attrIDREF="chap0138"Client Library RoutinesIDREF="chap0392"lc_get_attrlc_get_configIDREF="chap0140"Client Library RoutinesIDREF="chap0398"lc_get_configlc_get_dlistIDREF="chap03105"lc_get_dlistIDREF="chap0389"ParametersIDREF="chap0139"Client Library Routineslc_get_errnoIDREF="chap03104"lc_get_errnolc_get_featsIDREF="chap0141"Client Library RoutinesIDREF="chap03107"lc_get_featslc_gethostidIDREF="chap0142"Client Library RoutinesIDREF="chap03110"lc_gethostidlc_hostnameIDREF="chap0143"Client Library RoutinesIDREF="chap0370"lc_display, lc_hostname, lc_usernamelc_hosttypeIDREF="chap0183"FLEXlm KitsIDREF="chap0144"Client Library RoutinesIDREF="chap03134"lc_hosttypelc_idleIDREF="chap0145"Client Library RoutinesIDREF="chap03138"lc_idleIDREF="chap1219"End-User Options Filelc_initIDREF="chap0146"Client Library RoutinesIDREF="chap0390"DescriptionIDREF="chap0432"Multiple JobsIDREF="chap155"lc_init() and lc_free_job() Must Be MatchedIDREF="chap0177"Example ApplicationIDREF="chap0434"Multiple JobsIDREF="chap03142"lc_initlc_init()IDREF="chap0765"Vendorkeys and Vendor Encryption Seedslc_isadminIDREF="chap03159"lc_isadminlc_lic_whereIDREF="chap0148"Client Library Routineslc_logIDREF="chap0149"Client Library RoutinesIDREF="chap03164"lc_loglc_master_listIDREF="chap0150"Client Library RoutinesIDREF="chap03168"lc_master_listlc_next_confIDREF="chap0151"Client Library RoutinesIDREF="chap03172"lc_next_conflc_next_jobIDREF="chap0379"lc_first_job, lc_next_jobIDREF="chap0152"Client Library Routineslc_perrorIDREF="chap03173"lc_perrorIDREF="chap0178"Example ApplicationIDREF="chap06101"LM_A_USER_EXITCALLIDREF="chap0153"Client Library Routineslc_removeIDREF="chap0154"Client Library RoutinesIDREF="chap03176"lc_removelc_set_attrIDREF="chap0420"Lingering LicensesIDREF="chap0220"Building Your ApplicationIDREF="chap03186"lc_set_attrIDREF="chap0155"Client Library RoutinesIDREF="chap061"Controlling Licensing Behavior Of Your Application With lc_set_attrIDREF="chap0419"Lingering Licenseslc_shutdownIDREF="chap0156"Client Library RoutinesIDREF="chap03195"lc_shutdownlc_startupIDREF="chap03201"lc_startupIDREF="chap1515"Unsupported API Routineslc_statusIDREF="chap03203"Descriptionlc_timerIDREF="chap06102"See alsoIDREF="chap0666"LM_A_PERIODIC_COUNTIDREF="chap117"Difficult, depending on application policyIDREF="chap1220"End-User Options FileIDREF="chap06109"LM_A_USER_RECONNECTIDREF="chap03212"lc_timerlc_userlistIDREF="chap0158"Client Library RoutinesIDREF="chap03236"DescriptionIDREF="chap0618"LM_A_CHECKOUT_DATAIDREF="chap03227"lc_userlistlc_usernameIDREF="chap0159"Client Library RoutinesIDREF="chap0371"lc_display, lc_hostname, lc_usernamelc_vsendIDREF="chap03234"lc_vsendIDREF="chap0157"Client Library Routineslc_vsend()IDREF="chap0757"ls_vendor_msgliblmgr.aIDREF="chap0221"Building Your ApplicationIDREF="chap041"FLEXlm Naming Conventionsliblmgr_as.aIDREF="chap0644"LM_A_ETHERNET_BOARDSIDREF="chap043"FLEXlm Naming Conventionsliblmgr_s.aIDREF="chap042"FLEXlm Naming Conventionslicense administratorIDREF="chap03160"Descriptionlicense daemonautomatic reconnectionIDREF="chap06105"LM_A_USER_RECONNECTdefinitionIDREF="chap014"FLEXlm Terms and Definitionsdetecting daemon deathIDREF="chap067"LM_A_CHECK_INTERVALredundantIDREF="chap0113"Overview of Installation Processshutting downIDREF="chap1230"lmdownstartingIDREF="chap0115"Overview of Installation Processlicense fileIDREF="chap1028"License file name limitsIDREF="chap1029"Example License FileIDREF="chap101"The License FileIDREF="chap1031"Locating the License FileIDREF="chap1059"Types of License FilesIDREF="chap0110"Location of the License Filecombining license files from multiple vendorsIDREF="chap1112"Multiple Vendors Using FLEXlm At A Single End-User Siteconcurrent usgaeIDREF="chap1067"Concurrent Usage; Restricted nodescounted vs. uncounted licensesIDREF="chap1060"Counted Vs. Uncounted LicensesdefinitionIDREF="chap017"FLEXlm Terms and Definitionsdemo softwareIDREF="chap1070"Demo Softwaregenerating  with create_licenseIDREF="chap093"The create_license UtilitylocationIDREF="chap0122"Client ConsiderationsIDREF="chap1030"Locating the License Filemixed node locked and floatingIDREF="chap1069"Mixed Counted and Uncounted Licensesnetwork licensingIDREF="chap1065"Node Locked, Uncounted Licensesnode lockingIDREF="chap1064"Node Locked, Uncounted Licensesoverriding pathnameIDREF="chap019"Location of the License FileIDREF="chap1032"Locating the License FileIDREF="chap0727"default_license_file (VMS only)License FinderIDREF="chap0711"The License Finder (lmgrd -f)license.dat fileIDREF="chap131"Binaries Your Customers Will RequireLINGERIDREF="chap0418"Lingering LicensesIDREF="chap0658"LM_A_LINGERIDREF="chap1211"End-User Options FileIDREF="chap0417"Lingering LicensesLM_A_ALLOW_SET_TRANSPORTIDREF="chap1256"How to Select UDP ConnectionsIDREF="chap1259"How to Select UDP ConnectionsLM_A_ALT_ENCRYPTIONIDREF="chap065"LM_A_ALT_ENCRYPTIONLM_A_CHECK_INTERVALIDREF="chap03213"DescriptionIDREF="chap0667"LM_A_PERIODIC_COUNTIDREF="chap06108"LM_A_USER_RECONNECTIDREF="chap0676"LM_A_SETITIMERIDREF="chap0664"LM_A_PERIODIC_CALLIDREF="chap1218"End-User Options FileLM_A_CHECKOUT_DATAIDREF="chap0611"LM_A_CHECKOUT_DATALM_A_CHECKOUTFILTERIDREF="chap0619"LM_A_CHECKOUTFILTERLM_A_COMM_TRANSPORTIDREF="chap1252"How to Select UDP ConnectionsIDREF="chap1260"How to Select UDP ConnectionsLM_A_CONN_TIMEOUTIDREF="chap0625"LM_A_CONN_TIMEOUTLM_A_CRYPT_CASE_SENSITIVEIDREF="chap0626"LM_A_CRYPT_CASE_SENSITIVEIDREF="chap1011"FEATURE or INCREMENT LineLM_A_CUR_JOBIDREF="appB3"LM_A_CUR_JOB removedLM_A_DIAGS_ENABLEDIDREF="chap0627"LM_A_DIAGS_ENABLEDLM_A_DISABLE_ENVIDREF="chap1036"Locating the License FileLM_A_DISPLAY_OVERRIDEIDREF="chap0631"LM_A_DISPLAY_OVERRIDELM_A_EF_1IDREF="chap0639"LM_A_EF_1, LM_A_EF_2, LM_A_EF_3, LM_A_EF_4, LM_A_EF_5IDREF="chap0637"LM_A_EF_1, LM_A_EF_2, LM_A_EF_3, LM_A_EF_4, LM_A_EF_5LM_A_ETHERNET_BOARDSIDREF="chap0640"LM_A_ETHERNET_BOARDSLM_A_HOST_OVERRIDEIDREF="chap0646"LM_A_HOST_OVERRIDELM_A_HOSTID_PARSEIDREF="chap1055"Vendor-defined hostidLM_A_LF_LISTIDREF="chap0655"LM_A_LF_LISTLM_A_LICENSE_FILEIDREF="chap03192"Error ReturnsLM_A_LICENSE_FILE_PTRIDREF="chap03193"Error ReturnsIDREF="chap0656"LM_A_LICENSE_FILEIDREF="chap1034"Locating the License FileIDREF="chap0657"LM_A_LICENSE_FILE_PTRLM_A_LINGERIDREF="chap0421"Lingering LicensesLM_A_MAX_TIMEDIFFIDREF="chap0659"LM_A_MASTERIDREF="chap0660"LM_A_MAX_TIMEDIFFLM_A_NO_DEMOIDREF="chap0661"LM_A_NO_DEMOLM_A_NO_TRAFFIC_ENCRYPTIDREF="chap0662"LM_A_NO_TRAFFIC_ENCRYPTLM_A_PERIODIC_CALLIDREF="chap1516"Unsupported API RoutinesLM_A_PERIODIC_COUNTIDREF="chap0665"LM_A_PERIODIC_COUNTIDREF="chap0663"LM_A_PERIODIC_CALLIDREF="chap1517"Unsupported API RoutinesLM_A_RECONNECT_DONEIDREF="chap03222"How lc_timer() WorksLM_A_RETRY_COUNTIDREF="chap03221"How lc_timer() WorksLM_A_RETRY_INTERVALIDREF="chap0668"LM_A_RETRY_COUNT, LM_A_RETRY_INTERVALIDREF="chap03214"DescriptionIDREF="chap0677"LM_A_SETITIMERLM_A_REVISIONIDREF="chap06122"LM_A_VERSION and LM_A_REVISIONLM_A_SETITIMERIDREF="chap085"Debugging Your Application CodeIDREF="chap0669"LM_A_SETITIMERLM_A_SIGNALIDREF="chap0679"LM_A_SETITIMERIDREF="chap086"Debugging Your Application CodeIDREF="chap0680"LM_A_SIGNALLM_A_UDP_TIMEOUTIDREF="chap03224"lc_timer() and User TIMEOUT Option and UDP TimeoutIDREF="chap03141"ReturnIDREF="chap0310"DescriptionIDREF="chap1262"UDP Behavioral DifferencesIDREF="chap03217"DescriptionLM_A_USE_START_DATEIDREF="chap0687"LM_A_USE_START_DATELM_A_USER_CRYPTIDREF="chap0688"LM_A_USE_START_DATELM_A_USER_EXITCALLIDREF="chap06100"LM_A_USER_EXITCALLLM_A_USER_OVERRIDEIDREF="chap06103"LM_A_USER_OVERRIDELM_A_USER_RECONNECTIDREF="chap03220"How lc_timer() WorksLM_A_USER_RECONNECT_DONEIDREF="chap06110"LM_A_USER_RECONNECT_DONELM_A_VAL_TYPEIDREF="chap062"Controlling Licensing Behavior Of Your Application With lc_set_attrIDREF="chap03187"ParametersIDREF="chap03188"ParametersLM_A_VD_FEATURE_INFOIDREF="chap0396"Error ReturnsIDREF="appA2"Binary kitsIDREF="chap06112"LM_A_VD_GENERIC_INFO, LM_A_VD_FEATURE_INFOLM_A_VD_GENERIC_INFOIDREF="chap06111"LM_A_VD_GENERIC_INFO, LM_A_VD_FEATURE_INFOIDREF="chap0395"Error ReturnsLM_A_VENDOR_CHECKIDIDREF="chap06114"LM_A_VENDOR_CHECKIDIDREF="chap1056"Vendor-defined hostidLM_A_VENDOR_GETHOSTIDIDREF="chap1057"Vendor-defined hostidIDREF="chap06116"LM_A_VENDOR_GETHOSTIDLM_A_VENDOR_PRINTHOSTIDIDREF="chap06119"LM_A_VENDOR_PRINTHOSTIDIDREF="chap1058"Vendor-defined hostidLM_BAD_TZIDREF="chap03145"Error ReturnsLM_BAD_VERSIONIDREF="chap0382"Error ReturnsLM_BADCODEIDREF="chap0335"Error ReturnsIDREF="chap087"Solving Problems In The FieldIDREF="chap102"Format of the License FileLM_BADCOMMIDREF="chap03230"Error ReturnsIDREF="chap03178"ReturnIDREF="chap03239"Error ReturnsLM_BADDATEIDREF="chap094"isvaliddateLM_BADFEATSETIDREF="chap0356"Error ReturnsLM_BADFILEIDREF="chap03171"Error ReturnsIDREF="chap0381"Error ReturnsIDREF="chap0336"Error ReturnsIDREF="chap03101"Error ReturnsLM_BADHANDSHAKEIDREF="chap0337"Error ReturnsLM_BADKEYDATAIDREF="chap03147"Error ReturnsLM_BADPARAMIDREF="chap0391"Error ReturnsIDREF="chap03190"Error ReturnsIDREF="chap0339"Error ReturnsIDREF="chap03179"ReturnLM_BADPLATFORMIDREF="chap03146"Error ReturnsLM_BADVENDORDATAIDREF="chap03148"Error ReturnsLM_BADVERSIONIDREF="chap0338"Error ReturnsLM_BUSYNEWSERVIDREF="chap0340"Error ReturnsLM_CANTCOMPUTEFEATSETIDREF="chap0355"Error ReturnsLM_CANTCONNECTIDREF="chap0341"Error ReturnsIDREF="chap03209"Error ReturnsIDREF="chap03180"ReturnLM_CANTFINDETHERIDREF="chap03131"Error ReturnsIDREF="chap03113"Error ReturnsLM_CANTMALLOCIDREF="chap03149"Error ReturnsIDREF="chap03231"Error ReturnsIDREF="chap0364"Error ReturnsLM_CANTREADIDREF="chap03240"Error ReturnsIDREF="chap03181"ReturnIDREF="chap03200"Error ReturnsLM_CANTWRITEIDREF="chap03167"Error ReturnsIDREF="chap03182"ReturnLM_CHECKINBADIDREF="chap0311"Error ReturnsLM_CHECKOUTFILTEREDIDREF="chap0746"ls_outfilterlm_client.hIDREF="chap0219"Building Your ApplicationLM_CO_LOCALTESTIDREF="chap035"Error ReturnsIDREF="chap0319"ParametersLM_CO_NOWAITIDREF="chap0316"ParametersIDREF="chap03204"DescriptionLM_CO_QUEUEIDREF="chap0318"ParametersIDREF="chap03206"DescriptionLM_CO_WAITIDREF="chap0313"DescriptionIDREF="chap03205"DescriptionIDREF="chap0317"ParametersLM_CODEIDREF="chap0215"Installing Your FLEXlm Vendor KeysIDREF="chap03243"LM_CODEIDREF="appB5"VENDOR_KEY5 and the LM_CODE macroIDREF="chap0377"ParametersIDREF="chap0690"LM_A_USER_CRYPTIDREF="chap0176"Example ApplicationIDREF="chap0693"LM_A_USER_CRYPTIDREF="chap0218"Installing Your FLEXlm Vendor Keyslm_code.hIDREF="chap0724"Daemon NameIDREF="chap0764"Vendorkeys and Vendor Encryption SeedsIDREF="chap0718"Configuring Your Vendor DaemonLM_DATAIDREF="appB2"FLEXlm 3.0 API Compatibility MacrosLM_DATE_TOOBIGIDREF="chap096"isvaliddateLM_DEMOKITIDREF="chap03150"Error ReturnsLM_DUP_DISPIDREF="chap1226"Interaction Between RESERVE and the Duplicate Grouping MaskIDREF="chap0333"ParametersIDREF="chap0328"ParametersLM_DUP_HOSTIDREF="chap0331"ParametersIDREF="chap0332"ParametersIDREF="chap0327"ParametersIDREF="chap1225"Interaction Between RESERVE and the Duplicate Grouping MaskLM_DUP_NONEIDREF="chap0325"ParametersLM_DUP_USERIDREF="chap0330"ParametersIDREF="chap0326"ParametersLM_DUP_VENDORIDREF="chap0329"ParametersIDREF="chap0612"LM_A_CHECKOUT_DATAlm_errors.hIDREF="chap0414"InternationalizationLM_EXPIRED_KEYSIDREF="chap03152"Error ReturnsLM_FEATQUEUEIDREF="chap03208"DescriptionIDREF="chap03210"Error ReturnsIDREF="chap0342"Error ReturnsLM_FUNCNOTAVAILIDREF="chap03189"Error ReturnsIDREF="chap033"Error ReturnsIDREF="chap03232"Error ReturnsIDREF="chap0357"Error ReturnsIDREF="chap03153"Error ReturnsIDREF="chap03197"Error ReturnsIDREF="chap03198"Error ReturnsIDREF="chap03137"Error ReturnsIDREF="chap0343"Error Returnslm_iaadminIDREF="chap0147"Client Library Routineslm_isresIDREF="chap03229"ReturnLM_KEY_NO_DATAIDREF="chap03154"Error ReturnsIDREF="chap03151"Error ReturnsLM_LIBRARYMISMATCHIDREF="chap03155"Error ReturnsLM_LICENSE_FILEIDREF="chap1114"Case 2 IDREF="chap03163"DescriptionIDREF="chap112"Where to Install Your Licensing SoftwareIDREF="chap0710"lmgrdIDREF="chap0433"Multiple JobsIDREF="chap1035"Locating the License FileIDREF="chap0630"LM_A_DISABLE_ENVLM_LICENSE_FILE variableIDREF="chap0112"Location of the License FilesettingIDREF="chap0629"LM_A_DISABLE_ENVLM_LOCALFILTERIDREF="chap0345"Error ReturnsIDREF="chap0621"LM_A_CHECKOUTFILTERLM_LOG_MAX_LENIDREF="chap03165"ParametersLM_LONGGONEIDREF="chap095"isvaliddateLM_MAXUSERSIDREF="chap0346"Error ReturnsLM_NEVERCHECKOUTIDREF="chap03211"Error ReturnsLM_NO_SERVER_IN_FILEIDREF="chap0347"Error ReturnsIDREF="chap03170"Error ReturnsLM_NOADMINAPIIDREF="chap06113"LM_A_VD_GENERIC_INFO, LM_A_VD_FEATURE_INFOIDREF="chap0394"Error ReturnsLM_NOCONFFILEIDREF="chap03191"Error ReturnsIDREF="chap03100"Error ReturnsIDREF="chap0384"Error ReturnsLM_NOFEATSETIDREF="chap0354"Error ReturnsLM_NOFEATUREIDREF="chap0344"Error ReturnsIDREF="chap0348"Error ReturnsIDREF="chap0374"Error ReturnsIDREF="chap03233"Error ReturnsIDREF="chap0399"Error ReturnsIDREF="chap0383"Error ReturnsIDREF="chap0385"Error ReturnsIDREF="chap03183"ReturnIDREF="chap03109"Error ReturnsIDREF="chap034"Error ReturnsLM_NOFILEVSENDIDREF="chap03241"Error ReturnsLM_NONETWORKIDREF="chap03157"Error ReturnsLM_NOREADLICIDREF="chap0386"Error ReturnsIDREF="chap03102"Error ReturnsLM_NOSERVSUPPIDREF="chap0397"Error ReturnsIDREF="chap0349"Error ReturnsIDREF="chap03242"Error ReturnsLM_NOSOCKETIDREF="chap03166"Error ReturnsLM_NOSUCHATTRIDREF="chap03194"Error ReturnsIDREF="chap0393"Error ReturnsLM_NOTLICADMINIDREF="chap03199"Error ReturnsIDREF="chap03184"ReturnLM_OLDVENDORDATAIDREF="chap03156"Error ReturnsIDREF="chap03158"Error ReturnsLM_OLDVERIDREF="chap0350"Error ReturnsLM_REMOVETOOSOONIDREF="chap03185"ReturnLM_SERVBUSYIDREF="chap0351"Error ReturnsLM_SERVERIDREF="chap03169"ReturnLM_SERVNOREADLICIDREF="chap0387"Error ReturnsIDREF="chap03103"Error ReturnsLM_TCPIDREF="chap0622"LM_A_COMM_TRANSPORTLM_UDPIDREF="chap0623"LM_A_COMM_TRANSPORTLM_UNKNOWNIDREF="chap03136"ReturnLM_USERS structIDREF="appB8"LM_USERS struct changesLM_USERSQUEUEDIDREF="chap03207"DescriptionlmadminIDREF="chap073"lmgrdIDREF="chap03177"Descriptionlmadmin groupIDREF="chap03161"DescriptionlmcksumIDREF="chap1229"lmcksumIDREF="chap1228"License Administration ToolslmcrypterIDREF="chap097"lmcrypterlmdownIDREF="chap03196"DescriptionIDREF="chap078"lmgrdlmfeatsetIDREF="chap0910"lmfeatsetlmgrdIDREF="chap0714"Creating a New lmgrd ExecutableIDREF="chap071"lmgrdIDREF="chap013"FLEXlm Terms and DefinitionsIDREF="chap1246"Switching the Debug Log File Under UNIXIDREF="chap0411"Internationalizationlmgrd fileIDREF="chap132"Binaries Your Customers Will RequirelmhostidIDREF="chap106"See alsoIDREF="chap1040"Hostids for FLEXlm Supported MachinesIDREF="chap1231"lmhostidlmrandomIDREF="chap0721"Configuring Your Vendor DaemonIDREF="chap0720"Configuring Your Vendor DaemonlmremoveIDREF="chap1235"lmremoveIDREF="chap079"lmgrdlmrereadIDREF="chap072"lmgrdIDREF="chap1239"lmrereadIDREF="chap0189"FLEXlm KitslmstatIDREF="chap03228"DescriptionIDREF="chap0617"LM_A_CHECKOUT_DATAIDREF="chap1240"lmstatlmswitchIDREF="chap1241"lmswitchlmswitchrIDREF="chap1242"lmswitchrlmutilIDREF="chap0413"InternationalizationIDREF="chap1227"License Administration ToolslmverIDREF="chap1244" lmverlog fileIDREF="chap1245"Switching the Debug Log File Under UNIXlogfileIDREF="chap074"lmgrdls_attr.hIDREF="chap0770"Vendor daemon Support Routinesls_compare_vendor_on_incrementIDREF="chap0728"ls_compare_vendor_on_incrementls_compare_vendor_on_upgradeIDREF="chap0729"ls_compare_vendor_on_upgradels_conn_timeoutIDREF="chap0730"ls_conn_timeoutls_crypt_case_sensitiveIDREF="chap0732"ls_crypt_case_sensitivels_daemon_periodicIDREF="chap0733"ls_daemon_periodicls_do_checkrootIDREF="chap0734"ls_do_checkrootls_dump_send_dataIDREF="chap0736"ls_dump_send_datals_enforce_startdateIDREF="chap0737"ls_enforce_startdatels_get_attrIDREF="chap0769"Vendor daemon Support Routinesls_incallbackIDREF="chap0740"ls_incallbackls_infilterIDREF="chap0738"ls_infilterls_min_lmremoveIDREF="chap1238"See alsols_minimum_user_timeoutIDREF="chap03225"lc_timer() and User TIMEOUT Option and UDP TimeoutIDREF="chap03218"Descriptionls_outfilterIDREF="chap0744"ls_outfilterls_read_waitIDREF="chap0743"ls_read_waitls_show_vendor_defIDREF="chap0747"ls_show_vendor_defIDREF="chap0616"LM_A_CHECKOUT_DATAls_tell_startdateIDREF="chap0748"ls_tell_startdatels_use_all_feature_linesIDREF="chap0750"ls_use_all_feature_linesls_user_cryptIDREF="chap0758"ls_user_cryptls_user_init1IDREF="chap0753"ls_user_init1IDREF="chap0643"LM_A_ETHERNET_BOARDSls_user_init2IDREF="chap0755"ls_user_init2ls_user_lockfileIDREF="chap0760"ls_user_lockfilels_vendor.cIDREF="chap0719"Configuring Your Vendor DaemonIDREF="chap03226"lc_timer() and User TIMEOUT Option and UDP TimeoutIDREF="chap03237"Descriptionls_vendor_msgIDREF="chap03238"DescriptionLSAPIIDREF="chap057"LSAPI v1.1IDREF="chap054"Industry-Standard Licensing APIsIDREF="chap0169"LSAPI CallsLSEnumProvidersIDREF="chap0170"LSAPI CallsLSGetMessageIDREF="chap0171"LSAPI CallsLSQueryIDREF="chap0172"LSAPI CallsLSReleaseIDREF="chap0173"LSAPI CallsLSRequestIDREF="chap0174"LSAPI CallsLSUpdateIDREF="chap0175"LSAPI CallsMAX_CRYPT_LENIDREF="chap0695"LM_A_USER_CRYPTMAX_HOSTID_LENIDREF="chap1053"Vendor-defined hostidIDREF="chap06121"LM_A_VENDOR_PRINTHOSTIDMAX_VENDOR_CHECKOUT_DATAIDREF="chap0615"LM_A_CHECKOUT_DATAMicrosoft CIDREF="chap026"Binary Installation for Windows SystemsMultiple JobsIDREF="chap0431"Multiple JobsNCRIDREF="chap147"NCRnetwork licensing on limited set of hostsIDREF="chap1068"Concurrent Usage; Restricted nodesNFSIDREF="chap111"Where to Install Your Licensing SoftwareNode LockingIDREF="chap1063"Node Locked, Uncounted LicensesNOLOGIDREF="chap1212"End-User Options FileNOTICE=IDREF="chap1018"FEATURE or INCREMENT LineOptionsIDREF="chap122"End-User Options FileOVERDRAFT=IDREF="chap1020"FEATURE or INCREMENT LinePACKAGEIDREF="chap099"create_pkgIDREF="chap1023"PACKAGE LinePathWay AccessIDREF="chap1518"WINSOCK DLL CompatibilityPlatform-Specific NotesSGIIDREF="chap149"SGIVAX/VMSIDREF="chap1413"VMSport addressIDREF="chap104"Format of the License Fileport@hostIDREF="chap113"Where to Install Your Licensing SoftwareIDREF="chap1037"Locating the License FileProgram ManagerIDREF="chap028"Binary Installation for Windows NT Systemsredundant serverIDREF="chap0182"FLEXlm Kitsredundant serversIDREF="chap0120"Selecting Server NodesIDREF="chap03202"DescriptionIDREF="chap0771"Redundant License ServersIDREF="chap0430"Multiple JobsIDREF="chap0731"ls_conn_timeoutIDREF="chap114"Where to Install Your Licensing Softwareremoving a licenseIDREF="chap1236"lmremoveREPORTLOGIDREF="chap1214"End-User Options FileIDREF="chap1243"See alsoRESERVEIDREF="chap1216"End-User Options FileIDREF="chap0187"FLEXlm KitsIDREF="chap1222"Interaction Between RESERVE and the Duplicate Grouping MaskRESERVE optionIDREF="chap1215"End-User Options File restricted nodesIDREF="chap1067"Concurrent Usage; Restricted nodesRetry intervalIDREF="chap0121"Client ConsiderationsRS/6000IDREF="chap146"IBMIDREF="chap133"Information every Customer Needs to KnowSCOIDREF="chap1234"lmhostidIDREF="chap03126"ParametersSDK standard callback routinesIDREF="chap1510"FLEXlm Callback Routinessecurity guidelinesIDREF="chap116"How to Keep Your Software SecureSENTINEL_KEYIDREF="chap1047"Special HostidsSERVERIDREF="chap105"SERVER LineIDREF="chap0772"Redundant License ServersIDREF="chap1066"Node Locked, CountedIDREF="chap103"Format of the License FileIDREF="chap1042"Special Hostidsserver nodesdeciding number ofIDREF="chap0118"Selecting Server NodesdefinitionIDREF="chap015"FLEXlm Terms and DefinitionsmultipleIDREF="chap016"FLEXlm Terms and DefinitionssetitimerIDREF="chap0670"LM_A_SETITIMERSIGALRMIDREF="chap0678"LM_A_SETITIMERIDREF="chap0684"LM_A_SIGNALIDREF="chap0610"LM_A_CHECK_INTERVALIDREF="chap0675"LM_A_SETITIMERsignalIDREF="chap0681"LM_A_SIGNALSIGPIPEIDREF="chap082"Debugging Your Application CodeSITE LICENSEIDREF="chap0334"ParametersSocketIDREF="chap0424"TLI vs. SocketsIDREF="chap0426"TLI vs. SocketsSoftware License Working GroupIDREF="chap056"Software License Working GroupSoftware License Working Group APIIDREF="chap053"Industry-Standard Licensing APIssoftware license working group compatibility callslb_check_waitIDREF="chap0164"Software License Working Group Compatibility Callslb_confirmIDREF="chap0166"Software License Working Group Compatibility Callslb_get_cur_usersIDREF="chap0168"Software License Working Group Compatibility Callslb_releaseIDREF="chap0167"Software License Working Group Compatibility Callslb_requestIDREF="chap0163"Software License Working Group Compatibility Callslb_wait_removeIDREF="chap0165"Software License Working Group Compatibility Callsls_initIDREF="chap0160"Software License Working Group Compatibility Callsls_log_messageIDREF="chap0162"Software License Working Group Compatibility Callsls_terminateIDREF="chap0161"Software License Working Group Compatibility CallsSolarisIDREF="chap1410"SVR4 SystemsIDREF="chap0425"TLI vs. SocketsIDREF="chap0427"TLI vs. SocketsSource InstallationIDREF="chap029"Source Installationsprintf()IDREF="chap0315"DescriptionSUITEIDREF="chap1024"PACKAGE LineSUNIDREF="chap03117"ParametersSunviewIDREF="chap083"Debugging Your Application CodeIDREF="chap0672"LM_A_SETITIMERIDREF="chap0683"LM_A_SIGNALSVR4IDREF="chap1411"SVR4 SystemsTCPIDREF="chap038"DescriptionIDREF="chap1237"lmremoveIDREF="chap1248"Communications Transport (TCP vs. UDP)TIMEOUTIDREF="chap1217"End-User Options FileIDREF="chap03216"DescriptionIDREF="chap03223"lc_timer() and User TIMEOUT Option and UDP TimeoutIDREF="chap0188"FLEXlm KitsIDREF="chap03139"Descriptiontimeout valuesettingIDREF="chap0742"ls_minimum_user_timeouttimeout_intervalIDREF="chap077"lmgrdtimestamp_intervalIDREF="chap076"lmgrdTLIIDREF="chap0423"TLI vs. SocketsTRANSPORTIDREF="chap1254"How to Select UDP ConnectionsIDREF="chap1255"How to Select UDP ConnectionsTZ environment variableIDREF="chap1512"Time Zone SettingUDPIDREF="chap039"DescriptionIDREF="chap03140"ReturnIDREF="chap0685"LM_A_UDP_TIMEOUTIDREF="chap1249"Communications Transport (TCP vs. UDP)IDREF="chap03215"DescriptionIDREF="chap1251"How to Select UDP ConnectionsIDREF="chap1261"UDP Behavioral DifferencesUltrixIDREF="chap1412"UltrixIDREF="chap0642"LM_A_ETHERNET_BOARDSUncounted LicensesIDREF="chap1062"Counted Vs. Uncounted LicensesUPGRADEIDREF="chap0752"ls_use_all_feature_linesIDREF="chap1022"UPGRADE LineUSERIDREF="chap0320"ParametersUSER=IDREF="chap1043"Special Hostidsuser_info=IDREF="chap1015"FEATURE or INCREMENT LineVAXIDREF="chap03119"ParametersVENDORIDREF="chap0324"Parametersvendor daemonIDREF="chap0412"InternationalizationIDREF="chap011"FLEXlm Terms and Definitionsautomatic reconnectionIDREF="chap06106"LM_A_USER_RECONNECTbuildingIDREF="chap0768"Building Your Vendor Daemon - VMS SystemsIDREF="chap0766"Building Your Vendor Daemon - UNIX SystemsconfiguringIDREF="chap0715"Configuring Your Vendor DaemondefinitionIDREF="chap012"FLEXlm Terms and Definitionsdetecting daemon deathIDREF="chap068"LM_A_CHECK_INTERVALinserting user namesIDREF="chap0723"Daemon NameredundantIDREF="chap0114"Overview of Installation ProcessstartingIDREF="chap0116"Overview of Installation ProcessVENDOR_CHECKIDIDREF="chap0652"LM_A_HOSTID_PARSEVENDOR_DEFINEDIDREF="chap0323"ParametersVENDOR_GETHOSTIDIDREF="chap0650"LM_A_HOSTID_PARSEvendor_info=IDREF="chap1013"FEATURE or INCREMENT LineVENDOR_KEYIDREF="chap0761"Vendorkeys and Vendor Encryption SeedsIDREF="chap03245"ParametersIDREF="chap0217"Installing Your FLEXlm Vendor KeysVENDOR_KEY5IDREF="chap0694"LM_A_USER_CRYPTIDREF="chap0362"DescriptionIDREF="appB4"VENDOR_KEY5 and the LM_CODE macroIDREF="chap0367"ParametersVENDOR_PRINTHOSTIDIDREF="chap0651"LM_A_HOSTID_PARSEVENDORCODEIDREF="chap0363"ParametersIDREF="chap0692"LM_A_USER_CRYPTversionIDREF="appB7"lc_checkout() version is now a stringVMSIDREF="chap1250"Communications Transport (TCP vs. UDP)IDREF="chap1414"VMSIDREF="chap0624"LM_A_COMM_TRANSPORTIDREF="chap03162"ReturnIDREF="chap0717"Configuring Your Vendor DaemonIDREF="chap0726"default_license_file (VMS only)IDREF="chap0767"Building Your Vendor Daemon - VMS SystemsIDREF="chap0638"LM_A_EF_1, LM_A_EF_2, LM_A_EF_3, LM_A_EF_4, LM_A_EF_5IDREF="chap0641"LM_A_ETHERNET_BOARDSIDREF="chap115"Redundant vs. Single-server licensingVMS FLEXlmIDREF="chap1415"Communications transportWIN32IDREF="chap025"Binary Installation for Windows SystemsWin32sIDREF="chap152"Windows, Win32s, and Windows NTWindowsIDREF="chap1033"Locating the License FileIDREF="chap151"Windows, Win32s, and Windows NTIDREF="chap03174"DescriptionIDREF="chap044"FLEXlm Example ApplicationsIDREF="chap024"Binary Installation for Windows SystemsWindows DLLIDREF="appB11"l_crypt renamed to lc_crypt and args changedWindows NTIDREF="chap027"Binary Installation for Windows NT SystemsIDREF="chap153"Windows, Win32s, and Windows NTWinSockIDREF="chap159"lc_init() and lc_free_job() Must Be MatchedWINTESTIDREF="chap045"FLEXlm Example ApplicationsWollongongIDREF="chap1519"WINSOCK DLL CompatibilityWSACleanupIDREF="chap158"lc_init() and lc_free_job() Must Be MatchedWSAStartupIDREF="chap157"lc_init() and lc_free_job() Must Be MatchedX-Display nameIDREF="chap0632"LM_A_DISPLAY_OVERRIDEXOpenDisplayIDREF="chap0633"LM_A_DISPLAY_OVERRIDEXtAppInitializeIDREF="chap0634"LM_A_DISPLAY_OVERRIDEXViewIDREF="chap0682"LM_A_SIGNALIDREF="chap084"Debugging Your Application CodeIDREF="chap0671"LM_A_SETITIMER