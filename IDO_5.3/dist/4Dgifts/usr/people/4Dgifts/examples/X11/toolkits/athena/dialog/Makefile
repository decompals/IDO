# for more background/details on the below comments, please consult the
# ~4Dgifts/examples/X11/Imakefile.README file.

# NOTE:  this file only will be used once, the first time "make" is invoked.
#        once it is finished, a truly "correct", "X literate" Makefile will
#        exist.  At that point, this file will be only useful as an
#        example, or "document"...

all:
# mv this file into a filename that XMKMF(1) won't come along and blow away
	mv Makefile Makefile.boot

# because during this first-pass phase there does not yet exist a Makefile
# generated by IMAKE(1) using this directory's Imakefile as input, XMKMF(1)
# is necessary to generate this first version of the "X literate" Makefile.
# (after this point, executing "make Makefile" will do the same thing.
	xmkmf

# now generate a dependency listing of every .h file that each .o file needs.
# in this way, if any of the pertinent .h files ever change, the Makefile 
# will be hip enough to realize it's time to update the appropriate .o(s).
	make depend

# now that the correct, real-McCoy Makefile exists, go ahead and compile the
# specific client for the first time.
	make

clobber clean:
	xmkmf
	make depend
	make clean
